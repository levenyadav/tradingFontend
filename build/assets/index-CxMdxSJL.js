const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Markets-CpU70Kqp.js","assets/radix-D5295bUi.js","assets/charts-Dh6mNU2f.js","assets/vendor-DDxydHEc.js","assets/search-CJhr66dV.js","assets/Trading-C0Z69Zz5.js","assets/Portfolio-C7MIwYXV.js","assets/Transactions-DT7xHTW7.js"])))=>i.map(i=>d[i]);
import{j as e,c as La,a as Ra,P as Oa,b as Es,u as Ba,d as xr,e as Fs,f as Ma,g as $a,R as za,T as Ua,I as Fa,V as qa,h as Va,C as Wa,i as Ha,k as Ga,l as Ya,m as Ka,S as Ja,n as Xa,O as Qa,o as Za,p as en,q as tn,r as sn,s as rn,D as an}from"./radix-D5295bUi.js";import{a as nn}from"./vendor-DDxydHEc.js";import{r as o,R as on,d as gr,b as ln}from"./charts-Dh6mNU2f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Ot={},qs;function cn(){if(qs)return Ot;qs=1;var s=nn();return Ot.createRoot=s.createRoot,Ot.hydrateRoot=s.hydrateRoot,Ot}var dn=cn();const un="modulepreload",hn=function(s){return"/"+s},Vs={},as=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){let l=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=d?.nonce||d?.getAttribute("nonce");n=l(r.map(h=>{if(h=hn(h),h in Vs)return;Vs[h]=!0;const u=h.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":un,u||(f.as="script"),f.crossOrigin="",f.href=h,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((v,w)=>{f.addEventListener("load",v),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return n.then(l=>{for(const d of l||[])d.status==="rejected"&&i(d.reason);return t().catch(i)})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pn=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),Ws=s=>{const t=pn(s);return t.charAt(0).toUpperCase()+t.slice(1)},br=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=o.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...d},c)=>o.createElement("svg",{ref:c,...fn,width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:br("lucide",n),...d},[...l.map(([h,u])=>o.createElement(h,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(s,t)=>{const r=o.forwardRef(({className:a,...n},i)=>o.createElement(xn,{ref:i,iconNode:t,className:br(`lucide-${mn(Ws(s))}`,`lucide-${s}`,a),...n}));return r.displayName=Ws(s),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],gs=X("arrow-down-right",gn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Bt=X("arrow-left-right",bn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ge=X("arrow-left",yn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],gt=X("arrow-right",vn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],bs=X("arrow-up-right",wn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yr=X("bell",Nn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],kn=X("briefcase",jn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Hs=X("building-2",Sn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],qe=X("camera",Cn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],_n=X("chart-candlestick",Pn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],De=X("check",An);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vr=X("chevron-down",Tn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],In=X("chevron-right",En);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ln=X("chevron-up",Dn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Re=X("circle-alert",Rn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dt=X("circle-check-big",On);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mn=X("circle-help",Bn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zn=X("circle-x",$n);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ys=X("clock",Un);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qn=X("copy",Fn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],wr=X("credit-card",Vn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Hn=X("dollar-sign",Wn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Yn=X("eye-off",Gn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jn=X("eye",Kn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],et=X("file-text",Xn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ns=X("gift",Qn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ei=X("house",Zn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vs=X("info",ti);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nr=X("lock",si);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ai=X("log-out",ri);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],jr=X("mail",ni);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ws=X("map-pin",ii);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],li=X("menu",oi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],di=X("percent",ci);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],hi=X("phone",ui);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pi=X("plus",mi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kr=X("settings",fi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],gi=X("shield-alert",xi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gs=X("shield-check",bi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ys=X("shield",yi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sr=X("sparkles",vi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Ni=X("trending-down",wi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],st=X("trending-up",ji);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ds=X("upload",ki);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qt=X("user",Si);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ks=X("users",Ci);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Zt=X("wallet",Pi);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ke=X("x",_i);var Ai=Symbol.for("react.lazy"),es=on[" use ".trim().toString()];function Ti(s){return typeof s=="object"&&s!==null&&"then"in s}function Cr(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===Ai&&"_payload"in s&&Ti(s._payload)}function Pr(s){const t=Ei(s),r=o.forwardRef((a,n)=>{let{children:i,...l}=a;Cr(i)&&typeof es=="function"&&(i=es(i._payload));const d=o.Children.toArray(i),c=d.find(Di);if(c){const h=c.props.children,u=d.map(p=>p===c?o.Children.count(h)>1?o.Children.only(null):o.isValidElement(h)?h.props.children:null:p);return e.jsx(t,{...l,ref:n,children:o.isValidElement(h)?o.cloneElement(h,void 0,u):null})}return e.jsx(t,{...l,ref:n,children:i})});return r.displayName=`${s}.Slot`,r}var _r=Pr("Slot");function Ei(s){const t=o.forwardRef((r,a)=>{let{children:n,...i}=r;if(Cr(n)&&typeof es=="function"&&(n=es(n._payload)),o.isValidElement(n)){const l=Ri(n),d=Li(i,n.props);return n.type!==o.Fragment&&(d.ref=a?La(a,l):l),o.cloneElement(n,d)}return o.Children.count(n)>1?o.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var Ii=Symbol("radix.slottable");function Di(s){return o.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Ii}function Li(s,t){const r={...t};for(const a in t){const n=s[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...d)=>{const c=i(...d);return n(...d),c}:n&&(r[a]=n):a==="style"?r[a]={...n,...i}:a==="className"&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...s,...r}}function Ri(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}const Js=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Xs=gr,Ar=(s,t)=>r=>{var a;if(t?.variants==null)return Xs(s,r?.class,r?.className);const{variants:n,defaultVariants:i}=t,l=Object.keys(n).map(h=>{const u=r?.[h],p=i?.[h];if(u===null)return null;const f=Js(u)||Js(p);return n[h][f]}),d=r&&Object.entries(r).reduce((h,u)=>{let[p,f]=u;return f===void 0||(h[p]=f),h},{}),c=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((h,u)=>{let{class:p,className:f,...v}=u;return Object.entries(v).every(w=>{let[y,P]=w;return Array.isArray(P)?P.includes({...i,...d}[y]):{...i,...d}[y]===P})?[...h,p,f]:h},[]);return Xs(s,l,c,r?.class,r?.className)},Oi=(s,t)=>{const r=new Array(s.length+t.length);for(let a=0;a<s.length;a++)r[a]=s[a];for(let a=0;a<t.length;a++)r[s.length+a]=t[a];return r},Bi=(s,t)=>({classGroupId:s,validator:t}),Tr=(s=new Map,t=null,r)=>({nextPart:s,validators:t,classGroupId:r}),ts="-",Qs=[],Mi="arbitrary..",$i=s=>{const t=Ui(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return zi(l);const d=l.split(ts),c=d[0]===""&&d.length>1?1:0;return Er(d,c,t)},getConflictingClassGroupIds:(l,d)=>{if(d){const c=a[l],h=r[l];return c?h?Oi(h,c):c:h||Qs}return r[l]||Qs}}},Er=(s,t,r)=>{if(s.length-t===0)return r.classGroupId;const n=s[t],i=r.nextPart.get(n);if(i){const h=Er(s,t+1,i);if(h)return h}const l=r.validators;if(l===null)return;const d=t===0?s.join(ts):s.slice(t).join(ts),c=l.length;for(let h=0;h<c;h++){const u=l[h];if(u.validator(d))return u.classGroupId}},zi=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),r=t.indexOf(":"),a=t.slice(0,r);return a?Mi+a:void 0})(),Ui=s=>{const{theme:t,classGroups:r}=s;return Fi(r,t)},Fi=(s,t)=>{const r=Tr();for(const a in s){const n=s[a];Is(n,r,a,t)}return r},Is=(s,t,r,a)=>{const n=s.length;for(let i=0;i<n;i++){const l=s[i];qi(l,t,r,a)}},qi=(s,t,r,a)=>{if(typeof s=="string"){Vi(s,t,r);return}if(typeof s=="function"){Wi(s,t,r,a);return}Hi(s,t,r,a)},Vi=(s,t,r)=>{const a=s===""?t:Ir(t,s);a.classGroupId=r},Wi=(s,t,r,a)=>{if(Gi(s)){Is(s(a),t,r,a);return}t.validators===null&&(t.validators=[]),t.validators.push(Bi(r,s))},Hi=(s,t,r,a)=>{const n=Object.entries(s),i=n.length;for(let l=0;l<i;l++){const[d,c]=n[l];Is(c,Ir(t,d),r,a)}},Ir=(s,t)=>{let r=s;const a=t.split(ts),n=a.length;for(let i=0;i<n;i++){const l=a[i];let d=r.nextPart.get(l);d||(d=Tr(),r.nextPart.set(l,d)),r=d}return r},Gi=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,Yi=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null);const n=(i,l)=>{r[i]=l,t++,t>s&&(t=0,a=r,r=Object.create(null))};return{get(i){let l=r[i];if(l!==void 0)return l;if((l=a[i])!==void 0)return n(i,l),l},set(i,l){i in r?r[i]=l:n(i,l)}}},Ns="!",Zs=":",Ki=[],er=(s,t,r,a,n)=>({modifiers:s,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:n}),Ji=s=>{const{prefix:t,experimentalParseClassName:r}=s;let a=n=>{const i=[];let l=0,d=0,c=0,h;const u=n.length;for(let y=0;y<u;y++){const P=n[y];if(l===0&&d===0){if(P===Zs){i.push(n.slice(c,y)),c=y+1;continue}if(P==="/"){h=y;continue}}P==="["?l++:P==="]"?l--:P==="("?d++:P===")"&&d--}const p=i.length===0?n:n.slice(c);let f=p,v=!1;p.endsWith(Ns)?(f=p.slice(0,-1),v=!0):p.startsWith(Ns)&&(f=p.slice(1),v=!0);const w=h&&h>c?h-c:void 0;return er(i,v,f,w)};if(t){const n=t+Zs,i=a;a=l=>l.startsWith(n)?i(l.slice(n.length)):er(Ki,!1,l,void 0,!0)}if(r){const n=a;a=i=>r({className:i,parseClassName:n})}return a},Xi=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((r,a)=>{t.set(r,1e6+a)}),r=>{const a=[];let n=[];for(let i=0;i<r.length;i++){const l=r[i],d=l[0]==="[",c=t.has(l);d||c?(n.length>0&&(n.sort(),a.push(...n),n=[]),a.push(l)):n.push(l)}return n.length>0&&(n.sort(),a.push(...n)),a}},Qi=s=>({cache:Yi(s.cacheSize),parseClassName:Ji(s),sortModifiers:Xi(s),...$i(s)}),Zi=/\s+/,eo=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n,sortModifiers:i}=t,l=[],d=s.trim().split(Zi);let c="";for(let h=d.length-1;h>=0;h-=1){const u=d[h],{isExternal:p,modifiers:f,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:y}=r(u);if(p){c=u+(c.length>0?" "+c:c);continue}let P=!!y,b=a(P?w.substring(0,y):w);if(!b){if(!P){c=u+(c.length>0?" "+c:c);continue}if(b=a(w),!b){c=u+(c.length>0?" "+c:c);continue}P=!1}const I=f.length===0?"":f.length===1?f[0]:i(f).join(":"),re=v?I+Ns:I,xe=re+b;if(l.indexOf(xe)>-1)continue;l.push(xe);const J=n(b,P);for(let ne=0;ne<J.length;++ne){const D=J[ne];l.push(re+D)}c=u+(c.length>0?" "+c:c)}return c},to=(...s)=>{let t=0,r,a,n="";for(;t<s.length;)(r=s[t++])&&(a=Dr(r))&&(n&&(n+=" "),n+=a);return n},Dr=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=Dr(s[a]))&&(r&&(r+=" "),r+=t);return r},so=(s,...t)=>{let r,a,n,i;const l=c=>{const h=t.reduce((u,p)=>p(u),s());return r=Qi(h),a=r.cache.get,n=r.cache.set,i=d,d(c)},d=c=>{const h=a(c);if(h)return h;const u=eo(c,r);return n(c,u),u};return i=l,(...c)=>i(to(...c))},ro=[],Ae=s=>{const t=r=>r[s]||ro;return t.isThemeGetter=!0,t},Lr=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Rr=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ao=/^\d+\/\d+$/,no=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,io=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oo=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,co=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ot=s=>ao.test(s),oe=s=>!!s&&!Number.isNaN(Number(s)),Qe=s=>!!s&&Number.isInteger(Number(s)),us=s=>s.endsWith("%")&&oe(s.slice(0,-1)),He=s=>no.test(s),uo=()=>!0,ho=s=>io.test(s)&&!oo.test(s),Or=()=>!1,mo=s=>lo.test(s),po=s=>co.test(s),fo=s=>!R(s)&&!O(s),xo=s=>mt(s,$r,Or),R=s=>Lr.test(s),it=s=>mt(s,zr,ho),hs=s=>mt(s,wo,oe),tr=s=>mt(s,Br,Or),go=s=>mt(s,Mr,po),Mt=s=>mt(s,Ur,mo),O=s=>Rr.test(s),bt=s=>pt(s,zr),bo=s=>pt(s,No),sr=s=>pt(s,Br),yo=s=>pt(s,$r),vo=s=>pt(s,Mr),$t=s=>pt(s,Ur,!0),mt=(s,t,r)=>{const a=Lr.exec(s);return a?a[1]?t(a[1]):r(a[2]):!1},pt=(s,t,r=!1)=>{const a=Rr.exec(s);return a?a[1]?t(a[1]):r:!1},Br=s=>s==="position"||s==="percentage",Mr=s=>s==="image"||s==="url",$r=s=>s==="length"||s==="size"||s==="bg-size",zr=s=>s==="length",wo=s=>s==="number",No=s=>s==="family-name",Ur=s=>s==="shadow",jo=()=>{const s=Ae("color"),t=Ae("font"),r=Ae("text"),a=Ae("font-weight"),n=Ae("tracking"),i=Ae("leading"),l=Ae("breakpoint"),d=Ae("container"),c=Ae("spacing"),h=Ae("radius"),u=Ae("shadow"),p=Ae("inset-shadow"),f=Ae("text-shadow"),v=Ae("drop-shadow"),w=Ae("blur"),y=Ae("perspective"),P=Ae("aspect"),b=Ae("ease"),I=Ae("animate"),re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...xe(),O,R],ne=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],C=()=>[O,R,c],_=()=>[ot,"full","auto",...C()],ie=()=>[Qe,"none","subgrid",O,R],G=()=>["auto",{span:["full",Qe,O,R]},Qe,O,R],Y=()=>[Qe,"auto",O,R],M=()=>["auto","min","max","fr",O,R],ge=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...C()],$=()=>[ot,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],T=()=>[s,O,R],V=()=>[...xe(),sr,tr,{position:[O,R]}],ye=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",yo,xo,{size:[O,R]}],j=()=>[us,bt,it],L=()=>["","none","full",h,O,R],F=()=>["",oe,bt,it],ue=()=>["solid","dashed","dotted","double"],g=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>[oe,us,sr,tr],k=()=>["","none",w,O,R],A=()=>["none",oe,O,R],te=()=>["none",oe,O,R],ve=()=>[oe,O,R],we=()=>[ot,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[He],breakpoint:[He],color:[uo],container:[He],"drop-shadow":[He],ease:["in","out","in-out"],font:[fo],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[He],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[He],shadow:[He],spacing:["px",oe],text:[He],"text-shadow":[He],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ot,R,O,P]}],container:["container"],columns:[{columns:[oe,R,O,d]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[Qe,"auto",O,R]}],basis:[{basis:[ot,"full","auto",d,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[oe,ot,"auto","initial","none",R]}],grow:[{grow:["",oe,O,R]}],shrink:[{shrink:["",oe,O,R]}],order:[{order:[Qe,"first","last","none",O,R]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ge(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...ge()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":ge()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[d,"screen",...$()]}],"min-w":[{"min-w":[d,"screen","none",...$()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",r,bt,it]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,O,hs]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",us,R]}],"font-family":[{font:[bo,R,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,O,R]}],"line-clamp":[{"line-clamp":[oe,"none",O,hs]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",O,R]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",O,R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[oe,"from-font","auto",O,it]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[oe,"auto",O,R]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O,R]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O,R]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:ye()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qe,O,R],radial:["",O,R],conic:[Qe,O,R]},vo,go]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:j()}],"gradient-via-pos":[{via:j()}],"gradient-to-pos":[{to:j()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:L()}],"rounded-s":[{"rounded-s":L()}],"rounded-e":[{"rounded-e":L()}],"rounded-t":[{"rounded-t":L()}],"rounded-r":[{"rounded-r":L()}],"rounded-b":[{"rounded-b":L()}],"rounded-l":[{"rounded-l":L()}],"rounded-ss":[{"rounded-ss":L()}],"rounded-se":[{"rounded-se":L()}],"rounded-ee":[{"rounded-ee":L()}],"rounded-es":[{"rounded-es":L()}],"rounded-tl":[{"rounded-tl":L()}],"rounded-tr":[{"rounded-tr":L()}],"rounded-br":[{"rounded-br":L()}],"rounded-bl":[{"rounded-bl":L()}],"border-w":[{border:F()}],"border-w-x":[{"border-x":F()}],"border-w-y":[{"border-y":F()}],"border-w-s":[{"border-s":F()}],"border-w-e":[{"border-e":F()}],"border-w-t":[{"border-t":F()}],"border-w-r":[{"border-r":F()}],"border-w-b":[{"border-b":F()}],"border-w-l":[{"border-l":F()}],"divide-x":[{"divide-x":F()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":F()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ue(),"hidden","none"]}],"divide-style":[{divide:[...ue(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[oe,O,R]}],"outline-w":[{outline:["",oe,bt,it]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",u,$t,Mt]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",p,$t,Mt]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[oe,it]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":F()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",f,$t,Mt]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[oe,O,R]}],"mix-blend":[{"mix-blend":[...g(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":g()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[oe]}],"mask-image-linear-from-pos":[{"mask-linear-from":S()}],"mask-image-linear-to-pos":[{"mask-linear-to":S()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":S()}],"mask-image-t-to-pos":[{"mask-t-to":S()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":S()}],"mask-image-r-to-pos":[{"mask-r-to":S()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":S()}],"mask-image-b-to-pos":[{"mask-b-to":S()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":S()}],"mask-image-l-to-pos":[{"mask-l-to":S()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":S()}],"mask-image-x-to-pos":[{"mask-x-to":S()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":S()}],"mask-image-y-to-pos":[{"mask-y-to":S()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[O,R]}],"mask-image-radial-from-pos":[{"mask-radial-from":S()}],"mask-image-radial-to-pos":[{"mask-radial-to":S()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":xe()}],"mask-image-conic-pos":[{"mask-conic":[oe]}],"mask-image-conic-from-pos":[{"mask-conic-from":S()}],"mask-image-conic-to-pos":[{"mask-conic-to":S()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:ye()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",O,R]}],filter:[{filter:["","none",O,R]}],blur:[{blur:k()}],brightness:[{brightness:[oe,O,R]}],contrast:[{contrast:[oe,O,R]}],"drop-shadow":[{"drop-shadow":["","none",v,$t,Mt]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",oe,O,R]}],"hue-rotate":[{"hue-rotate":[oe,O,R]}],invert:[{invert:["",oe,O,R]}],saturate:[{saturate:[oe,O,R]}],sepia:[{sepia:["",oe,O,R]}],"backdrop-filter":[{"backdrop-filter":["","none",O,R]}],"backdrop-blur":[{"backdrop-blur":k()}],"backdrop-brightness":[{"backdrop-brightness":[oe,O,R]}],"backdrop-contrast":[{"backdrop-contrast":[oe,O,R]}],"backdrop-grayscale":[{"backdrop-grayscale":["",oe,O,R]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[oe,O,R]}],"backdrop-invert":[{"backdrop-invert":["",oe,O,R]}],"backdrop-opacity":[{"backdrop-opacity":[oe,O,R]}],"backdrop-saturate":[{"backdrop-saturate":[oe,O,R]}],"backdrop-sepia":[{"backdrop-sepia":["",oe,O,R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",O,R]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[oe,"initial",O,R]}],ease:[{ease:["linear","initial",b,O,R]}],delay:[{delay:[oe,O,R]}],animate:[{animate:["none",I,O,R]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,O,R]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:A()}],"rotate-x":[{"rotate-x":A()}],"rotate-y":[{"rotate-y":A()}],"rotate-z":[{"rotate-z":A()}],scale:[{scale:te()}],"scale-x":[{"scale-x":te()}],"scale-y":[{"scale-y":te()}],"scale-z":[{"scale-z":te()}],"scale-3d":["scale-3d"],skew:[{skew:ve()}],"skew-x":[{"skew-x":ve()}],"skew-y":[{"skew-y":ve()}],transform:[{transform:[O,R,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:we()}],"translate-x":[{"translate-x":we()}],"translate-y":[{"translate-y":we()}],"translate-z":[{"translate-z":we()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O,R]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O,R]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[oe,bt,it,hs]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ko=so(jo);function me(...s){return ko(gr(s))}const So=Ar("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-4 py-2 has-[>svg]:px-3",sm:"h-10 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-11 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function E({className:s,variant:t,size:r,asChild:a=!1,...n}){const i=a?_r:"button";return e.jsx(i,{"data-slot":"button",className:me(So({variant:t,size:r,className:s})),...n})}const ss={name:"NovaPip",tagline:"Trade Forex Globally, Anytime"};function Co({onSignIn:s,onSignUp:t}){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-700 via-blue-800 to-blue-900 flex flex-col items-center justify-between p-6 text-white",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-6 animate-fade-in",children:e.jsx(st,{className:"w-10 h-10 text-white",strokeWidth:2.5})}),e.jsx("h1",{className:"text-center mb-3 animate-fade-in",style:{animationDelay:"100ms"},children:ss.name}),e.jsx("p",{className:"text-center text-blue-100 text-lg mb-12 animate-fade-in",style:{animationDelay:"200ms"},children:ss.tagline}),e.jsxs("div",{className:"w-full space-y-3 animate-fade-in",style:{animationDelay:"300ms"},children:[e.jsx(E,{onClick:t,className:"w-full h-12 bg-white text-blue-700 hover:bg-blue-50 rounded-full",children:"Create Account"}),e.jsx(E,{onClick:s,variant:"outline",className:"w-full h-12 bg-transparent border-2 border-white text-white hover:bg-white/10 rounded-full",children:"Sign In"})]})]}),e.jsx("p",{className:"text-blue-200 text-xs text-center max-w-sm animate-fade-in",style:{animationDelay:"400ms"},children:"Trading forex involves risk. Only trade with money you can afford to lose. CFDs are complex instruments and come with a high risk of losing money."})]})}function fe({className:s,type:t,...r}){return e.jsx("input",{type:t,"data-slot":"input",className:me("file:text-foreground placeholder:text-gray-600 selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-11 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background text-gray-900 transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}var is="Checkbox",[Po]=Ra(is),[_o,Ds]=Po(is);function Ao(s){const{__scopeCheckbox:t,checked:r,children:a,defaultChecked:n,disabled:i,form:l,name:d,onCheckedChange:c,required:h,value:u="on",internal_do_not_use_render:p}=s,[f,v]=Ba({prop:r,defaultProp:n??!1,onChange:c,caller:is}),[w,y]=o.useState(null),[P,b]=o.useState(null),I=o.useRef(!1),re=w?!!l||!!w.closest("form"):!0,xe={checked:f,disabled:i,setChecked:v,control:w,setControl:y,name:d,form:l,value:u,hasConsumerStoppedPropagationRef:I,required:h,defaultChecked:rt(n)?!1:n,isFormControl:re,bubbleInput:P,setBubbleInput:b};return e.jsx(_o,{scope:t,...xe,children:To(p)?p(xe):a})}var Fr="CheckboxTrigger",qr=o.forwardRef(({__scopeCheckbox:s,onKeyDown:t,onClick:r,...a},n)=>{const{control:i,value:l,disabled:d,checked:c,required:h,setControl:u,setChecked:p,hasConsumerStoppedPropagationRef:f,isFormControl:v,bubbleInput:w}=Ds(Fr,s),y=xr(n,u),P=o.useRef(c);return o.useEffect(()=>{const b=i?.form;if(b){const I=()=>p(P.current);return b.addEventListener("reset",I),()=>b.removeEventListener("reset",I)}},[i,p]),e.jsx(Es.button,{type:"button",role:"checkbox","aria-checked":rt(c)?"mixed":c,"aria-required":h,"data-state":Kr(c),"data-disabled":d?"":void 0,disabled:d,value:l,...a,ref:y,onKeyDown:Fs(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Fs(r,b=>{p(I=>rt(I)?!0:!I),w&&v&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})})});qr.displayName=Fr;var Vr=o.forwardRef((s,t)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:l,disabled:d,value:c,onCheckedChange:h,form:u,...p}=s;return e.jsx(Ao,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:d,required:l,onCheckedChange:h,name:a,form:u,value:c,internal_do_not_use_render:({isFormControl:f})=>e.jsxs(e.Fragment,{children:[e.jsx(qr,{...p,ref:t,__scopeCheckbox:r}),f&&e.jsx(Yr,{__scopeCheckbox:r})]})})});Vr.displayName=is;var Wr="CheckboxIndicator",Hr=o.forwardRef((s,t)=>{const{__scopeCheckbox:r,forceMount:a,...n}=s,i=Ds(Wr,r);return e.jsx(Oa,{present:a||rt(i.checked)||i.checked===!0,children:e.jsx(Es.span,{"data-state":Kr(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...s.style}})})});Hr.displayName=Wr;var Gr="CheckboxBubbleInput",Yr=o.forwardRef(({__scopeCheckbox:s,...t},r)=>{const{control:a,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:l,required:d,disabled:c,name:h,value:u,form:p,bubbleInput:f,setBubbleInput:v}=Ds(Gr,s),w=xr(r,v),y=Ma(i),P=$a(a);o.useEffect(()=>{const I=f;if(!I)return;const re=window.HTMLInputElement.prototype,J=Object.getOwnPropertyDescriptor(re,"checked").set,ne=!n.current;if(y!==i&&J){const D=new Event("click",{bubbles:ne});I.indeterminate=rt(i),J.call(I,rt(i)?!1:i),I.dispatchEvent(D)}},[f,y,i,n]);const b=o.useRef(rt(i)?!1:i);return e.jsx(Es.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,required:d,disabled:c,name:h,value:u,form:p,...t,tabIndex:-1,ref:w,style:{...t.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Yr.displayName=Gr;function To(s){return typeof s=="function"}function rt(s){return s==="indeterminate"}function Kr(s){return rt(s)?"indeterminate":s?"checked":"unchecked"}function Jr({className:s,...t}){return e.jsx(Vr,{"data-slot":"checkbox",className:me("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(Hr,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(De,{className:"size-3.5"})})})}const Ce={access:"fx.accessToken",refresh:"fx.refreshToken",session:"fx.sessionId",expires:"fx.expiresAt"};function os(s,t){[window.localStorage,window.sessionStorage].forEach(n=>{n.removeItem(Ce.access),n.removeItem(Ce.refresh),n.removeItem(Ce.session),n.removeItem(Ce.expires)});const r=t?window.localStorage:window.sessionStorage;r.setItem(Ce.access,s.tokens.accessToken),r.setItem(Ce.refresh,s.tokens.refreshToken),r.setItem(Ce.session,s.sessionId);const a=s.tokens.expiresIn;if(a){const n=Io(a),i=Date.now()+n;r.setItem(Ce.expires,String(i))}}function Gt(){[window.localStorage,window.sessionStorage].forEach(s=>{s.removeItem(Ce.access),s.removeItem(Ce.refresh),s.removeItem(Ce.session),s.removeItem(Ce.expires)})}function $e(){return window.localStorage.getItem(Ce.access)||window.sessionStorage.getItem(Ce.access)||null}function Xr(){return window.localStorage.getItem(Ce.refresh)||window.sessionStorage.getItem(Ce.refresh)||null}function Qr(){return window.localStorage.getItem(Ce.session)||window.sessionStorage.getItem(Ce.session)||null}function Eo(){const s=window.localStorage.getItem(Ce.expires)||window.sessionStorage.getItem(Ce.expires);return s?Number(s):null}function Io(s){const t=String(s).trim(),r=Number(t);if(!Number.isNaN(r))return r*1e3;const a=/^(\d+)([smhd])$/i,n=t.match(a);if(!n)return 36e5;const i=Number(n[1]),l=n[2].toLowerCase();return l==="s"?i*1e3:l==="m"?i*60*1e3:l==="h"?i*60*60*1e3:l==="d"?i*24*60*60*1e3:36e5}const ht="mfapp.selectedAccountId",Zr=o.createContext(null);function Do({children:s}){const[t,r]=o.useState(null),[a,n]=o.useState([]);o.useEffect(()=>{try{const l=localStorage.getItem(ht);l&&r(l)}catch{}},[]),o.useEffect(()=>{try{t?localStorage.setItem(ht,t):localStorage.removeItem(ht)}catch{}},[t]),o.useEffect(()=>{if(!a||a.length===0)return;if(!(t?a.some(d=>String(d._id)===String(t)):!1))if(a.length===1){const d=a[0];d&&d._id&&r(String(d._id))}else r(null)},[a,t]);const i=o.useMemo(()=>({selectedAccountId:t,setSelectedAccountId:r,accounts:a,setAccounts:n}),[t,a]);return e.jsx(Zr.Provider,{value:i,children:s})}function ea(){const s=o.useContext(Zr);return s||{selectedAccountId:ta(),setSelectedAccountId:a=>{try{a?localStorage.setItem(ht,a):localStorage.removeItem(ht)}catch{}},accounts:[],setAccounts:()=>{}}}function ta(){try{return localStorage.getItem(ht)}catch{return null}}const Lo="http://localhost:5022";function js(s){const t=s.startsWith("/")?s:`/${s}`;return`${Lo}${t}`}async function ee(s,t={}){const{method:r="GET",headers:a={},body:n,signal:i}=t,l=$e(),d={accept:"application/json",...l?{Authorization:`Bearer ${l}`}:{},...a};let c;n!==void 0&&(typeof FormData<"u"&&n instanceof FormData?c=n:(d["Content-Type"]=d["Content-Type"]||"application/json",c=typeof n=="string"?n:JSON.stringify(n)));const h=await fetch(js(s),{method:r,headers:d,body:c,signal:i,credentials:"omit"}),p=h.headers.get("content-type")?.includes("application/json")?await h.json().catch(()=>({})):void 0;if(!h.ok){if(h.status===401){const w=$e(),y=Xr();if(w&&y)try{const P=await ra({accessToken:w,refreshToken:y}),b=Qr()||"",I=typeof window<"u"?window.localStorage.getItem("fx.accessToken"):null,re=!!I&&I===w;os({tokens:{accessToken:P.accessToken,refreshToken:P.refreshToken,expiresIn:P.expiresIn},sessionId:b},re);const xe={...a,Authorization:`Bearer ${P.accessToken}`};c&&(xe["Content-Type"]=d["Content-Type"]||"application/json");const J=await fetch(js(s),{method:r,headers:xe,body:c,signal:i,credentials:"omit"}),D=J.headers.get("content-type")?.includes("application/json")?await J.json().catch(()=>({})):void 0;if(!J.ok){let C=`HTTP ${J.status}`;if(D){if(typeof D.message=="string")C=D.message;else if(D.error){const ie=D.error;typeof ie=="string"?C=ie:typeof ie?.message=="string"&&(C=ie.message)}}const _=new Error(C);throw _.status=J.status,_.data=D,_}return D}catch{Gt()}}let f=`HTTP ${h.status}`;if(p){if(typeof p.message=="string")f=p.message;else if(p.error){const w=p.error;typeof w=="string"?f=w:typeof w?.message=="string"&&(f=w.message)}}const v=new Error(f);throw v.status=h.status,v.data=p,v}return p}async function sa(s,t={},r=2,a=300){let n=null;const i=new AbortController,l={...t,signal:t.signal||i.signal};for(let d=0;d<Math.max(1,r);d++)try{return await ee(s,l)}catch(c){if(n=c,d<r-1){await new Promise(h=>setTimeout(h,a*Math.pow(2,d)));continue}throw n}throw n}function Je(s,t=!0){const r=ta();if(!r&&t){const a=new Error("Select an account to perform this action");throw a.code="ACCOUNT_NOT_SELECTED",a}return{...s,...r?{accountId:r}:{}}}async function Ro(s,t,r={}){const a=$e(),n={accept:"application/json",...a?{Authorization:`Bearer ${a}`}:{},...r},i=await fetch(js(s),{method:"POST",headers:n,body:t,credentials:"omit"}),d=i.headers.get("content-type")?.includes("application/json")?await i.json().catch(()=>({})):void 0;if(!i.ok){let c=`HTTP ${i.status}`;if(d){if(typeof d.message=="string")c=d.message;else if(d.error){const u=d.error;typeof u=="string"?c=u:typeof u?.message=="string"&&(c=u.message)}}const h=new Error(c);throw h.status=i.status,h.data=d,h}return d}function Ls(s){const t=s?.metadata?._doc||{},r=s.id||t._id||"",a=s.email||t.email||"";return{id:r,email:a,firstName:t.firstName,lastName:t.lastName,role:s.role,status:s.status}}async function Oo(s){const t=await ee("/api/v1/auth/login",{method:"POST",body:s});return{user:Ls(t.data.user),tokens:t.data.tokens,sessionId:t.data.sessionId,message:t.message}}async function Bo(s){const t=await ee("/api/v1/auth/register",{method:"POST",body:s});return{user:Ls(t.data.user),tokens:t.data.tokens,sessionId:t.data.sessionId||"",message:t.message,userId:t.data.userId,requiresEmailVerification:t.data.requiresEmailVerification}}async function Mo(s){const t=await ee("/api/v1/auth/verify-otp",{method:"POST",body:s});return{user:Ls(t.data.user),tokens:t.data.tokens,sessionId:t.data.sessionId,message:t.message}}async function $o(s){return await ee("/api/v1/auth/resend-otp",{method:"POST",body:s})}async function ra(s){const t=await ee("/api/v1/auth/refresh",{method:"POST",headers:{Authorization:`Bearer ${s.accessToken}`},body:{refreshToken:s.refreshToken}});return{accessToken:t.data.accessToken,refreshToken:t.data.refreshToken,expiresIn:t.data.expiresIn}}async function zo(s){return(await ee("/api/v1/auth/enable-2fa",{method:"POST",headers:{Authorization:`Bearer ${s.token}`},body:{token:s.token,password:s.password}})).data}async function Uo(s){return(await ee("/api/v1/auth/disable-2fa",{method:"POST",headers:{Authorization:`Bearer ${s.token}`},body:{token:s.token,password:s.password}})).data}async function Fo(s){return(await ee("/api/v1/auth/change-password",{method:"POST",headers:{Authorization:`Bearer ${s.accessToken}`},body:{currentPassword:s.currentPassword,newPassword:s.newPassword,confirmPassword:s.confirmPassword||s.newPassword}})).data}function qo({onBack:s,onLogin:t,onSignUp:r,onForgotPassword:a,onError:n}){const[i,l]=o.useState(""),[d,c]=o.useState(""),[h,u]=o.useState(!1),[p,f]=o.useState(!1),[v,w]=o.useState(!1),y=async P=>{P.preventDefault(),w(!0);try{const b=await Oo({email:i,password:d,rememberMe:p});os({tokens:b.tokens,sessionId:b.sessionId},p),t(b.user)}catch(b){const I=b?.message||"Login failed";n?.(I)}finally{w(!1)}};return e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsx("div",{className:"p-4",children:e.jsx("button",{onClick:s,className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ge,{className:"w-6 h-6 text-gray-700"})})}),e.jsxs("div",{className:"flex-1 px-6 pt-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Sign in to continue trading"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm text-gray-700 mb-2",children:"Email or Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(jr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(fe,{id:"email",type:"email",placeholder:"Enter your email or phone",value:i,onChange:P=>l(P.target.value),className:"pl-10 h-12 rounded-lg text-gray-700",inputMode:"email",autoComplete:"username",enterKeyHint:"go",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(fe,{id:"password",type:h?"text":"password",placeholder:"Enter your password",value:d,onChange:P=>c(P.target.value),className:"pl-10 pr-10 h-12 rounded-lg text-gray-700",autoComplete:"current-password",enterKeyHint:"done",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":h?"Hide password":"Show password",children:h?e.jsx(Yn,{className:"w-5 h-5"}):e.jsx(Jn,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jr,{id:"remember",checked:p,onCheckedChange:P=>f(P)}),e.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-700 cursor-pointer",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:a,className:"text-sm text-blue-700 hover:text-blue-800",children:"Forgot Password?"})]}),e.jsx(E,{type:"submit",className:"w-full h-12 bg-blue-700 hover:bg-blue-800 text-white rounded-lg mt-6",disabled:v,children:v?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Sign In"})]}),e.jsx("div",{className:"mt-8"})]}),e.jsx("div",{className:"p-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{onClick:r,className:"text-blue-700 hover:text-blue-800",children:"Create Account"})]})})]})}function St({...s}){return e.jsx(za,{"data-slot":"select",...s})}function Ct({...s}){return e.jsx(qa,{"data-slot":"select-value",...s})}function Pt({className:s,size:t="default",variant:r="default",children:a,...n}){const i=r==="ghost"?"flex w-full items-center justify-between gap-2 rounded-md px-0 py-0 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none bg-transparent border-0 focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4":"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4";return e.jsxs(Ua,{"data-slot":"select-trigger","data-size":t,className:me(i,s),...n,children:[a,e.jsx(Fa,{asChild:!0,children:e.jsx(vr,{className:"size-4 opacity-50"})})]})}function _t({className:s,children:t,position:r="popper",...a}){return e.jsx(Va,{children:e.jsxs(Wa,{"data-slot":"select-content",className:me("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(Vo,{}),e.jsx(Ha,{className:me("p-2",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(Wo,{})]})})}function Ie({className:s,children:t,...r}){return e.jsxs(Ga,{"data-slot":"select-item",className:me("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center justify-between gap-2 rounded-sm py-2 pr-3 pl-3 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[e.jsx("span",{className:"ml-3 flex size-4 items-center justify-center shrink-0",children:e.jsx(Ya,{children:e.jsx(De,{className:"size-4"})})}),e.jsx(Ka,{className:"flex-1",children:t})]})}function Vo({className:s,...t}){return e.jsx(Ja,{"data-slot":"select-scroll-up-button",className:me("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ln,{className:"size-4"})})}function Wo({className:s,...t}){return e.jsx(Xa,{"data-slot":"select-scroll-down-button",className:me("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(vr,{className:"size-4"})})}function aa({...s}){return e.jsx(sn,{"data-slot":"dialog",...s})}function Ho({...s}){return e.jsx(tn,{"data-slot":"dialog-portal",...s})}const na=o.forwardRef(({className:s,...t},r)=>e.jsx(Qa,{ref:r,"data-slot":"dialog-overlay",className:me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-40 bg-black/50",s),...t}));na.displayName="DialogOverlay";const Rs=o.forwardRef(({className:s,children:t,fullscreen:r,...a},n)=>e.jsxs(Ho,{"data-slot":"dialog-portal",children:[e.jsx(na,{}),e.jsx(Za,{ref:n,"data-slot":"dialog-content",className:me("bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed inset-0 z-[100] grid",r?"place-items-stretch":"place-items-center",s),...a,children:e.jsxs("div",{className:me(r?"w-full h-full rounded-none border-0 p-0 bg-white flex flex-col min-h-0":"w-full max-w-[calc(100%-2rem)] sm:max-w-lg translate-y-0 rounded-lg border p-6 shadow-lg bg-white flex flex-col min-h-0"),children:[t,!r&&e.jsxs(en,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none text-gray-900 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ke,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})})]}));Rs.displayName="DialogContent";function Go({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:me("flex flex-col gap-2 text-center sm:text-left",s),...t})}function Yo({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-footer",className:me("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function Ko({className:s,...t}){return e.jsx(rn,{"data-slot":"dialog-title",className:me("text-lg leading-none font-semibold",s),...t})}function Jo({className:s,...t}){return e.jsx(an,{"data-slot":"dialog-description",className:me("text-muted-foreground text-sm",s),...t})}function Xo({title:s,showNotifications:t=!0,onNotificationClick:r,showMenu:a=!1,onMenuClick:n,unreadCount:i=0,titleIcon:l,showBack:d=!1,onBackClick:c}){const{selectedAccountId:h,accounts:u,setSelectedAccountId:p}=ea(),f=u.find(b=>String(b._id)===String(h)),v=f?.accountNumber?String(f.accountNumber):h?String(h).slice(-6):null;f?.accountType&&String(f.accountType);const[w,y]=o.useState(!1);o.useEffect(()=>{!h&&u&&u.length>0&&y(!0)},[h,u]);const P=b=>{p(b),y(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sticky top-0 z-40",style:{backgroundColor:"#ef5c2a",paddingTop:"var(--safe-top)"},children:e.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d&&e.jsx("button",{onClick:c,className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors","aria-label":"Back",children:e.jsx(Ge,{className:"w-6 h-6 text-white",style:{color:"#fff"}})}),a&&e.jsx("button",{onClick:n,className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(li,{className:"w-6 h-6 text-white",style:{color:"#fff"}})}),s?e.jsxs("div",{className:"flex items-center gap-2",children:[l?e.jsx("span",{className:"text-white",children:l}):null,e.jsx("h1",{className:"text-white font-bold",style:{color:"#fff",fontWeight:700},children:s})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-8 h-8 rounded-lg"}),e.jsx("span",{className:"font-bold text-white",style:{color:"#fff",fontWeight:700},children:ss.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.length>0&&e.jsxs(St,{value:h||"",onValueChange:b=>p(b),children:[e.jsxs(Pt,{size:"sm",variant:"ghost",className:"text-white gap-2 px-0 py-0",children:[e.jsx("span",{className:"text-xs",children:"Acc"}),e.jsx(Ct,{placeholder:v||"Select account"})]}),e.jsx(_t,{className:"bg-white rounded-lg shadow-lg min-w-[12rem]",children:u.map(b=>e.jsxs(Ie,{value:b._id,className:"py-2.5 pl-3 pr-12 text-gray-900",children:[b.accountNumber,e.jsx("span",{className:`ml-2 px-1.5 py-0.5 rounded text-xs ${String(b.accountType).toLowerCase()==="live"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:String(b.accountType||"standard").toUpperCase()})]},b._id))})]}),t&&e.jsxs("button",{onClick:r,className:"relative p-2 hover:bg-white/10 rounded-lg transition-colors",children:[e.jsx(yr,{className:"w-6 h-6 text-white",style:{color:"#fff"}}),i>0&&e.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-600 text-white text-[10px] rounded-full flex items-center justify-center",children:i})]})]})]})}),e.jsx(aa,{open:w,onOpenChange:y,children:e.jsxs(Rs,{children:[e.jsxs(Go,{children:[e.jsx(Ko,{className:"text-gray-900",children:"Please select an account"}),e.jsx(Jo,{className:"text-gray-700",children:"Select an account to continue trading."})]}),e.jsx("div",{className:"space-y-2",children:u.map(b=>e.jsxs(E,{variant:"outline",className:"w-full justify-between",onClick:()=>P(b._id),children:[e.jsx("span",{children:b.accountNumber}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${String(b.accountType).toLowerCase()==="live"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:String(b.accountType||"standard").toUpperCase()})]},b._id))}),e.jsx(Yo,{children:e.jsx(E,{variant:"ghost",className:"text-gray-900",onClick:()=>y(!1),children:"Close"})})]})})]})}function Qo({activeTab:s,onTabChange:t}){const r=[{id:"dashboard",label:"Dashboard",icon:ei},{id:"markets",label:"Markets",icon:st},{id:"trading",label:"Trading",icon:kn},{id:"wallet",label:"Wallet",icon:Zt},{id:"settings",label:"Settings",icon:kr}];return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden max-w-md mx-auto",role:"navigation","aria-label":"Bottom navigation",style:{paddingBottom:"var(--safe-bottom)",height:"calc(64px + var(--safe-bottom))",willChange:"transform",transform:"translateZ(0)",WebkitTransform:"translateZ(0)",backfaceVisibility:"hidden"},children:e.jsx("div",{className:"flex justify-around items-center",style:{height:"64px"},children:r.map(a=>{const n=a.icon,i=s===a.id;return e.jsxs("button",{onClick:()=>t(a.id),className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${i?"text-blue-700":"text-gray-500"}`,"aria-label":a.label,"aria-current":i?"page":void 0,onKeyDown:l=>{const d=r.findIndex(c=>c.id===a.id);if(l.key==="ArrowRight"){const c=r[(d+1)%r.length];t(c.id),l.preventDefault()}else if(l.key==="ArrowLeft"){const c=r[(d-1+r.length)%r.length];t(c.id),l.preventDefault()}},children:[e.jsx(n,{className:`w-6 h-6 ${i?"stroke-[2.5]":"stroke-2"}`}),e.jsx("span",{className:"text-[11px] mt-1",children:a.label})]},a.id)})})})}const Zo={firstName:"John"};new Date(Date.now()-7200*1e3).toISOString(),new Date(Date.now()-300*60*1e3).toISOString(),new Date(Date.now()-1800*1e3).toISOString();new Date(Date.now()-1440*60*1e3).toISOString();new Date(Date.now()-2880*60*1e3).toISOString(),new Date(Date.now()-1440*60*1e3).toISOString(),new Date(Date.now()-4320*60*1e3).toISOString(),new Date(Date.now()-2880*60*1e3).toISOString(),new Date(Date.now()-5760*60*1e3).toISOString(),new Date(Date.now()-4320*60*1e3).toISOString();const lt=[{pair:"EUR/USD",name:"Euro / US Dollar",bidPrice:1.08452,askPrice:1.0846,spread:.8,change24h:.0048,changePercent24h:.44,high24h:1.08892,low24h:1.08123,volume:2456789,category:"forex",isFavorite:!0},{pair:"GBP/USD",name:"British Pound / US Dollar",bidPrice:1.26542,askPrice:1.26558,spread:1.6,change24h:-.0123,changePercent24h:-.96,high24h:1.27234,low24h:1.26234,volume:1876543,category:"forex",isFavorite:!0},{pair:"USD/JPY",name:"US Dollar / Japanese Yen",bidPrice:149.112,askPrice:149.134,spread:2.2,change24h:1.234,changePercent24h:.83,high24h:150.456,low24h:148.123,volume:3234567,category:"forex",isFavorite:!0},{pair:"USD/CHF",name:"US Dollar / Swiss Franc",bidPrice:.88234,askPrice:.88256,spread:2.2,change24h:.0034,changePercent24h:.39,high24h:.88567,low24h:.87923,volume:987654,category:"forex",isFavorite:!1},{pair:"AUD/USD",name:"Australian Dollar / US Dollar",bidPrice:.65432,askPrice:.65448,spread:1.6,change24h:-.0089,changePercent24h:-1.34,high24h:.66234,low24h:.65123,volume:1234567,category:"forex",isFavorite:!0},{pair:"USD/CAD",name:"US Dollar / Canadian Dollar",bidPrice:1.36234,askPrice:1.36256,spread:2.2,change24h:.0156,changePercent24h:1.16,high24h:1.36789,low24h:1.35678,volume:876543,category:"forex",isFavorite:!1},{pair:"NZD/USD",name:"New Zealand Dollar / US Dollar",bidPrice:.60123,askPrice:.60145,spread:2.2,change24h:.0045,changePercent24h:.75,high24h:.60567,low24h:.59876,volume:654321,category:"forex",isFavorite:!1},{pair:"XAU/USD",name:"Gold / US Dollar",bidPrice:2034.56,askPrice:2035.12,spread:.56,change24h:12.34,changePercent24h:.61,high24h:2045.67,low24h:2023.45,volume:456789,category:"commodities",isFavorite:!0},{pair:"XAG/USD",name:"Silver / US Dollar",bidPrice:24.567,askPrice:24.589,spread:.022,change24h:-.456,changePercent24h:-1.82,high24h:25.123,low24h:24.345,volume:234567,category:"commodities",isFavorite:!1},{pair:"BTC/USD",name:"Bitcoin / US Dollar",bidPrice:43567.89,askPrice:43589.12,spread:21.23,change24h:1234.56,changePercent24h:2.91,high24h:44234.56,low24h:42123.45,volume:987654321,category:"crypto",isFavorite:!1}];new Date(Date.now()-10080*60*1e3).toISOString(),new Date(Date.now()-4320*60*1e3).toISOString(),new Date(Date.now()-1440*60*1e3).toISOString(),new Date(Date.now()-14400*60*1e3).toISOString(),new Date(Date.now()-7200*1e3).toISOString();new Date(Date.now()-1440*60*1e3).toISOString(),new Date(Date.now()-7200*1e3).toISOString(),new Date(Date.now()-360*60*1e3).toISOString(),new Date(Date.now()-720*60*1e3).toISOString();function Pe(s,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}function Ye(s,t){const r=t.toUpperCase();let a=5;return r.includes("JPY")?a=3:(r.startsWith("BTC/")||r.endsWith("/BTC"))&&(a=2),s.toFixed(a)}function Os(s){const t=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function el(s){const t=new Date(s),a=new Date().getTime()-t.getTime(),n=Math.floor(a/6e4),i=Math.floor(n/60),l=Math.floor(i/24);return n<1?"Just now":n<60?`${n}m ago`:i<24?`${i}h ago`:l<7?`${l}d ago`:Os(s)}function ut(s){const t=s.toUpperCase();return t.includes("BTC")||t.includes("ETH")||t.includes("BNB")||t.includes("SOL")?1:t.includes("JPY")?.01:1e-4}function ia(s,t,r,a){const n=ut(s);return t.toLowerCase()==="buy"?(a-r)/n:(r-a)/n}function hd(s,t,r){const a=s.toUpperCase(),n=ut(s);return a.includes("BTC")||a.includes("ETH")||a.includes("BNB")||a.includes("SOL")?n*t:a.endsWith("/USD")?10*t:a.includes("JPY")?n*1e5*t/r:0}function ks(s,t,r,a,n){const i=s.toUpperCase(),l=t.toLowerCase()==="buy"?a-r:r-a;if(i.includes("BTC")||i.includes("ETH")||i.includes("BNB")||i.includes("SOL"))return l*n;const d=1e5;return i.endsWith("/USD")?l*d*n:i.includes("JPY")?l*d*n/a:0}function oa(s,t){return!t||t===0?null:s/t*100}function be(){const s=$e();return s?{Authorization:`Bearer ${s}`}:{}}function B(s){return s==null?0:typeof s=="number"?s:typeof s=="string"?Number(s):typeof s=="object"&&"$numberDecimal"in s?Number(s.$numberDecimal):Number(s)}let zt=null,yt=null;async function Dt(){const s=Date.now();return zt&&s-zt.ts<1e4?zt.value:yt||(yt=(async()=>{const t=await ee("/api/v1/auth/me",{method:"GET",headers:be()});return zt={value:t.data.user,ts:Date.now()},yt=null,t.data.user})(),yt)}async function tl(s={}){const t=new URLSearchParams;return s.page&&t.set("page",String(s.page)),s.limit&&t.set("limit",String(s.limit)),typeof s.unreadOnly=="boolean"&&t.set("unreadOnly",s.unreadOnly?"true":"false"),(await ee(`/api/v1/users/notifications?${t.toString()}`,{method:"GET",headers:be()})).data.notifications}async function la(s="active"){return(await ee(`/api/v1/accounts?status=${encodeURIComponent(s)}`,{method:"GET",headers:be()})).data.accounts.map(r=>({...r,balance:B(r.balance),equity:B(r.equity),margin:B(r.margin),freeMargin:B(r.freeMargin),marginLevel:B(r.marginLevel),statistics:r.statistics?{...r.statistics,totalProfitLoss:B(r.statistics.totalProfitLoss)}:void 0}))}async function sl(s="active"){const t=await ee(`/api/v1/accounts?status=${encodeURIComponent(s)}`,{method:"GET",headers:be()}),r=t.data.summary,a=t.data.accounts.map(n=>({...n,balance:B(n.balance),equity:B(n.equity),margin:B(n.margin),freeMargin:B(n.freeMargin),marginLevel:B(n.marginLevel),statistics:n.statistics?{...n.statistics,totalProfitLoss:B(n.statistics.totalProfitLoss)}:void 0}));return{summary:r,accounts:a}}async function rl(s){return(await ee("/api/v1/accounts",{method:"POST",headers:be(),body:s})).data}function ca(s){const t=[],r=[],a=ia(s.symbol,s.direction,s.openPrice,s.currentPrice),n=ks(s.symbol,s.direction,s.openPrice,s.currentPrice,s.volume),i=oa(n,s.margin),l=s.pips!==void 0&&s.pips!==null,d=l?Math.abs(a-s.pips):0,c=Math.max(1,Math.abs(a)*.02);l&&d>c&&t.push(`Pips calculation error: API shows ${s.pips}, should be ${a.toFixed(2)} (diff: ${d.toFixed(2)})`);const h=Math.abs(n-s.unrealizedPL),u=Math.max(.05,Math.abs(n)*.02);if(h>u&&t.push(`P&L calculation error: API shows $${s.unrealizedPL}, should be $${n.toFixed(2)} (diff: $${h.toFixed(2)})`),i!==null&&s.unrealizedPLPercent!==null){const p=Math.abs(i-s.unrealizedPLPercent),f=Math.max(.5,Math.abs(i)*.05);p>f&&t.push(`P&L% calculation error: API shows ${s.unrealizedPLPercent}%, should be ${i.toFixed(2)}% (diff: ${p.toFixed(2)}%)`)}return s.unrealizedPL>1e6&&r.push(`Unrealistic P&L: $${s.unrealizedPL.toLocaleString()} - Check position size and calculations`),s.margin>1e6&&r.push(`Unrealistic margin: $${s.margin.toLocaleString()} - Check leverage and position size`),Math.abs(s.pips)>1e5&&r.push(`Unrealistic pips: ${s.pips.toLocaleString()} - Check pip calculation for ${s.symbol}`),{isValid:t.length===0,errors:t,warnings:r,calculated:{pips:a,unrealizedPL:n,margin:s.margin,unrealizedPLPercent:i||0}}}function al(s){const t=ca({symbol:s.symbol,direction:s.direction,volume:s.volume,openPrice:s.openPrice,currentPrice:s.currentPrice,unrealizedPL:s.unrealizedPL||0,margin:s.margin||0,pips:s.pips||0,unrealizedPLPercent:s.unrealizedPLPercent||0});return t.isValid?s:(console.warn(` Fixing incorrect calculations for ${s.symbol}:`,t.errors),{...s,unrealizedPL:t.calculated.unrealizedPL,pips:t.calculated.pips,unrealizedPLPercent:t.calculated.unrealizedPLPercent,margin:s.margin||t.calculated.margin})}function da(s){return s.map(al)}async function nl(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??20),sortBy:s.sortBy??"createdAt",sortOrder:s.sortOrder??"desc"}),r=Je({},!1);r.accountId&&t.set("accountId",r.accountId);const n=(await ee(`/api/v1/positions?${t.toString()}`,{method:"GET",headers:be()})).data.positions.map(i=>{const l=i.account?i.account:i.accountId?{id:i.accountId._id,accountNumber:i.accountId.accountNumber,currency:i.accountId.currency}:void 0;return{id:i.id||i._id,positionId:i.positionId,symbol:i.symbol,direction:i.direction,volume:i.volume,account:l,openPrice:B(i.openPrice),currentPrice:B(i.currentPrice),closePrice:B(i.closePrice),profitLoss:B(i.profitLoss),unrealizedPL:B(i.unrealizedPL),commission:B(i.commission),swap:B(i.swap),margin:B(i.margin),pips:B(i.pips),unrealizedPLPercent:typeof i.unrealizedPLPercent=="string"?Number(i.unrealizedPLPercent):B(i.unrealizedPLPercent),openedAt:i.openedAt,status:i.status}});return da(n)}async function md(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??20),sortBy:s.sortBy??"closedAt",sortOrder:s.sortOrder??"desc"}),r=Je({},!1);return r.accountId&&t.set("accountId",r.accountId),(await ee(`/api/v1/positions/history?${t.toString()}`,{method:"GET",headers:be()})).data.positions.map(n=>{const i=n.account?n.account:n.accountId?{id:n.accountId._id,accountNumber:n.accountId.accountNumber,currency:n.accountId.currency}:void 0;return{id:n.id||n._id,symbol:n.symbol,direction:n.direction,volume:n.volume,account:i,openPrice:B(n.openPrice),currentPrice:B(n.currentPrice),closePrice:B(n.closePrice),profitLoss:B(n.profitLoss),unrealizedPL:B(n.unrealizedPL),commission:B(n.commission),swap:B(n.swap),margin:B(n.margin),pips:B(n.pips),unrealizedPLPercent:typeof n.unrealizedPLPercent=="string"?Number(n.unrealizedPLPercent):B(n.unrealizedPLPercent),openedAt:n.openedAt,closedAt:n.closedAt,status:n.status}})}async function pd(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??20),sortBy:s.sortBy??"createdAt",sortOrder:s.sortOrder??"desc",...s.symbol?{symbol:s.symbol}:{}}),r=Je({},!1);r.accountId&&t.set("accountId",r.accountId);const a=await ee(`/api/v1/positions?${t.toString()}`,{method:"GET",headers:be()}),n=(a.data?.positions||[]).map(l=>{const d=l.account?l.account:l.accountId?{id:l.accountId._id,accountNumber:l.accountId.accountNumber,currency:l.accountId.currency}:void 0;return{id:l.id||l._id,positionId:l.positionId,symbol:l.symbol,direction:l.direction,volume:l.volume,account:d,openPrice:B(l.openPrice),currentPrice:B(l.currentPrice),closePrice:B(l.closePrice),unrealizedPL:B(l.unrealizedPL),commission:B(l.commission),swap:B(l.swap),margin:B(l.margin),pips:B(l.pips),unrealizedPLPercent:typeof l.unrealizedPLPercent=="string"?Number(l.unrealizedPLPercent):B(l.unrealizedPLPercent),stopLoss:B(l.stopLoss),takeProfit:B(l.takeProfit),trailingStop:B(l.trailingStop),openedAt:l.openedAt,status:l.status}});return{items:da(n),pagination:a.data?.pagination,summary:a.data?.summary}}async function Ut(s){const r=(await ee(`/api/v1/positions/${s}`,{method:"GET",headers:be()}))?.data?.position||{},a=n=>B(n);return{id:String(r.id||r._id||s),account:{id:String(r.account?.id||r.accountId?._id||""),accountNumber:String(r.account?.accountNumber||r.accountId?.accountNumber||""),currency:String(r.account?.currency||r.accountId?.currency||"USD")},symbol:String(r.symbol||""),direction:String(r.direction||""),volume:a(r.volume),openPrice:a(r.openPrice),currentPrice:a(r.currentPrice),pips:a(r.pips),unrealizedPL:a(r.unrealizedPL),margin:a(r.margin),status:String(r.status||""),openedAt:String(r.openedAt||""),updatedAt:String(r.updatedAt||""),orders:Array.isArray(r.orders)?r.orders.map(n=>({type:String(n.type||""),side:String(n.side||""),price:a(n.price),status:String(n.status||""),createdAt:String(n.createdAt||"")})):[],costs:(()=>{const n=a(r.costs?.commission??r.commission)||0,i=a(r.costs?.swap??r.swap)||0,l=a(r.costs?.spread??r.spread)||0,d=a(r.costs?.total??r.totalCosts),c=typeof d=="number"&&!isNaN(d)?d:n+i+l;return{commission:n,swap:i,spread:l,total:c}})(),stopLoss:a(r.stopLoss),takeProfit:a(r.takeProfit??r.tp),trailingStop:a(r.trailingStop??r.ts)}}async function il(s,t){const r=Je({volume:t.volume,price:t.price??0,reason:t.reason??"manual"},!0);return ee(`/api/v1/positions/${s}/close`,{method:"POST",headers:{...be(),"Content-Type":"application/json"},body:r})}async function ol(s,t){const r={};typeof t.stopLoss=="number"&&(r.stopLoss=t.stopLoss),typeof t.takeProfit=="number"&&(r.takeProfit=t.takeProfit),typeof t.trailingStop=="number"&&(r.trailingStop=t.trailingStop);const a=Je(r,!0);return ee(`/api/v1/positions/${s}/modify`,{method:"PUT",headers:{...be(),"Content-Type":"application/json"},body:a})}async function ll(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??50),status:"pending",sortBy:"createdAt",sortOrder:"desc"}),r=Je({},!1);r.accountId&&t.set("accountId",r.accountId);const a=await ee(`/api/v1/orders?${t.toString()}`,{method:"GET",headers:be()});return a.meta?.total??(Array.isArray(a.data)?a.data.length:0)}async function fd(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??50),status:"pending",sortBy:"createdAt",sortOrder:"desc"}),r=Je({},!1);r.accountId&&t.set("accountId",r.accountId);const a=await ee(`/api/v1/orders?${t.toString()}`,{method:"GET",headers:be()});return{items:a.data||[],meta:a.meta}}async function xd(s){const t=Je(s,!0);return await ee("/api/v1/orders",{method:"POST",headers:be(),body:t})}async function gd(s){const t=Je({},!0);return ee(`/api/v1/orders/${s}/cancel`,{method:"POST",headers:be(),body:t})}async function cl(){const s=await ee("/api/v1/market/watchlist",{method:"GET",headers:be()});return(Array.isArray(s?.data)?s.data:[]).map(r=>({symbol:r.symbol,price:B(r.price),changePercent:B(r.changePercent),alerts:r.alerts,addedAt:r.addedAt}))}async function bd(s,t){const r=s.toUpperCase();return(await ee("/api/v1/market/watchlist",{method:"POST",headers:be(),body:{symbol:r,alerts:{priceAbove:0,priceBelow:0}}})).data}async function yd(s){const t=encodeURIComponent(s.toUpperCase());return(await ee(`/api/v1/market/watchlist/${t}`,{method:"DELETE",headers:be()})).data}const We=Object.create(null);We.open="0";We.close="1";We.ping="2";We.pong="3";We.message="4";We.upgrade="5";We.noop="6";const Yt=Object.create(null);Object.keys(We).forEach(s=>{Yt[We[s]]=s});const Ss={type:"error",data:"parser error"},ua=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ha=typeof ArrayBuffer=="function",ma=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Bs=({type:s,data:t},r,a)=>ua&&t instanceof Blob?r?a(t):rr(t,a):ha&&(t instanceof ArrayBuffer||ma(t))?r?a(t):rr(new Blob([t]),a):a(We[s]+(t||"")),rr=(s,t)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];t("b"+(a||""))},r.readAsDataURL(s)};function ar(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let ms;function dl(s,t){if(ua&&s.data instanceof Blob)return s.data.arrayBuffer().then(ar).then(t);if(ha&&(s.data instanceof ArrayBuffer||ma(s.data)))return t(ar(s.data));Bs(s,!1,r=>{ms||(ms=new TextEncoder),t(ms.encode(r))})}const nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<nr.length;s++)kt[nr.charCodeAt(s)]=s;const ul=s=>{let t=s.length*.75,r=s.length,a,n=0,i,l,d,c;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const h=new ArrayBuffer(t),u=new Uint8Array(h);for(a=0;a<r;a+=4)i=kt[s.charCodeAt(a)],l=kt[s.charCodeAt(a+1)],d=kt[s.charCodeAt(a+2)],c=kt[s.charCodeAt(a+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|d>>2,u[n++]=(d&3)<<6|c&63;return h},hl=typeof ArrayBuffer=="function",Ms=(s,t)=>{if(typeof s!="string")return{type:"message",data:pa(s,t)};const r=s.charAt(0);return r==="b"?{type:"message",data:ml(s.substring(1),t)}:Yt[r]?s.length>1?{type:Yt[r],data:s.substring(1)}:{type:Yt[r]}:Ss},ml=(s,t)=>{if(hl){const r=ul(s);return pa(r,t)}else return{base64:!0,data:s}},pa=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},fa="",pl=(s,t)=>{const r=s.length,a=new Array(r);let n=0;s.forEach((i,l)=>{Bs(i,!1,d=>{a[l]=d,++n===r&&t(a.join(fa))})})},fl=(s,t)=>{const r=s.split(fa),a=[];for(let n=0;n<r.length;n++){const i=Ms(r[n],t);if(a.push(i),i.type==="error")break}return a};function xl(){return new TransformStream({transform(s,t){dl(s,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}s.data&&typeof s.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let ps;function Ft(s){return s.reduce((t,r)=>t+r.length,0)}function qt(s,t){if(s[0].length===t)return s.shift();const r=new Uint8Array(t);let a=0;for(let n=0;n<t;n++)r[n]=s[0][a++],a===s[0].length&&(s.shift(),a=0);return s.length&&a<s[0].length&&(s[0]=s[0].slice(a)),r}function gl(s,t){ps||(ps=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,d){for(r.push(l);;){if(a===0){if(Ft(r)<1)break;const c=qt(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(Ft(r)<2)break;const c=qt(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(Ft(r)<8)break;const c=qt(r,8),h=new DataView(c.buffer,c.byteOffset,c.length),u=h.getUint32(0);if(u>Math.pow(2,21)-1){d.enqueue(Ss);break}n=u*Math.pow(2,32)+h.getUint32(4),a=3}else{if(Ft(r)<n)break;const c=qt(r,n);d.enqueue(Ms(i?c:ps.decode(c),t)),a=0}if(n===0||n>s){d.enqueue(Ss);break}}}})}const xa=4;function _e(s){if(s)return bl(s)}function bl(s){for(var t in _e.prototype)s[t]=_e.prototype[t];return s}_e.prototype.on=_e.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};_e.prototype.once=function(s,t){function r(){this.off(s,r),t.apply(this,arguments)}return r.fn=t,this.on(s,r),this};_e.prototype.off=_e.prototype.removeListener=_e.prototype.removeAllListeners=_e.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+s];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===t||a.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+s],this};_e.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+s],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,t)}return this};_e.prototype.emitReserved=_e.prototype.emit;_e.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};_e.prototype.hasListeners=function(s){return!!this.listeners(s).length};const ls=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Me=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),yl="arraybuffer";function ga(s,...t){return t.reduce((r,a)=>(s.hasOwnProperty(a)&&(r[a]=s[a]),r),{})}const vl=Me.setTimeout,wl=Me.clearTimeout;function cs(s,t){t.useNativeTimers?(s.setTimeoutFn=vl.bind(Me),s.clearTimeoutFn=wl.bind(Me)):(s.setTimeoutFn=Me.setTimeout.bind(Me),s.clearTimeoutFn=Me.clearTimeout.bind(Me))}const Nl=1.33;function jl(s){return typeof s=="string"?kl(s):Math.ceil((s.byteLength||s.size)*Nl)}function kl(s){let t=0,r=0;for(let a=0,n=s.length;a<n;a++)t=s.charCodeAt(a),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(a++,r+=4);return r}function ba(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Sl(s){let t="";for(let r in s)s.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(s[r]));return t}function Cl(s){let t={},r=s.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class Pl extends Error{constructor(t,r,a){super(t),this.description=r,this.context=a,this.type="TransportError"}}class $s extends _e{constructor(t){super(),this.writable=!1,cs(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,a){return super.emitReserved("error",new Pl(t,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ms(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Sl(t);return r.length?"?"+r:""}}class _l extends $s{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};fl(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,pl(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=ba()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let ya=!1;try{ya=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Al=ya;function Tl(){}class El extends _l{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,r){const a=this.request({method:"POST",data:t});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=t}}class Ve extends _e{constructor(t,r,a){super(),this.createRequest=t,cs(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const r=ga(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Ve.requestsCount++,Ve.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Tl,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ve.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ve.requestsCount=0;Ve.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ir);else if(typeof addEventListener=="function"){const s="onpagehide"in Me?"pagehide":"unload";addEventListener(s,ir,!1)}}function ir(){for(let s in Ve.requests)Ve.requests.hasOwnProperty(s)&&Ve.requests[s].abort()}const Il=(function(){const s=va({xdomain:!1});return s&&s.responseType!==null})();class Dl extends El{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=Il&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ve(va,this.uri(),t)}}function va(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Al))return new XMLHttpRequest}catch{}if(!t)try{return new Me[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const wa=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ll extends $s{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,a=wa?{}:ga(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],n=r===t.length-1;Bs(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&ls(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=ba()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const fs=Me.WebSocket||Me.MozWebSocket;class Rl extends Ll{createSocket(t,r,a){return wa?new fs(t,r,a):r?new fs(t,r):new fs(t)}doWrite(t,r){this.ws.send(r)}}class Ol extends $s{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=gl(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(r).getReader(),n=xl();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:d,value:c})=>{d||(this.onPacket(c),i())}).catch(d=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],n=r===t.length-1;this._writer.write(a).then(()=>{n&&ls(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Bl={websocket:Rl,webtransport:Ol,polling:Dl},Ml=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Cs(s){if(s.length>8e3)throw"URI too long";const t=s,r=s.indexOf("["),a=s.indexOf("]");r!=-1&&a!=-1&&(s=s.substring(0,r)+s.substring(r,a).replace(/:/g,";")+s.substring(a,s.length));let n=Ml.exec(s||""),i={},l=14;for(;l--;)i[$l[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=zl(i,i.path),i.queryKey=Ul(i,i.query),i}function zl(s,t){const r=/\/{2,9}/g,a=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function Ul(s,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Ps=typeof addEventListener=="function"&&typeof removeEventListener=="function",Kt=[];Ps&&addEventListener("offline",()=>{Kt.forEach(s=>s())},!1);class at extends _e{constructor(t,r){if(super(),this.binaryType=yl,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const a=Cs(t);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Cs(r.host).host);cs(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Cl(this.opts.query)),Ps&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Kt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=xa,r.transport=t,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&at.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",at.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=jl(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ls(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,a){return this._sendPacket("message",t,r,a),this}send(t,r,a){return this._sendPacket("message",t,r,a),this}_sendPacket(t,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:t,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if(at.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ps&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Kt.indexOf(this._offlineEventListener);a!==-1&&Kt.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}at.protocol=xa;class Fl extends at{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),a=!1;at.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!a)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;at.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function i(){a||(a=!0,u(),r.close(),r=null)}const l=p=>{const f=new Error("probe error: "+p);f.transport=r.name,i(),this.emitReserved("upgradeError",f)};function d(){l("transport closed")}function c(){l("socket closed")}function h(p){r&&p.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",d),this.off("close",c),this.off("upgrading",h)};r.once("open",n),r.once("error",l),r.once("close",d),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&r.push(t[a]);return r}}let ql=class extends Fl{constructor(t,r={}){const a=typeof t=="object"?t:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>Bl[n]).filter(n=>!!n)),super(t,a)}};function Vl(s,t="",r){let a=s;r=r||typeof location<"u"&&location,s==null&&(s=r.protocol+"//"+r.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=r.protocol+s:s=r.host+s),/^(https?|wss?):\/\//.test(s)||(typeof r<"u"?s=r.protocol+"//"+s:s="https://"+s),a=Cs(s)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+t,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const Wl=typeof ArrayBuffer=="function",Hl=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Na=Object.prototype.toString,Gl=typeof Blob=="function"||typeof Blob<"u"&&Na.call(Blob)==="[object BlobConstructor]",Yl=typeof File=="function"||typeof File<"u"&&Na.call(File)==="[object FileConstructor]";function zs(s){return Wl&&(s instanceof ArrayBuffer||Hl(s))||Gl&&s instanceof Blob||Yl&&s instanceof File}function Jt(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let r=0,a=s.length;r<a;r++)if(Jt(s[r]))return!0;return!1}if(zs(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return Jt(s.toJSON(),!0);for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&Jt(s[r]))return!0;return!1}function Kl(s){const t=[],r=s.data,a=s;return a.data=_s(r,t),a.attachments=t.length,{packet:a,buffers:t}}function _s(s,t){if(!s)return s;if(zs(s)){const r={_placeholder:!0,num:t.length};return t.push(s),r}else if(Array.isArray(s)){const r=new Array(s.length);for(let a=0;a<s.length;a++)r[a]=_s(s[a],t);return r}else if(typeof s=="object"&&!(s instanceof Date)){const r={};for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=_s(s[a],t));return r}return s}function Jl(s,t){return s.data=As(s.data,t),delete s.attachments,s}function As(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let r=0;r<s.length;r++)s[r]=As(s[r],t);else if(typeof s=="object")for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(s[r]=As(s[r],t));return s}const Xl=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ql=5;var pe;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(pe||(pe={}));class Zl{constructor(t){this.replacer=t}encode(t){return(t.type===pe.EVENT||t.type===pe.ACK)&&Jt(t)?this.encodeAsBinary({type:t.type===pe.EVENT?pe.BINARY_EVENT:pe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===pe.BINARY_EVENT||t.type===pe.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Kl(t),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function or(s){return Object.prototype.toString.call(s)==="[object Object]"}class Us extends _e{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const a=r.type===pe.BINARY_EVENT;a||r.type===pe.BINARY_ACK?(r.type=a?pe.EVENT:pe.ACK,this.reconstructor=new ec(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(zs(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const a={type:Number(t.charAt(0))};if(pe[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===pe.BINARY_EVENT||a.type===pe.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const l=t.substring(i,r);if(l!=Number(l)||t.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););a.nsp=t.substring(i,r)}else a.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=t.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===t.length)break}a.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Us.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case pe.CONNECT:return or(r);case pe.DISCONNECT:return r===void 0;case pe.CONNECT_ERROR:return typeof r=="string"||or(r);case pe.EVENT:case pe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Xl.indexOf(r[0])===-1);case pe.ACK:case pe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ec{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Jl(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const tc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Us,Encoder:Zl,get PacketType(){return pe},protocol:Ql},Symbol.toStringTag,{value:"Module"}));function Ue(s,t,r){return s.on(t,r),function(){s.off(t,r)}}const sc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ja extends _e{constructor(t,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ue(t,"open",this.onopen.bind(this)),Ue(t,"packet",this.onpacket.bind(this)),Ue(t,"error",this.onerror.bind(this)),Ue(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var a,n,i;if(sc.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:pe.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,p=r.pop();this._registerAckCallback(u,p),l.id=u}const d=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!d||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);r.call(this,new Error("operation has timed out"))},n),l=(...d)=>{this.io.clearTimeoutFn(i),r.apply(this,d)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...r){return new Promise((a,n)=>{const i=(l,d)=>l?n(l):a(d);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case pe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pe.EVENT:case pe.BINARY_EVENT:this.onevent(t);break;case pe.ACK:case pe.BINARY_ACK:this.onack(t);break;case pe.DISCONNECT:this.ondisconnect();break;case pe.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:pe.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,t.data)}}}function ft(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}ft.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-r:s+r}return Math.min(s,this.max)|0};ft.prototype.reset=function(){this.attempts=0};ft.prototype.setMin=function(s){this.ms=s};ft.prototype.setMax=function(s){this.max=s};ft.prototype.setJitter=function(s){this.jitter=s};class Ts extends _e{constructor(t,r){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,cs(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new ft({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||tc;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ql(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Ue(r,"open",function(){a.onopen(),t&&t()}),i=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},l=Ue(r,"error",i);if(this._timeout!==!1){const d=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},d);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ue(t,"ping",this.onping.bind(this)),Ue(t,"data",this.ondata.bind(this)),Ue(t,"error",this.onerror.bind(this)),Ue(t,"close",this.onclose.bind(this)),Ue(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){ls(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new ja(this,t,r),this.nsps[t]=a),a}_destroy(t){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let a=0;a<r.length;a++)this.engine.write(r[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const vt={};function Xt(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const r=Vl(s,t.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=vt[n]&&i in vt[n].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return d?c=new Ts(a,t):(vt[n]||(vt[n]=new Ts(a,t)),c=vt[n]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Xt,{Manager:Ts,Socket:ja,io:Xt,connect:Xt});class rc{socket=null;connecting=!1;listeners=new Map;subscribedSymbols=new Set;subscribedChannels=new Set;heartbeatTimer=null;reconnectDelay=500;connect(){if(this.socket){this.socket.connected||this.socket.connect();return}if(this.connecting)return;this.connecting=!0;const t=$e();let a="ws://localhost:5022";if(typeof window<"u"){const n=window.location.protocol==="https:";a.startsWith("ws://")?a=n?a.replace("ws://","https://"):a.replace("ws://","http://"):a.startsWith("http://")?a=n?a.replace("http://","https://"):a:a.startsWith("wss://")||a.startsWith("https://")?a=a:a=(n?"https://":"http://")+a.replace(/^\/+/,"")}else/^https?:\/\//.test(a)||(a="https://"+a.replace(/^\/+/,""));this.socket=Xt(a,{path:"/socket.io",transports:["websocket","polling"],auth:{token:t},reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:this.reconnectDelay,reconnectionDelayMax:5e3,withCredentials:!1}),this.socket.onAny((n,i)=>{const l=this.listeners.get(n);if(l)for(const c of l)c(i);const d=this.listeners.get("*");if(d)for(const c of d)c({event:n,payload:i})}),this.socket.on("connect",()=>{this.reconnectDelay=500,this.connecting=!1,this.refreshAuthToken(),this.startHeartbeat(),this.resubscribeAll()}),this.socket.on("disconnect",()=>{this.stopHeartbeat()}),this.socket.io.on("reconnect_attempt",()=>{this.reconnectDelay=Math.min(this.reconnectDelay*1.5,5e3)}),this.socket.on("connect_error",()=>{this.reconnectDelay=Math.min(this.reconnectDelay*1.5,5e3),this.refreshAuthToken()})}disconnect(){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.stopHeartbeat(),this.listeners.clear(),this.subscribedSymbols.clear(),this.subscribedChannels.clear()}on(t,r){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(r)}off(t,r){const a=this.listeners.get(t);a&&a.delete(r)}onAny(t){this.listeners.has("*")||this.listeners.set("*",new Set),this.listeners.get("*").add(t)}offAny(t){const r=this.listeners.get("*");r&&r.delete(t)}subscribe(t){if(!this.socket)return;const r=(t.symbols||(t.symbol?[t.symbol]:[])).map(l=>l.toUpperCase()),a=t.channels||[],n=r.filter(l=>!this.subscribedSymbols.has(l)),i=a.filter(l=>!this.subscribedChannels.has(l));n.length===0&&i.length===0||(n.forEach(l=>this.subscribedSymbols.add(l)),i.forEach(l=>this.subscribedChannels.add(l)),this.socket.emit("subscribe",{...t,symbols:[...n],channels:[...i]}))}unsubscribe(t){if(!this.socket)return;const r=(t.symbols||[]).map(n=>n.toUpperCase()),a=t.channels||[];r.forEach(n=>this.subscribedSymbols.delete(n)),a.forEach(n=>this.subscribedChannels.delete(n)),this.socket.emit("unsubscribe",{symbols:r,channels:a})}placeOrder(t){if(this.socket)try{const r=localStorage.getItem("mfapp.selectedAccountId"),a=r?{...t,accountId:r}:t;this.socket.emit("place_order",a)}catch{this.socket.emit("place_order",t)}}cancelOrder(t){this.socket&&this.socket.emit("cancel_order",t)}modifyOrder(t){this.socket&&this.socket.emit("modify_order",t)}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=window.setInterval(()=>{this.socket&&this.socket.emit("ping",{ts:Date.now()})},2e4)}stopHeartbeat(){this.heartbeatTimer&&(window.clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}resubscribeAll(){if(!this.socket)return;const t=[...this.subscribedSymbols],r=[...this.subscribedChannels];(t.length>0||r.length>0)&&this.socket.emit("subscribe",{symbols:t,channels:r})}refreshAuthToken(){if(this.socket)try{const t=$e();this.socket.io.opts.auth={token:t}}catch{}}}const le=new rc;var ac=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nc=ac.reduce((s,t)=>{const r=Pr(`Primitive.${t}`),a=o.forwardRef((n,i)=>{const{asChild:l,...d}=n,c=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...d,ref:i})});return a.displayName=`Primitive.${t}`,{...s,[t]:a}},{}),ic="Label",ka=o.forwardRef((s,t)=>e.jsx(nc.label,{...s,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(s.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ka.displayName=ic;var oc=ka;function je({className:s,...t}){return e.jsx(oc,{"data-slot":"label",className:me("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function It({message:s,type:t,onClose:r,duration:a=3e3}){o.useEffect(()=>{const d=setTimeout(()=>{r()},a);return()=>clearTimeout(d)},[a,r]);const n={success:dt,error:zn,info:Re},i={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600"},l=n[t];return e.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[100] animate-slide-up",children:e.jsxs("div",{className:`${i[t]} text-white rounded-lg shadow-lg p-4 pr-12 min-w-[300px] max-w-md`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(l,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:s})]}),e.jsx("button",{onClick:r,className:"absolute top-3 right-3 p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(Ke,{className:"w-4 h-4"})})]})})}function Be({className:s,size:t=20}){const r=`${t}px`;return e.jsx("div",{"aria-label":"Loading",role:"status",className:me("inline-block animate-spin",s),style:{width:r,height:r,borderWidth:2,borderStyle:"solid",borderColor:"currentColor",borderTopColor:"transparent",borderRadius:9999}})}function lc({open:s,onOpenChange:t,positionId:r,onClosed:a}){const[n,i]=o.useState(!1),[l,d]=o.useState(null),[c,h]=o.useState(null),[u,p]=o.useState(null),[f,v]=o.useState("success"),w=N=>{if(!N)return"Request failed";const K=N?.error?.details||N?.data?.details;if(Array.isArray(K)&&K.length)return K.map(x=>`${String(x.field||"").trim()}: ${String(x.message||"").trim()}`).join("; ");const ce=N?.error?.message||N?.data?.message||N?.data?.error?.message||N?.message;return typeof ce=="string"&&ce.trim().length>0?ce:"Request failed"},[y,P]=o.useState(""),[b,I]=o.useState(""),[re,xe]=o.useState("manual"),[J,ne]=o.useState(""),[D,C]=o.useState(""),[_,ie]=o.useState(""),[G,Y]=o.useState(!1),[M,ge]=o.useState(!1),[se,Q]=o.useState(!1),[$,T]=o.useState(!1),[V,ye]=o.useState(null),[Z,j]=o.useState(null),[L,F]=o.useState("none"),[ue,g]=o.useState(!1),[S,k]=o.useState(!1),[A,te]=o.useState(!1),[ve,we]=o.useState(!1),[ke,z]=o.useState(!1),[q,Ne]=o.useState(!1),W=o.useMemo(()=>{const N=typeof y=="number"?y:0,K=String(c?.status||"").toLowerCase()==="closed";return N>0&&c&&N<=Number(c.volume||0)&&!K},[y,c]);o.useEffect(()=>{!s||!r||(i(!0),d(null),Ut(r).then(N=>{h(N),P(N.volume)}).catch(N=>{d(typeof N?.message=="string"?N.message:"Failed to load position")}).finally(()=>i(!1)))},[s,r]);const U=o.useMemo(()=>c?ca({symbol:String(c.symbol),direction:String(c.direction),volume:Number(c.volume),openPrice:Number(c.openPrice),currentPrice:Number(c.currentPrice),unrealizedPL:Number(c.unrealizedPL??0),margin:Number(c.margin??0),pips:Number(c.pips??0),unrealizedPLPercent:Number(c.unrealizedPLPercent??0)}):null,[c]),de=o.useMemo(()=>{const N=typeof c?.takeProfit=="number"&&c?.takeProfit,K=typeof c?.stopLoss=="number"&&c?.stopLoss;return!!(N||K)},[c]),H=A||de;o.useEffect(()=>{if(A&&c){const N=Number(c.currentPrice);(D===""||typeof D!="number")&&C(N),(J===""||typeof J!="number")&&ne(N),ke||z(!0),ve||we(!0)}},[A,c]),o.useEffect(()=>{if(!A||!c)return;const N=Number(c.currentPrice);$&&!G&&C(N),se&&!M&&ne(N)},[A,c?.currentPrice,$,se,G,M]),o.useEffect(()=>{A&&(Q(!1),T(!1),Y(!1),ge(!1),ye(null),j(null))},[A]),o.useEffect(()=>{if(!s||!c?.symbol)return;le.connect();const N=String(c.symbol).toUpperCase(),K=x=>{const he=String(x?.symbol||x?.s||"").toUpperCase();if(he&&he!==N)return;const m=x?.price??x?.currentPrice??x?.bid??x?.ask;typeof m=="number"&&!isNaN(m)&&h(ae=>ae&&{...ae,currentPrice:Number(m)})},ce=x=>{const he=x?.event,m=x?.payload;m&&typeof he=="string"&&/price|tick|quote/i.test(he)&&K(m)};return le.on("prices",K),le.on("price_update",K),le.on("tick",K),le.onAny(ce),le.subscribe({symbol:N,channels:["prices"]}),()=>{le.off("prices",K),le.off("price_update",K),le.off("tick",K),le.offAny(ce),le.unsubscribe({symbols:[N],channels:["prices"]})}},[s,c?.symbol]),o.useEffect(()=>{if(!s||!r)return;let N=Date.now();const K=window.setInterval(async()=>{if(Date.now()-N>5e3)try{const he=await Ut(r);h(m=>m?{...m,currentPrice:Number(he.currentPrice)}:he),N=Date.now()}catch{}},3e3);return()=>window.clearInterval(K)},[s,r]);const Se=e.jsxs("div",{className:"space-y-4",children:[u&&e.jsx(It,{message:u,type:f,onClose:()=>p(null)}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3 mx-auto animate-pulse"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]})]}),l&&e.jsx("div",{className:"p-3 rounded bg-red-50 border border-red-200 text-sm text-red-700",children:l}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-3",children:e.jsx("div",{className:`flex h-8 items-center justify-center rounded-full px-4 ${U&&U.calculated.unrealizedPL>=0?"bg-green-100":"bg-red-100"}`,children:e.jsx("p",{className:`${U&&U.calculated.unrealizedPL>=0?"text-green-700":"text-red-700"} text-sm font-medium`,children:U&&U.calculated.unrealizedPL>=0?"In Profit":"In Loss"})})}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsx("h1",{className:`${U&&U.calculated.unrealizedPL>=0?"text-green-600":"text-red-600"} text-[32px] font-bold leading-tight pb-1`,children:Pe(Number(U?.calculated.unrealizedPL||0))}),e.jsxs("p",{className:"text-gray-600 text-base",children:["Current Market Price: ",Ye(Number(c.currentPrice),c.symbol)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between gap-x-6 py-3 px-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Open Price"}),e.jsx("p",{className:"text-gray-900 text-sm font-medium text-right",children:Ye(Number(c.openPrice),c.symbol)})]}),e.jsxs("div",{className:"flex justify-between gap-x-6 py-3 px-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Volume"}),e.jsxs("p",{className:"text-gray-900 text-sm font-medium text-right",children:[Number(c.volume)," Lot"]})]}),e.jsxs("div",{className:"flex justify-between gap-x-6 py-3 px-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Margin"}),e.jsx("p",{className:"text-gray-900 text-sm font-medium text-right",children:Pe(Number(c.margin))})]}),e.jsxs("div",{className:"flex justify-between gap-x-6 py-3 px-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Fees"}),e.jsx("p",{className:"text-gray-900 text-sm font-medium text-right",children:Pe(Number(c.costs?.total||0))})]}),e.jsxs("div",{className:"flex justify-between gap-x-6 py-3 px-3",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Open Timestamp"}),e.jsx("p",{className:"text-gray-900 text-sm font-medium text-right",children:c.openedAt?Os(String(c.openedAt)):"-"})]})]}),H&&e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsx("h3",{className:"text-gray-900 text-lg font-bold pb-4",children:"Risk Management"}),A?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2 pb-2",children:[e.jsx(E,{variant:se?"default":"outline",className:"h-10",onClick:()=>Q(N=>!N),children:"Set SL"}),e.jsx(E,{variant:$?"default":"outline",className:"h-10",onClick:()=>T(N=>!N),children:"Set TP"})]}),e.jsxs("div",{className:$?"flex flex-col":"hidden",children:[e.jsx(je,{className:"text-gray-600 text-sm pb-1",htmlFor:"take-profit",children:"Take Profit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"outline",className:"h-12 w-12",onClick:()=>{const N=ut(String(c?.symbol||""));C(typeof D=="number"?D-N:Number(c?.currentPrice)-N),Y(!0),j(null)},children:""}),e.jsx(fe,{id:"take-profit",type:"number",inputMode:"decimal",placeholder:"Set Take Profit",value:D===""?"":String(D),onChange:N=>{C(N.target.value?Number(N.target.value):""),Y(!0),j(null)},className:"flex-1 h-12 rounded-lg bg-white border border-gray-200 px-4 text-green-600 text-base font-medium text-right focus:outline-none focus:ring-2 focus:ring-blue-600"}),e.jsx(E,{variant:"outline",className:"h-12 w-12",onClick:()=>{const N=ut(String(c?.symbol||""));C(typeof D=="number"?D+N:Number(c?.currentPrice)+N),Y(!0),j(null)},children:"+"})]}),Z&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:Z})]}),e.jsxs("div",{className:se?"flex flex-col":"hidden",children:[e.jsx(je,{className:"text-gray-600 text-sm pb-1",htmlFor:"stop-loss",children:"Stop Loss"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"outline",className:"h-12 w-12",onClick:()=>{const N=ut(String(c?.symbol||""));ne(typeof J=="number"?J-N:Number(c?.currentPrice)-N),ge(!0),ye(null)},children:""}),e.jsx(fe,{id:"stop-loss",type:"number",inputMode:"decimal",placeholder:"Set Stop Loss",value:J===""?"":String(J),onChange:N=>{ne(N.target.value?Number(N.target.value):""),ge(!0),ye(null)},className:"flex-1 h-12 rounded-lg bg-white border border-gray-200 px-4 text-red-600 text-base font-medium text-right focus:outline-none focus:ring-2 focus:ring-blue-600"}),e.jsx(E,{variant:"outline",className:"h-12 w-12",onClick:()=>{const N=ut(String(c?.symbol||""));ne(typeof J=="number"?J+N:Number(c?.currentPrice)+N),ge(!0),ye(null)},children:"+"})]}),V&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:V})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between gap-x-6 py-2.5 border-b border-gray-200",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Take Profit"}),e.jsx("p",{className:"text-green-600 text-sm font-medium",children:typeof c.takeProfit=="number"&&c.takeProfit?Ye(Number(c.takeProfit),c.symbol):"-"})]}),e.jsxs("div",{className:"flex justify-between gap-x-6 py-2.5",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Stop Loss"}),e.jsx("p",{className:"text-red-600 text-sm font-medium",children:typeof c.stopLoss=="number"&&c.stopLoss?Ye(Number(c.stopLoss),c.symbol):"-"})]})]})]})]})]});return e.jsx(aa,{open:s,onOpenChange:t,children:e.jsxs(Rs,{fullscreen:!0,className:"p-0",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${String(c?.direction).toLowerCase()==="buy"?"text-green-600":"text-red-600"}`,children:String(c?.direction).toLowerCase()==="buy"?"":""}),e.jsx("h2",{className:"text-lg font-bold text-gray-700",children:c?.symbol})]}),e.jsx(E,{variant:"ghost",className:"h-10 w-10 bg-transparent hover:bg-transparent text-gray-600 hover:text-gray-800",onClick:()=>t(!1),children:""})]}),e.jsx("div",{className:"p-4 pb-24 overflow-y-auto h-[calc(100vh-8rem)]",children:Se}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-200",children:e.jsx("div",{className:"flex w-full items-center gap-3",children:A?e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"outline",className:"flex-1 h-12 rounded-lg border-gray-300 text-gray-700",onClick:()=>te(!1),children:"Cancel"}),e.jsx(E,{className:"flex-1 h-12 rounded-lg bg-blue-600 text-white hover:bg-blue-700",disabled:S||!se&&!$,onClick:async()=>{if(r){k(!0),d(null);try{await ol(r,{stopLoss:se&&typeof J=="number"?J:void 0,takeProfit:$&&typeof D=="number"?D:void 0});const N=await Ut(r);h(N),v("success");const K=$&&se?"Stop Loss and Take Profit updated":$?`Take Profit set to ${Ye(Number(D),String(N.symbol))}`:se?`Stop Loss set to ${Ye(Number(J),String(N.symbol))}`:"Position modified successfully";p(K),te(!1)}catch(N){const K=w(N),ce=N?.error?.details||N?.data?.details;if(Array.isArray(ce)){const x=ce.find(m=>String(m.field||"").toLowerCase().includes("stoploss"))?.message,he=ce.find(m=>String(m.field||"").toLowerCase().includes("takeprofit"))?.message;x&&ye(String(x)),he&&j(String(he))}else{const x=String(K||"").toLowerCase();(x.includes("stop loss")||x.includes("stoploss"))&&ye(K),(x.includes("take profit")||x.includes("takeprofit")||x.includes("tp"))&&j(K)}d(K),v("error"),p(K)}finally{k(!1)}}},children:"Apply Changes"})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"flex-1 h-12 rounded-lg bg-blue-600 text-white hover:bg-blue-700",onClick:()=>te(!0),children:"Modify Position"}),e.jsx(E,{className:"flex-1 h-12 rounded-lg bg-gray-200 text-gray-900 hover:bg-gray-300",disabled:!W||ue,onClick:async()=>{if(r){g(!0),d(null);try{await il(r,{volume:typeof y=="number"?y:0,price:typeof b=="number"?b:0,reason:re});const N=await Ut(r);if(h(N),v("success"),p("Your order has been successfully closed"),String(N?.status||"").toLowerCase()==="closed"){try{a&&a(r)}catch{}try{window.dispatchEvent(new CustomEvent("position.closed",{detail:{id:r}}))}catch{}window.setTimeout(()=>t(!1),1e3)}}catch(N){const K=typeof N?.message=="string"?N.message:"";if(K&&K.toLowerCase().includes("already closed"))d("Position is already closed"),v("info"),p("Position is already closed");else{const ce=w(N);d(ce),v("error"),p(ce)}}finally{g(!1)}}},children:ue?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Be,{size:16}),e.jsx("span",{children:"Closing..."})]}):"Close Position"})]})})})]})})}let xs=null,lr=0;function Sa(){return xs||(xs=new(window.AudioContext||window.webkitAudioContext)),xs}function Oe(s,t,r,a,n="sine"){const i=Sa(),l=i.createOscillator(),d=i.createGain();l.type=n,l.frequency.setValueAtTime(s,a),d.gain.setValueAtTime(0,a),d.gain.linearRampToValueAtTime(r,a+.02),d.gain.linearRampToValueAtTime(0,a+t),l.connect(d),d.connect(i.destination),l.start(a),l.stop(a+t)}function wt(s){try{if(localStorage.getItem("mfapp.soundEnabled")==="false")return;const r=Sa(),a=Math.max(r.currentTime,lr+.01);lr=a,s==="add"?Oe(920,.12,.08,a):s==="remove"?Oe(340,.12,.08,a):s==="order-confirm"?Oe(780,.14,.09,a):s==="order-success"?(Oe(900,.12,.08,a),Oe(1100,.12,.08,a+.14)):s==="order-error"?Oe(260,.18,.09,a,"triangle"):s==="position-opened"?(Oe(600,.1,.08,a),Oe(800,.1,.08,a+.12)):s==="position-closed"?(Oe(800,.1,.08,a),Oe(600,.1,.08,a+.12)):s==="warning"&&(Oe(700,.09,.08,a),Oe(700,.09,.08,a+.14),Oe(700,.09,.08,a+.28))}catch{}}function cc({userName:s,onNavigate:t}){const[r,a]=o.useState(s),[n,i]=o.useState(void 0),{selectedAccountId:l,setSelectedAccountId:d,accounts:c,setAccounts:h}=ea(),u=c.find(g=>g._id===l)||c[0],[p,f]=o.useState([]),[v,w]=o.useState(0),[y,P]=o.useState(!0),[b,I]=o.useState(null),[re,xe]=o.useState([]),[J,ne]=o.useState(!1),[D,C]=o.useState(null),_=(p||[]).filter(g=>{if(!u)return!0;const S=String(u._id||""),k=String(g.accountId?._id||g.account?.id||"");return S&&k&&S===k}),ie=_.length;_.reduce((g,S)=>{const k=S.profitLoss??S.unrealizedPL??0;return g+(typeof k=="number"?k:0)},0);const G=(p||[]).reduce((g,S)=>{const k=typeof S.unrealizedPL=="number"?Number(S.unrealizedPL):null;if(k!=null)return g+k;const A=Number(S.openPrice),te=Number(S.currentPrice??A),ve=Number(S.volume),we=ks(String(S.symbol),String(S.direction),A,te,ve);return g+(isFinite(we)?we:0)},0),Y=(p||[]).reduce((g,S)=>{const k=S.margin??0;return g+(typeof k=="number"?k:0)},0),M=Y>0?Y:u?.equity||0,ge=M>0?G/M*100:0,[se,Q]=o.useState(!1),[$,T]=o.useState(!1),[V,ye]=o.useState(!1),[Z,j]=o.useState(3),[L,F]=o.useState(0),ue=()=>{const g=new Date().getHours();return g<12?"Good Morning":g<18?"Good Afternoon":"Good Evening"};return o.useEffect(()=>{let g=!0;return(async()=>{try{const S=await Dt();if(!g)return;const k=S.firstName||S.email||r;a(k),i(S.kycStatus);const A=await la("active");if(!g)return;h(A),(l?A.some(q=>String(q._id)===String(l)):!1)||(A.length===1?d(A[0]?._id||null):d(null)),F(1);const ve=setInterval(()=>{F(q=>Math.min(A?.length||1,q+1))},250);setTimeout(()=>clearInterval(ve),2e3);const we=await nl({page:1,limit:20,sortBy:"createdAt",sortOrder:"desc"}),ke=await cl(),z=await ll({page:1,limit:50});if(!g)return;f(we),xe(ke),w(z)}catch(S){I(S?.message||"Failed to load data")}finally{P(!1),setTimeout(()=>{Q(!0),T(!0),ye(!0)},200)}})(),()=>{g=!1}},[]),o.useEffect(()=>{const g=new IntersectionObserver(k=>{for(const A of k)A.isIntersecting&&j(te=>te+3)},{rootMargin:"120px"}),S=document.getElementById("positions-sentinel");return S&&g.observe(S),()=>g.disconnect()},[_.length]),o.useEffect(()=>{le.connect(),le.subscribe({channels:["account"]});const g=k=>{h(A=>{if(!A||A.length===0)return A;const te=String(k.accountId||k._id||""),ve=A.findIndex(z=>String(z._id)===te);if(ve===-1)return A;const we=[...A],ke=we[ve];return we[ve]={...ke,balance:typeof k.balance=="number"?k.balance:ke.balance,equity:typeof k.equity=="number"?k.equity:typeof k.balanceLive=="number"?k.balanceLive:ke.equity,freeMargin:typeof k.freeMargin=="number"?k.freeMargin:typeof k.availableBalance=="number"?k.availableBalance:ke.freeMargin,margin:typeof k.marginUsed=="number"?k.marginUsed:ke.margin,marginLevel:typeof k.marginLevel=="number"?Number(k.marginLevel.toFixed?k.marginLevel.toFixed(2):k.marginLevel):ke.marginLevel},we})},S=k=>{k&&k.type==="margin_call"&&(I("Margin call risk detected"),wt("warning"))};return le.on("balance_update",g),le.on("notification",S),()=>{le.off("balance_update",g),le.off("notification",S)}},[]),o.useEffect(()=>{const g=(re||[]).map(W=>W.symbol.toUpperCase()),S=(p||[]).map(W=>String(W.symbol||"").toUpperCase()),k=Array.from(new Set([...g,...S]));if(k.length===0)return;le.connect(),le.subscribe({symbols:k,channels:["positions"]});const A={};let te=null;const ve=()=>{xe(W=>{if(!W||W.length===0)return W;let U=W;for(const de of Object.keys(A)){const H=A[de],Se=U.findIndex(N=>N.symbol.toUpperCase()===de);if(Se!==-1){const N=U[Se],K={...N,price:typeof H.mid=="number"?H.mid:typeof H.bid=="number"?H.bid:N.price,changePercent:typeof H.changePercent=="number"?H.changePercent:N.changePercent};U===W&&(U=[...W]),U[Se]=K}}return U}),f(W=>{if(!W||W.length===0)return W;let U=W;for(const de of Object.keys(A)){const H=A[de],Se=typeof H.id=="string"?U.findIndex(ce=>String(ce.id||"")===H.id):-1,N=typeof H.positionId=="string"?U.findIndex(ce=>String(ce.positionId||"")===H.positionId):-1,K=[];if(Se!==-1)K.push(Se);else if(N!==-1)K.push(N);else{const ce=U.map((x,he)=>({i:he,s:String(x.symbol||"").toUpperCase()})).filter(({s:x})=>x===de).map(({i:x})=>x);K.push(...ce)}if(K.length>0){U===W&&(U=[...W]);for(const ce of K){const x=U[ce],he=typeof H.currentPrice=="number"?H.currentPrice:typeof H.mid=="number"?H.mid:typeof H.bid=="number"?H.bid:x.currentPrice,m=typeof H.unrealizedPL=="number"?H.unrealizedPL:x.unrealizedPL,ae=typeof H.pipMovement=="number"?H.pipMovement:x.pips,Ee=Number(x.margin||0),nt=Ee>0&&typeof m=="number"?m/Ee*100:x.unrealizedPLPercent,Lt=typeof H.commission=="number"?H.commission:x.commission,Rt=typeof H.swap=="number"?H.swap:x.swap,Fe=typeof H.spread=="number"?H.spread:x.spread,Xe=typeof H.totalCosts=="number"?H.totalCosts:x.totalCosts,ze=H.costs||x.costs,xt=ze?{commission:typeof ze.commission=="number"?ze.commission:Lt,swap:typeof ze.swap=="number"?ze.swap:Rt,spread:typeof ze.spread=="number"?ze.spread:Fe,total:typeof ze.total=="number"?ze.total:typeof Xe=="number"?Xe:void 0}:{commission:Lt,swap:Rt,spread:Fe,total:typeof Xe=="number"?Xe:void 0};U[ce]={...x,currentPrice:he,unrealizedPL:m,pips:ae,unrealizedPLPercent:nt,commission:xt.commission,swap:xt.swap,spread:xt.spread,totalCosts:xt.total,costs:xt}}}}return U});for(const W of Object.keys(A))delete A[W];te=null},we=W=>{const U=String(W.symbol||"").toUpperCase();A[U]={...A[U]||{},...W},te==null&&(te=requestAnimationFrame(ve))},ke=W=>{const U=String(W.symbol||"").toUpperCase();A[U]={...A[U]||{},...W},te==null&&(te=requestAnimationFrame(ve))},z=W=>{const U=String(W&&(W.status||W.orderStatus)||"").toLowerCase();U.includes("execut")||U.includes("filled")?wt("order-success"):(U.includes("cancel")||U.includes("reject"))&&wt("order-error")},q=W=>{wt("position-closed");const U=String(W?.id||W?._id||W?.positionId||"");U&&f(de=>de.filter(H=>String(H.id||H._id)!==U))},Ne=W=>{wt("position-opened")};return le.on("PRICE_UPDATE",we),le.on("PNL_UPDATE",ke),le.on("POSITION_UPDATE",ke),le.on("ORDER_UPDATE",z),le.on("POSITION_CLOSED",q),le.on("POSITION_OPENED",Ne),()=>{le.unsubscribe({symbols:k}),le.off("PRICE_UPDATE",we),le.off("PNL_UPDATE",ke),le.off("POSITION_UPDATE",ke),le.off("ORDER_UPDATE",z),le.off("POSITION_CLOSED",q),le.off("POSITION_OPENED",Ne),te!=null&&cancelAnimationFrame(te)}},[re.map(g=>g.symbol).join(","),p.map(g=>String(g.symbol)).join(",")]),e.jsxs("div",{className:"pb-20 md:pb-8",children:[e.jsxs("div",{className:"px-4 pt-6 pb-4 bg-gradient-to-br from-blue-700 to-blue-900 text-white","aria-busy":!se,"aria-live":"polite",children:[e.jsxs("h2",{className:"mb-1",children:[ue(),", ",r]}),e.jsx("p",{className:"text-blue-100",children:"Welcome to your trading dashboard"}),n==="pending"&&e.jsx("div",{className:"mt-5 rounded-2xl border border-yellow-200 bg-gradient-to-br from-orange-50 to-yellow-50 shadow-sm p-5",role:"alert",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(gi,{className:"w-6 h-6 text-red-700"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-red-900 font-semibold",children:"Action required"}),e.jsx("p",{className:"text-sm text-yellow-800 leading-relaxed",children:"Please verify your account and complete your KYC"})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(E,{onClick:()=>{try{localStorage.setItem("mfapp.settingsInitialSection","kyc")}catch{}t("settings")},className:"bg-yellow-600 hover:bg-yellow-700 text-white rounded-md px-4 py-2 shadow-sm",children:"Complete KYC"})})]})}),n==="processing"&&e.jsx("div",{className:"mt-5 rounded-2xl border border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-sm p-5",role:"status",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(ys,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-blue-900 font-semibold",children:"Application under review"}),e.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"Your KYC documents are being reviewed. Well notify you once verification is complete."})]})]})}),b&&e.jsx("div",{className:"mt-2 bg-white/10 text-white rounded px-3 py-2 text-sm",children:b})]}),e.jsxs("div",{className:"px-4 -mt-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-5 mb-4","aria-busy":!se,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Account Balance"}),e.jsx("h1",{className:"text-gray-900",children:u&&L>0?Pe(u.balance,u.currency):""})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:()=>t("wallet-deposit"),className:"p-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors","aria-label":"Deposit",children:e.jsx(gs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>t("wallet-withdraw"),className:"p-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors","aria-label":"Withdraw",children:e.jsx(bs,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Equity"}),e.jsx("p",{className:"text-gray-900",children:u&&L>0?Pe(u.equity,u.currency):""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Free Margin"}),e.jsx("p",{className:"text-gray-900",children:u&&L>0?Pe(u.freeMargin,u.currency):""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Margin Level"}),e.jsxs("p",{className:`${u&&u.marginLevel>100?"text-green-600":"text-red-600"}`,children:[u&&L>0?u.marginLevel:"","%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Today's P&L"}),e.jsxs("p",{className:`text-lg ${G>=0?"text-green-600":"text-red-600"}`,children:[G>=0?"+":"",Pe(Math.abs(G),u?.currency||"USD")]}),e.jsxs("p",{className:`text-xs ${ge>=0?"text-green-600":"text-red-600"}`,children:[ge>=0?"+":"",Number(ge).toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Open Positions"}),e.jsx("p",{className:"text-lg text-gray-900",children:Number(ie)}),e.jsx("button",{onClick:()=>t("portfolio"),className:"text-xs text-blue-700 hover:text-blue-800",children:"View all"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Pending Orders"}),e.jsx("p",{className:"text-lg text-gray-900",children:Number(v)}),e.jsx("button",{onClick:()=>t("portfolio"),className:"text-xs text-blue-700 hover:text-blue-800",children:"View all"})]})]}),e.jsxs("div",{className:"mb-6","aria-busy":!se,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Watchlist"}),e.jsx("button",{onClick:()=>t("markets"),className:"text-sm text-blue-700 hover:text-blue-800",children:"View All"})]}),e.jsx("div",{className:"space-y-2",children:y?e.jsx("div",{className:"space-y-2 animate-pulse",children:[0,1,2].map(g=>e.jsx("div",{className:"w-full bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),e.jsx("div",{className:"w-16 h-10 bg-gray-200 rounded"})]})]})},g))}):e.jsxs(e.Fragment,{children:[re.map(g=>e.jsx("button",{onClick:()=>t("markets"),className:"w-full bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:(()=>{const S=g.symbol,k=typeof g.mid=="number"?g.mid:typeof g.rate=="number"?g.rate:typeof g.price=="number"?g.price:0,A=typeof g.changePercent=="number"?g.changePercent:typeof g.changePercent24h=="number"?g.changePercent24h:0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-gray-900 mb-1",children:S}),e.jsx("p",{className:"text-xs text-gray-500",children:"Watchlist"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-900 font-mono",children:Ye(k,S)}),e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[A>=0?e.jsx(st,{className:"w-3 h-3 text-green-600"}):e.jsx(Ni,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:`text-xs ${A>=0?"text-green-600":"text-red-600"}`,children:[A>=0?"+":"",Number(A).toFixed(2),"%"]})]})]}),e.jsx("div",{className:"w-16 h-10",children:e.jsx("svg",{viewBox:"0 0 60 40",className:A>=0?"text-green-600":"text-red-600",children:e.jsx("polyline",{points:"0,30 10,25 20,28 30,20 40,22 50,15 60,10",fill:"none",stroke:"currentColor",strokeWidth:"2"})})})]})]})})()},g.symbol)),e.jsx("button",{onClick:()=>t("markets"),className:"w-full bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[e.jsx(pi,{className:"w-5 h-5"}),e.jsx("span",{children:"Add to Watchlist"})]})})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Open Positions"}),e.jsx("button",{onClick:()=>t("portfolio"),className:"text-sm text-blue-700 hover:text-blue-800",children:"View All"})]}),e.jsxs("div",{className:"space-y-2",children:[p.filter(g=>!u||g.account?.id===u._id||g.accountId?._id===u._id).slice(0,Z).map(g=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm cursor-pointer",role:"button",onClick:()=>{C(String(g.id||g._id||g.positionId)),ne(!0)},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-900",children:g.symbol}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.direction==="buy"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:String(g.direction).toUpperCase()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`${g.unrealizedPL>=0?"text-green-600":"text-red-600"}`,children:(()=>{const S=g.account?.currency||g.accountId?.currency||"USD",k=typeof g.unrealizedPL=="number"?g.unrealizedPL:ks(g.symbol,g.direction,g.openPrice,g.currentPrice,g.volume),A=g.margin&&Number(g.margin)>0?k/Number(g.margin)*100:oa(k,g.margin);return`${k>=0?"+":""}${Pe(Math.abs(k),S)}${A!=null?` (${A>=0?"+":""}${Number(A).toFixed(2)}%)`:""}`})()}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Pips ",(()=>{const S=typeof g.pips=="number"?Number(g.pips):null,k=S??ia(g.symbol,g.direction,g.openPrice,g.currentPrice);return(String(g.direction).toLowerCase()==="sell"?-k:k).toFixed(2)})()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Lots ",g.volume]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Entry"}),e.jsx("p",{className:"text-gray-900 font-mono",children:Ye(g.openPrice,g.symbol)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current"}),e.jsx("p",{className:"text-gray-900 font-mono",children:Ye(g.currentPrice,g.symbol)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Time"}),e.jsx("p",{className:"text-gray-900",children:el(g.openedAt)})]})]})]},g.id||g._id||g.positionId)),p.length===0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx(st,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No open positions"}),e.jsx(E,{onClick:()=>t("trading"),className:"bg-blue-700 hover:bg-blue-800 text-white rounded-lg",children:"Start Trading"})]}),e.jsx("div",{id:"positions-sentinel",className:"h-8"})]})]}),e.jsxs("div",{className:"mb-6","aria-busy":!V,children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:"Market Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 animate-pulse",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Top Gainer"}),e.jsx("p",{className:"text-green-900 mb-1",children:"USD/JPY"}),e.jsx("p",{className:"text-green-700",children:"+0.83%"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 animate-pulse",children:[e.jsx("p",{className:"text-xs text-red-700 mb-1",children:"Top Loser"}),e.jsx("p",{className:"text-red-900 mb-1",children:"AUD/USD"}),e.jsx("p",{className:"text-red-700",children:"-1.34%"})]})]})]})]}),e.jsx(lc,{open:J,onOpenChange:ne,positionId:D,onClosed:g=>{f(S=>S.filter(k=>String(k.id||k._id)!==String(g)))}})]})}async function dc(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??50),sortBy:s.sortBy??"createdAt",sortOrder:s.sortOrder??"desc"});return((await sa(`/api/v1/wallet/transactions?${t.toString()}`,{method:"GET",headers:be()},2,250)).data?.transactions??[]).map(n=>{const i=n.status||(n.isCompleted?"completed":n.isPending?"pending":n.isFailed?"failed":n.isCancelled?"cancelled":n.isExpired?"expired":"completed"),l=B(n.amountInUSD??n.amount),d=B(n.feeInUSD??n.fee),c=l-(d||0);return{id:n.id||n._id||n.transactionId,type:String(n.type||"trade"),amount:l,currency:String(n.currency||(n.accountId?.currency??"USD")),netAmount:c,status:i,createdAt:String(n.createdAt),accountNumber:n.accountId?.accountNumber,symbol:n.metadata?.symbol,volume:B(n.metadata?.volume),price:B(n.metadata?.price),documentCount:B(n.documentCount)}})}async function wd(s={}){const t=new URLSearchParams({page:String(s.page??1),limit:String(s.limit??25),sortBy:s.sortBy??"createdAt",sortOrder:s.sortOrder??"desc"});s.type&&t.set("type",s.type),s.status&&t.set("status",s.status),s.startDate&&t.set("startDate",s.startDate),s.endDate&&t.set("endDate",s.endDate);const a=(await sa(`/api/v1/wallet/transactions?${t.toString()}`,{method:"GET",headers:be()},2,250)).data||{};return{items:(a.transactions||[]).map(i=>{const l=i.status||(i.isCompleted?"completed":i.isPending?"pending":i.isFailed?"failed":i.isCancelled?"cancelled":i.isExpired?"expired":"completed"),d=B(i.amountInUSD??i.amount),c=B(i.feeInUSD??i.fee),h=d-(c||0);return{id:i.id||i._id||i.transactionId,type:String(i.type||"trade"),amount:d,currency:String(i.currency||(i.accountId?.currency??"USD")),netAmount:h,status:l,createdAt:String(i.createdAt),accountNumber:i.accountId?.accountNumber,symbol:i.metadata?.symbol,volume:B(i.metadata?.volume),price:B(i.metadata?.price),documentCount:B(i.documentCount)}}),pagination:a.pagination,summary:a.summary}}async function cr(){const t=(await ee("/api/v1/wallet/balance",{method:"GET",headers:be()})).data||{};return{balance:B(t.balance),totalDeposits:B(t.totalDeposits),totalWithdrawals:B(t.totalWithdrawals),pendingTransactions:B(t.pendingTransactions),availableToTransfer:B(t.availableToTransfer)}}async function uc(s){return(await ee("/api/v1/wallet/transfer-to-account",{method:"POST",headers:be(),body:JSON.stringify(s)})).data}async function hc(s){return(await ee("/api/v1/wallet/transfer-from-account",{method:"POST",headers:be(),body:JSON.stringify(s)})).data}async function mc(s=!0){return(await ee(`/api/v1/payments/methods${s?"?includeDetails=true":""}`)).data}async function pc(s="USD"){return(await ee(`/api/v1/payments/bank-details?currency=${encodeURIComponent(s)}`)).data}async function fc(s="USDT",t="TRC20"){return(await ee(`/api/v1/payments/crypto-details?asset=${s}&chain=${t}`)).data}async function dr(s){const t=new URLSearchParams({amount:String(s.amount),type:s.type,method:s.method,currency:s.currency||"USD"});return(await ee(`/api/v1/payments/calculate-fees?${t.toString()}`)).data}async function ur(s){return(await ee("/api/v1/payments/deposit",{method:"POST",body:JSON.stringify(s)})).data}async function hr(s){return(await ee("/api/v1/payments/withdraw",{method:"POST",body:JSON.stringify(s)})).data}async function xc(s,t){return(await ee(`/api/v1/payments/transactions/${s}/submit-verification`,{method:"POST",body:JSON.stringify(t)})).data}function Te({className:s}){return e.jsx("div",{className:me("animate-pulse bg-gray-200 rounded",s),"aria-hidden":"true"})}function Nt({icon:s,title:t,message:r,actionLabel:a,onAction:n,className:i}){return e.jsxs("div",{className:me("text-center py-12",i),role:"status","aria-live":"polite",children:[s,t?e.jsx("p",{className:"text-gray-900 mb-1",children:t}):null,r?e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r}):null,a&&n?e.jsx(E,{onClick:n,className:"h-11 rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:a}):null]})}function gc({onNavigate:s}){const[t,r]=o.useState("overview"),[a,n]=o.useState("bank_transfer"),[i,l]=o.useState(""),[d,c]=o.useState(""),[h,u]=o.useState([]),[p,f]=o.useState({balance:0,availableToTransfer:0,pendingTransactions:0}),[v,w]=o.useState([]),[y,P]=o.useState(null),[b,I]=o.useState(null),[re,xe]=o.useState(""),[J,ne]=o.useState(""),[D,C]=o.useState(null),[_,ie]=o.useState(1),[G,Y]=o.useState(null),[M,ge]=o.useState(1),[se,Q]=o.useState("bank_transfer"),[$,T]=o.useState({bankName:"",accountNumber:"",routingNumber:"",swiftCode:"",accountHolderName:""}),[V,ye]=o.useState({walletAddress:""}),[Z,j]=o.useState(1),[L,F]=o.useState("wallet_to_account"),[ue,g]=o.useState(""),[S,k]=o.useState([]),[A,te]=o.useState(""),[ve,we]=o.useState(""),[ke,z]=o.useState(""),[q,Ne]=o.useState(!1),[W,U]=o.useState(!1),[de,H]=o.useState(!1),[Se,N]=o.useState(!1),[K,ce]=o.useState(!1),[x,he]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const[m,ae,Ee,nt]=await Promise.all([dc({page:1,limit:5,sortBy:"createdAt",sortOrder:"desc"}),cr(),mc(!0),la("active")]);u(m),f({balance:ae.balance,availableToTransfer:ae.availableToTransfer,pendingTransactions:ae.pendingTransactions}),w(Ee);try{P(await pc("INR"))}catch{}try{I(await fc("USDT","TRC20"))}catch{}k(nt)}catch{u([])}finally{he(!1)}})()},[]),t==="deposit"?e.jsx("div",{className:"pb-20 md:pb-8",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>r("overview"),className:"text-blue-700 hover:text-blue-800 mb-4",children:" Back to Wallet"}),e.jsx("h2",{className:"text-gray-900 mb-2",children:"Deposit Funds"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-6",children:[e.jsx("span",{className:`${_>=1?"text-blue-700":""}`,children:"Method"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${_>=2?"text-blue-700":""}`,children:"Amount"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${_>=3?"text-blue-700":""}`,children:"Instructions"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${_>=4?"text-blue-700":""}`,children:"Confirm"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${_>=5?"text-blue-700":""}`,children:"Done"})]}),_===1&&e.jsxs("div",{className:"space-y-3 mb-6",children:[x&&e.jsx("div",{className:"space-y-2","aria-busy":"true","aria-live":"polite",children:Array.from({length:3}).map((m,ae)=>e.jsx("div",{className:"w-full p-4 rounded-lg border-2 border-transparent bg-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"w-6 h-6 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Te,{className:"h-4 w-1/3 mb-2"}),e.jsx(Te,{className:"h-3 w-1/4"})]})]})},ae))}),!x&&v.length===0&&e.jsx(Nt,{title:"No payment methods",message:"No deposit methods are configured."}),!x&&v.map(m=>e.jsxs("button",{onClick:()=>n(m.id),className:`w-full flex items-center gap-3 p-4 rounded-lg border-2 transition-colors ${a===m.id?"border-blue-700 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[m.id==="bank_transfer"?e.jsx(Hs,{className:"w-6 h-6 text-gray-700"}):m.id==="crypto"?e.jsx(Zt,{className:"w-6 h-6 text-gray-700"}):e.jsx(wr,{className:"w-6 h-6 text-gray-700"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-gray-900",children:m.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.processingTime??"","  Fee: ",typeof m.fees?.deposit=="string"?m.fees.deposit:m.fees?.deposit??0]})]})]},m.id))]}),_===2&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx(je,{htmlFor:"depositAmount",className:"text-gray-700 mb-2 block",children:"Deposit Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx(fe,{id:"depositAmount",type:"number",value:i,onChange:m=>l(m.target.value),placeholder:"0.00",className:"pl-7 h-12 text-lg font-mono",min:"10"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum deposit: $10"})]}),_===2&&e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[100,500,1e3,5e3].map(m=>e.jsxs("button",{onClick:()=>l(m.toString()),className:"py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-900 transition-colors",children:["$",m]},m))}),_===2&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(E,{className:"h-12 bg-gray-100 text-gray-900 hover:bg-gray-200",onClick:async()=>{if(i)try{Ne(!0);const m=await dr({amount:parseFloat(i),type:"deposit",method:a==="crypto"?"crypto":"bank_transfer",currency:a==="bank_transfer"?"INR":"USD"});C(m)}catch{}finally{Ne(!1)}},children:q?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Previewing..."})]}):"Preview Fees"}),D&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Fee: ",D.fee,"  Total: ",D.total]})]}),_===2&&e.jsx(E,{className:"w-full h-12 bg-green-600 hover:bg-green-700 text-white rounded-lg",disabled:!i||parseFloat(i)<10,onClick:()=>ie(3),children:"Continue"}),_===3&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6 border",children:[a==="bank_transfer"&&x&&e.jsxs("div",{className:"space-y-2","aria-busy":"true","aria-live":"polite",children:[e.jsx(Te,{className:"h-4 w-1/4"}),e.jsx(Te,{className:"h-3 w-1/3"})]}),a==="bank_transfer"&&!x&&!y&&e.jsx(Nt,{title:"Bank details unavailable",message:"Please try crypto deposit or contact support."}),a==="bank_transfer"&&y&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-900",children:"Bank Details"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.bankName,"  ",y.accountNumber]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{className:"bg-gray-100 text-gray-900 hover:bg-gray-200",onClick:()=>{navigator.clipboard.writeText(`${y.bankName} ${y.accountNumber}`),Y({message:"Copied bank details",type:"info"})},children:"Copy"}),e.jsx(E,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:async()=>{try{U(!0);const m=parseFloat(i),ae=await ur({amount:m,currency:"INR",paymentMethod:"banktransfer",paymentDetails:{accountHolderName:"Your Name",bankName:y?.bankName||"HDFC",accountNumber:"XXXX",routingNumber:y?.routingNumber||"IFSC",swiftCode:y?.swiftCode||"HDFCINBB"}});ae?.transaction?.transactionId?(xe(ae.transaction.transactionId),Y({message:"Deposit created",type:"success"}),ie(4)):Y({message:"Deposit creation failed",type:"error"})}catch{Y({message:"Deposit creation failed",type:"error"})}finally{U(!1)}},children:W?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Processing..."})]}):"I have paid"})]})]}),a==="crypto"&&x&&e.jsxs("div",{className:"space-y-2","aria-busy":"true","aria-live":"polite",children:[e.jsx(Te,{className:"h-4 w-1/3"}),e.jsx(Te,{className:"h-3 w-1/2"})]}),a==="crypto"&&!x&&!b&&e.jsx(Nt,{title:"Crypto address unavailable",message:"Please choose bank transfer or try again later."}),a==="crypto"&&b&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-900",children:"USDT TRC20 Address"}),e.jsx("p",{className:"text-sm font-mono text-gray-700 break-all",children:b.address}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{className:"bg-gray-100 text-gray-900 hover:bg-gray-200",onClick:()=>{navigator.clipboard.writeText(b.address),Y({message:"Address copied",type:"info"})},children:"Copy"}),e.jsx(E,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:async()=>{try{U(!0);const m=parseFloat(i),ae=await ur({amount:m,paymentMethod:"usdt_trc20",paymentDetails:{asset:"USDT",chain:"TRC20"}});ae?.transaction?.transactionId?(xe(ae.transaction.transactionId),Y({message:"Deposit created",type:"success"}),ie(4)):Y({message:"Deposit creation failed",type:"error"})}catch{Y({message:"Deposit creation failed",type:"error"})}finally{U(!1)}},children:W?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Processing..."})]}):"I have transferred"})]})]})]}),_===4&&e.jsx("div",{className:"bg-white rounded-lg p-4 mb-6 border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(je,{className:"text-gray-700",children:a==="crypto"?"TRX ID":"UTR Number"}),e.jsx(fe,{type:"text",value:J,onChange:m=>ne(m.target.value),placeholder:a==="crypto"?"Enter TRX transaction ID":"Enter UTR number"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(E,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:async()=>{if(!re){Y({message:"No transaction to verify",type:"error"});return}try{H(!0);const m=await xc(re,{utrNumber:J,notes:"Paid"});Y({message:"Verification submitted",type:"success"}),ie(5)}catch{Y({message:"Verification failed",type:"error"})}finally{H(!1)}},children:de?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Submitting..."})]}):"Submit Verification"})})]})}),_===5&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-green-900",children:"Deposit flow completed"}),e.jsxs("p",{className:"text-sm text-green-800",children:["Transaction: ",re||"N/A"]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx(E,{className:"bg-white text-gray-900 border",onClick:()=>r("overview"),children:"Back to Wallet"}),e.jsx(E,{className:"bg-gray-100 text-gray-900",onClick:()=>{ie(1),l(""),C(null),ne(""),xe("")},children:"New Deposit"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[_>1&&_<5&&e.jsx(E,{className:"bg-white text-gray-900 border",onClick:()=>ie(_-1),children:"Back"}),_===1&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",onClick:()=>ie(2),children:"Next"})]}),G&&e.jsx(It,{message:G.message,type:G.type,onClose:()=>Y(null)})]})}):t==="withdraw"?e.jsx("div",{className:"pb-20 md:pb-8",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>r("overview"),className:"text-blue-700 hover:text-blue-800 mb-4",children:" Back to Wallet"}),e.jsx("h2",{className:"text-gray-900 mb-2",children:"Withdraw Funds"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:`${M>=1?"text-blue-700":""}`,children:"Amount"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${M>=2?"text-blue-700":""}`,children:"Method"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${M>=3?"text-blue-700":""}`,children:"Destination"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${M>=4?"text-blue-700":""}`,children:"Confirm"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${M>=5?"text-blue-700":""}`,children:"Done"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Available balance: ",Pe(p.availableToTransfer)]}),M===1&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx(je,{htmlFor:"withdrawAmount",className:"text-gray-700 mb-2 block",children:"Withdrawal Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx(fe,{id:"withdrawAmount",type:"number",value:d,onChange:m=>c(m.target.value),placeholder:"0.00",className:"pl-7 h-12 text-lg font-mono",min:"10",max:p.availableToTransfer})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum withdrawal: $10  Processing time: 1-2 business days"})]}),M===2&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6",children:[e.jsx(je,{className:"text-gray-700 mb-3 block",children:"Withdraw method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>Q("bank_transfer"),className:`w-full flex items-center justify-between p-3 border rounded-lg ${se==="bank_transfer"?"border-blue-700":"border-gray-200 hover:border-blue-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hs,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-gray-900",children:"Bank Transfer (INR)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Fee: 25 eq"})]})]})}),e.jsx("button",{onClick:()=>Q("crypto"),className:`w-full flex items-center justify-between p-3 border rounded-lg ${se==="crypto"?"border-blue-700":"border-gray-200 hover:border-blue-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zt,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-gray-900",children:"USDT (TRC20)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Network fee applies"})]})]})})]})]}),M<=3&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-orange-900",children:[e.jsx("strong",{children:"Important:"})," Withdrawals are processed within 1-2 business days. You'll receive an email confirmation once processed."]})}),M===1&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(E,{className:"h-12 bg-gray-100 text-gray-900 hover:bg-gray-200",onClick:async()=>{if(d)try{Ne(!0);const m=await dr({amount:parseFloat(d),type:"withdrawal",method:se==="crypto"?"crypto":"bank_transfer",currency:se==="bank_transfer"?"INR":"USD"});C(m)}catch{}finally{Ne(!1)}},children:q?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Previewing..."})]}):"Preview Fees"}),D&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Fee: ",D.fee,"  Net: ",D.netAmount]})]}),M===3&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6 border",children:[se==="bank_transfer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"text-gray-700",children:"Bank Details"}),e.jsx(fe,{placeholder:"Bank Name",value:$.bankName,onChange:m=>T({...$,bankName:m.target.value})}),e.jsx(fe,{placeholder:"Account Number",value:$.accountNumber,onChange:m=>T({...$,accountNumber:m.target.value})}),e.jsx(fe,{placeholder:"IFSC / Routing",value:$.routingNumber,onChange:m=>T({...$,routingNumber:m.target.value})}),e.jsx(fe,{placeholder:"SWIFT Code",value:$.swiftCode,onChange:m=>T({...$,swiftCode:m.target.value})}),e.jsx(fe,{placeholder:"Account Holder Name",value:$.accountHolderName,onChange:m=>T({...$,accountHolderName:m.target.value})})]}),se==="crypto"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"text-gray-700",children:"USDT TRC20 Address"}),e.jsx(fe,{placeholder:"T...",value:V.walletAddress,onChange:m=>ye({...V,walletAddress:m.target.value})})]})]}),M===4&&e.jsx(E,{className:"w-full h-12 bg-blue-700 hover:bg-blue-800 text-white rounded-lg",disabled:!d||parseFloat(d)<10||parseFloat(d)>p.availableToTransfer,onClick:async()=>{const m=parseFloat(d);try{N(!0);let ae;se==="crypto"?ae=await hr({amount:m,paymentMethod:"crypto",paymentDetails:{walletAddress:V.walletAddress,asset:"USDT",chain:"TRC20"}}):ae=await hr({amount:m,currency:"INR",paymentMethod:"bank_transfer",paymentDetails:{bankName:$.bankName,accountNumber:$.accountNumber,routingNumber:$.routingNumber,swiftCode:$.swiftCode,accountHolderName:$.accountHolderName}}),Y({message:"Withdrawal requested",type:"success"}),ge(5)}catch{Y({message:"Withdrawal failed",type:"error"})}finally{N(!1)}},children:Se?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Requesting..."})]}):"Request Withdrawal"}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[M>1&&M<5&&e.jsx(E,{className:"bg-white text-gray-900 border",onClick:()=>ge(M-1),children:"Back"}),M===1&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",disabled:!d||parseFloat(d)<10,onClick:()=>ge(2),children:"Next"}),M===2&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",onClick:()=>ge(3),children:"Next"}),M===3&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",onClick:()=>ge(4),children:"Next"})]}),G&&e.jsx(It,{message:G.message,type:G.type,onClose:()=>Y(null)})]})}):t==="transfer"?e.jsx("div",{className:"pb-20 md:pb-8",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>r("overview"),className:"text-blue-700 hover:text-blue-800 mb-4",children:" Back to Wallet"}),e.jsx("h2",{className:"text-gray-900 mb-2",children:"Transfer Funds"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-6",children:[e.jsx("span",{className:`${Z>=1?"text-blue-700":""}`,children:"Direction"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${Z>=2?"text-blue-700":""}`,children:"Amount"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${Z>=3?"text-blue-700":""}`,children:"Account"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${Z>=4?"text-blue-700":""}`,children:"Confirm"}),e.jsx("span",{children:""}),e.jsx("span",{className:`${Z>=5?"text-blue-700":""}`,children:"Done"})]}),Z===1&&e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("button",{onClick:()=>F("wallet_to_account"),className:`w-full flex items-center gap-3 p-4 rounded-lg border-2 transition-colors ${L==="wallet_to_account"?"border-blue-700 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-gray-900",children:"Wallet  Trading Account"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Instant internal transfer"})]})}),e.jsx("button",{onClick:()=>F("account_to_wallet"),className:`w-full flex items-center gap-3 p-4 rounded-lg border-2 transition-colors ${L==="account_to_wallet"?"border-blue-700 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-gray-900",children:"Trading Account  Wallet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Subject to free margin"})]})})]}),Z===2&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx(je,{className:"text-gray-700 mb-2 block",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx(fe,{type:"number",value:ue,onChange:m=>g(m.target.value),placeholder:"0.00",className:"pl-7 h-12 text-lg font-mono",min:"10"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum transfer: $10"})]}),Z===3&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6",children:[e.jsx(je,{className:"text-gray-700 mb-3 block",children:"Select trading account"}),e.jsxs("div",{className:"space-y-2",children:[x&&e.jsx("div",{className:"space-y-2","aria-busy":"true","aria-live":"polite",children:Array.from({length:2}).map((m,ae)=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Te,{className:"h-4 w-1/3 mb-2"}),e.jsx(Te,{className:"h-3 w-1/4"})]})]})},ae))}),!x&&S.length===0&&e.jsx(Nt,{title:"No accounts found",message:"Create a trading account to transfer funds."}),!x&&S.map(m=>e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>te(m._id),onKeyDown:ae=>{ae.key==="Enter"&&te(m._id)},className:`w-full flex items-center justify-between p-3 border rounded-lg cursor-pointer ${A===m._id?"border-blue-700":"border-gray-200 hover:border-blue-700"}`,children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"text-gray-900",children:[m.accountNumber,"  ",m.accountType.toUpperCase()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Balance: ",Pe(m.balance),"  Leverage: ",m.leverage,"  ",m.status]})]}),e.jsx("span",{className:"text-xs text-blue-700 underline",onClick:ae=>{ae.stopPropagation(),navigator.clipboard.writeText(m.accountNumber)},children:"Copy"})]},m._id))]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(je,{className:"text-gray-700 mb-2 block",children:"Reason (optional)"}),e.jsx(fe,{placeholder:"Reason",value:ve,onChange:m=>we(m.target.value)})]})]}),Z===4&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6 border",children:[e.jsx("p",{className:"text-gray-900 mb-2",children:"Confirm Transfer"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Direction: ",L==="wallet_to_account"?"Wallet  Account":"Account  Wallet"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Amount: ",ue||"0.00"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Account: ",S.find(m=>m._id===A)?.accountNumber||"N/A"]}),ke&&e.jsx("div",{className:"mt-2 text-sm text-red-700 bg-red-50 border border-red-200 rounded p-2",children:ke}),e.jsx("div",{className:"mt-3",children:e.jsx(E,{className:"w-full bg-blue-700 hover:bg-blue-800 text-white",onClick:async()=>{const m=parseFloat(ue||"0");if(!A||!m||m<10){z("Please select account and enter a valid amount");return}if(L==="wallet_to_account"&&m>p.availableToTransfer){z("Insufficient wallet balance");return}try{if(ce(!0),L==="wallet_to_account"){const Ee={accountId:A,amount:m};ve&&ve.trim().length>0&&(Ee.reason=ve.trim()),await uc(Ee)}else{const Ee={accountId:A,amount:m};ve&&ve.trim().length>0&&(Ee.reason=ve.trim()),await hc(Ee)}z(""),j(5);const ae=await cr();f({balance:ae.balance,availableToTransfer:ae.availableToTransfer,pendingTransactions:ae.pendingTransactions})}catch(ae){const Ee=ae?.error?.message||ae?.message||"Transfer failed";z(Ee)}finally{ce(!1)}},children:K?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Confirming..."})]}):"Confirm Transfer"})})]}),Z===5&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-green-900",children:"Transfer completed"}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx(E,{className:"bg-white text-gray-900 border",onClick:()=>r("overview"),children:"Back to Wallet"}),e.jsx(E,{className:"bg-gray-100 text-gray-900",onClick:()=>{j(1),g(""),te(""),we("")},children:"New Transfer"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[Z>1&&Z<5&&e.jsx(E,{className:"bg-white text-gray-900 border",onClick:()=>j(Z-1),children:"Back"}),Z===1&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",onClick:()=>j(2),children:"Next"}),Z===2&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",disabled:!ue||parseFloat(ue)<10,onClick:()=>j(3),children:"Next"}),Z===3&&e.jsx(E,{className:"bg-blue-700 hover:bg-blue-800 text-white",disabled:!A,onClick:()=>j(4),children:"Next"})]})]})}):e.jsx("div",{className:"pb-20 md:pb-8",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-blue-900 rounded-xl p-6 text-white mb-4",children:[e.jsx("p",{className:"text-blue-100 mb-2",children:"Current Balance"}),x?e.jsxs("div",{children:[e.jsx(Te,{className:"h-8 w-1/3 mb-4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"h-4 w-2/3 mb-1"}),e.jsx(Te,{className:"h-5 w-1/2"})]}),e.jsxs("div",{children:[e.jsx(Te,{className:"h-4 w-2/3 mb-1"}),e.jsx(Te,{className:"h-5 w-1/2"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-white mb-4",children:Pe(p.balance)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-200 mb-1",children:"Available to Transfer"}),e.jsx("p",{className:"text-white",children:Pe(p.availableToTransfer)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-200 mb-1",children:"Pending Transactions"}),e.jsx("p",{className:"text-white",children:p.pendingTransactions})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>r("deposit"),className:"flex flex-col items-center justify-center bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-2",children:e.jsx(gs,{className:"w-6 h-6 text-green-700"})}),e.jsx("span",{className:"text-gray-900",children:"Deposit"})]}),e.jsxs("button",{onClick:()=>r("withdraw"),className:"flex flex-col items-center justify-center bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-2",children:e.jsx(bs,{className:"w-6 h-6 text-blue-700"})}),e.jsx("span",{className:"text-gray-900",children:"Withdraw"})]}),e.jsxs("button",{onClick:()=>r("transfer"),className:"flex flex-col items-center justify-center bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-2",children:e.jsx(Bt,{className:"w-6 h-6 text-purple-700"})}),e.jsx("span",{className:"text-gray-900",children:"Transfer"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900",children:"Transaction History"}),e.jsx("button",{onClick:()=>s("transactions"),className:"text-sm text-blue-700 hover:text-blue-800",children:"View All"})]}),e.jsxs("div",{className:"space-y-2",children:[x&&e.jsx("div",{className:"space-y-2","aria-busy":"true","aria-live":"polite",children:Array.from({length:3}).map((m,ae)=>e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Te,{className:"h-4 w-1/3 mb-2"}),e.jsx(Te,{className:"h-3 w-1/4"})]})]})},ae))}),!x&&h.length===0&&e.jsx(Nt,{title:"No recent transactions",message:"Your latest transactions will appear here",actionLabel:"View All",onAction:()=>s("transactions")}),!x&&h.map(m=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${m.type==="deposit"?"bg-green-100":m.type==="withdrawal"?"bg-blue-100":m.type==="bonus"?"bg-yellow-100":"bg-purple-100"}`,children:[m.type==="deposit"&&e.jsx(gs,{className:"w-5 h-5 text-green-700"}),m.type==="withdrawal"&&e.jsx(bs,{className:"w-5 h-5 text-blue-700"}),m.type==="bonus"&&e.jsx(ns,{className:"w-5 h-5 text-yellow-700"}),m.type==="fee"&&e.jsx(di,{className:"w-5 h-5 text-purple-700"}),m.type==="profit_loss"&&e.jsx(Bt,{className:"w-5 h-5 text-purple-700"}),m.type==="wallet_to_account"&&e.jsx(Bt,{className:"w-5 h-5 text-purple-700"}),m.type==="account_to_wallet"&&e.jsx(Bt,{className:"w-5 h-5 text-purple-700"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:m.type==="profit_loss"?`Trade ${m.symbol}  ${m.volume??0} lots @ ${m.price??""}`:m.type.charAt(0).toUpperCase()+m.type.slice(1)}),e.jsx("p",{className:"text-xs text-gray-500",children:m.accountNumber?`Account ${m.accountNumber}`:""})]})]}),e.jsxs("div",{className:"text-right",children:[(()=>{const ae=m.direction==="debit"||m.type==="fee"||m.netAmount<0,Ee=ae?"-":"+",nt=Math.abs(m.netAmount);return e.jsxs("p",{className:ae?"text-red-600":"text-green-600",children:[Ee,Pe(nt,m.currency)]})})(),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${m.status==="completed"?"bg-green-100 text-green-700":m.status==="pending"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:m.status})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:Os(m.createdAt)})]},m.id))]})]})]})})}function Le({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:me("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",s),...t})}function At({className:s,compact:t,...r}){return e.jsx("div",{"data-slot":"card-header",className:me("flex items-start justify-between gap-4",t?"px-4 py-3":"px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...r})}function Tt({className:s,...t}){return e.jsx("h4",{"data-slot":"card-title",className:me("leading-none",s),...t})}function Ca({className:s,...t}){return e.jsx("p",{"data-slot":"card-description",className:me("text-sm text-muted-foreground",s),...t})}function tt({className:s,compact:t,...r}){return e.jsx("div",{"data-slot":"card-content",className:me("flex-1",t?"px-4 pb-4":"px-6 pb-6",s),...r})}const bc=Ar("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Et({className:s,variant:t,asChild:r=!1,...a}){const n=r?_r:"span";return e.jsx(n,{"data-slot":"badge",className:me(bc({variant:t}),s),...a})}function yc({onBack:s}){const[t,r]=o.useState(!0),[a,n]=o.useState(!1),[i,l]=o.useState(""),[d,c]=o.useState(""),[h,u]=o.useState(""),[p,f]=o.useState(""),[v,w]=o.useState(""),[y,P]=o.useState("");o.useEffect(()=>{(async()=>{const I=await Dt();l(I.firstName||""),c(I.lastName||""),u(I.phone||""),f(I.country||""),w(I.timezone||"UTC"),r(!1)})()},[]);const b=async()=>{n(!0),P("");try{await ee("/api/v1/users/profile",{method:"PUT",headers:be(),body:{firstName:i,lastName:d,phone:h,country:p,timezone:v}}),P("Profile updated")}catch(I){P(I?.message||"Failed to update profile")}finally{n(!1)}};return t?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-blue-900 p-6 text-white",children:[e.jsx("button",{onClick:s,className:"mb-4 text-white/80 hover:text-white",children:" Back"}),e.jsx("h1",{className:"text-2xl font-semibold",children:"Profile Information"})]}),e.jsx("div",{className:"p-4 text-gray-700",children:"Loading..."})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-blue-900 p-6 text-white",children:[e.jsx("button",{onClick:s,className:"mb-4 text-white/80 hover:text-white",children:" Back"}),e.jsx("h1",{className:"text-2xl font-semibold",children:"Profile Information"}),e.jsx("p",{className:"text-white/90",children:"Keep your account details up to date for a better experience"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs(Le,{children:[e.jsxs(At,{children:[e.jsx(Tt,{className:"text-lg",children:"Personal Details"}),e.jsx(Ca,{children:"Basic information associated with your account"})]}),e.jsxs(tt,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"First Name"}),e.jsx(fe,{placeholder:"First Name",value:i,onChange:I=>l(I.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Last Name"}),e.jsx(fe,{placeholder:"Last Name",value:d,onChange:I=>c(I.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Phone"}),e.jsx(fe,{type:"tel",inputMode:"tel",autoComplete:"tel",placeholder:"Phone",value:h,onChange:I=>u(I.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Country (e.g., IN)"}),e.jsx(fe,{placeholder:"Country",value:p,onChange:I=>f(I.target.value.toUpperCase())})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Timezone"}),e.jsxs(St,{value:v,onValueChange:w,children:[e.jsx(Pt,{className:"w-full bg-white text-gray-700 justify-center data-[placeholder]:text-gray-500",children:e.jsx(Ct,{placeholder:"Timezone",className:"w-full text-center text-gray-700"})}),e.jsxs(_t,{className:"bg-white text-gray-700",children:[e.jsx(Ie,{value:"UTC",className:"text-gray-700",children:"UTC"}),e.jsx(Ie,{value:"Asia/Kolkata",className:"text-gray-700",children:"Asia/Kolkata"}),e.jsx(Ie,{value:"Europe/London",className:"text-gray-700",children:"Europe/London"}),e.jsx(Ie,{value:"America/New_York",className:"text-gray-700",children:"America/New_York"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3 px-2 py-2",children:[y&&e.jsx(Et,{className:"bg-green-100 text-green-700",children:y}),e.jsx(E,{className:"h-11 px-6 rounded-lg bg-blue-700 hover:bg-blue-800 text-white",onClick:b,disabled:a,children:a?"Saving...":"Save Changes"})]})]})]}),e.jsxs(Le,{children:[e.jsxs(At,{children:[e.jsx(Tt,{className:"text-lg text-blue-700",children:"Tips"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Ensure your name matches your KYC documents"})]}),e.jsx(tt,{children:e.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"Use your legal first and last name"}),e.jsx("li",{children:"Provide a reachable phone number for account notifications"}),e.jsx("li",{children:"Timezone helps us show times correctly across transactions"})]})})]})]})]})}function vc({onBack:s}){const[t,r]=o.useState(!0),[a,n]=o.useState(!1),[i,l]=o.useState(""),[d,c]=o.useState(null),[h,u]=o.useState(null),[p,f]=o.useState("");o.useEffect(()=>{(async()=>{const y=await Dt();n(!!y.twoFactorEnabled),r(!1)})()},[]);const v=async()=>{f("");const y=$e()||"";try{const P=await zo({token:y,password:i});u(P.secret),c(P.qrCode),f("2FA enabled. Scan QR in your authenticator app."),n(!0)}catch(P){f(P?.message||"Failed to enable 2FA")}},w=async()=>{f("");const y=$e()||"";try{await Uo({token:y,password:i}),u(null),c(null),n(!1),f("2FA disabled")}catch(P){f(P?.message||"Failed to disable 2FA")}};return t?e.jsx("div",{className:"p-4 text-gray-700",children:"Loading..."}):e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Security & Verification"}),e.jsx("button",{onClick:s,className:"text-gray-700 hover:text-gray-900",children:"Back"})]}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Current Password",type:"password",value:i,onChange:y=>l(y.target.value)}),a?e.jsx(E,{onClick:w,className:"bg-red-600 text-white",children:"Disable 2FA"}):e.jsx(E,{onClick:v,className:"bg-blue-700 text-white",children:"Enable 2FA"}),h&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Secret: ",h]}),d&&e.jsx("img",{src:d,alt:"QR Code",className:"w-40 h-40"}),p&&e.jsx("div",{className:"text-sm text-gray-600",children:p})]})}function wc({onBack:s}){const[t,r]=o.useState(""),[a,n]=o.useState(""),[i,l]=o.useState(""),[d,c]=o.useState(""),[h,u]=o.useState(!1),p=async()=>{u(!0),c("");try{const f=$e()||"";await Fo({currentPassword:t,newPassword:a,confirmPassword:i,accessToken:f}),c("Password changed successfully"),r(""),n(""),l("")}catch(f){c(f?.message||"Failed to change password")}finally{u(!1)}};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Change Password"}),e.jsx("button",{onClick:s,className:"text-gray-700 hover:text-gray-900",children:"Back"})]}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Current Password",type:"password",value:t,onChange:f=>r(f.target.value)}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"New Password",type:"password",value:a,onChange:f=>n(f.target.value)}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Confirm Password",type:"password",value:i,onChange:f=>l(f.target.value)}),d&&e.jsx("div",{className:"text-sm text-gray-600",children:d}),e.jsx(E,{onClick:p,className:"bg-blue-700 text-white",disabled:h,children:h?"Saving...":"Save"})]})}async function Nc(){return(await ee("/api/v1/kyc/status",{method:"GET",headers:be()})).data}async function jc(s){const t=new FormData;return t.append("documentType",s.documentType),t.append("kycData",JSON.stringify(s.kycData)),s.documentFront&&t.append("documentFront",s.documentFront),s.documentBack&&t.append("documentBack",s.documentBack),s.selfie&&t.append("selfie",s.selfie),s.additional&&t.append("additional",s.additional),await Ro("/api/v1/kyc/submit",t,be())}const ct=[{id:"welcome",title:"Get Started",description:"Quick overview",icon:Sr,order:0},{id:"personal",title:"Personal Info",description:"Your details",icon:Qt,order:1},{id:"address",title:"Address",description:"Where you live",icon:ws,order:2},{id:"documents",title:"Documents",description:"ID proof",icon:et,order:3},{id:"selfie",title:"Selfie",description:"Photo verification",icon:qe,order:4},{id:"review",title:"Review",description:"Check & submit",icon:dt,order:5}];function kc(){const s=o.useRef(null),[t,r]=o.useState(null);return{videoRef:s,start:async(l="user")=>{try{const d=await navigator.mediaDevices.getUserMedia({video:{facingMode:l==="user"?"user":{ideal:"environment"}},audio:!1});r(d),s.current&&(s.current.srcObject=d,await s.current.play())}catch(d){console.error("Camera error:",d)}},stop:()=>{t?.getTracks().forEach(l=>l.stop()),r(null)},capture:()=>{if(!s.current)return null;const l=s.current,d=document.createElement("canvas");d.width=l.videoWidth||640,d.height=l.videoHeight||480;const c=d.getContext("2d");return c?(c.drawImage(l,0,0,d.width,d.height),new Promise(h=>{d.toBlob(u=>h(u),"image/png",.92)})):null},isActive:!!t}}function Sc({onBack:s}){const[t,r]=o.useState("welcome"),[a,n]=o.useState(null),[i,l]=o.useState(!0),[d,c]=o.useState(""),[h,u]=o.useState(""),[p,f]=o.useState(""),[v,w]=o.useState(""),[y,P]=o.useState(""),[b,I]=o.useState(""),[re,xe]=o.useState(""),[J,ne]=o.useState(""),[D,C]=o.useState(""),[_,ie]=o.useState("IN"),[G,Y]=o.useState(null),[M,ge]=o.useState(null),[se,Q]=o.useState(null),[$,T]=o.useState(null),[V,ye]=o.useState({}),[Z,j]=o.useState(""),[L,F]=o.useState(!1),[ue,g]=o.useState(!1),[S,k]=o.useState(null),[A,te]=o.useState(null),{videoRef:ve,start:we,stop:ke,capture:z}=kc();o.useEffect(()=>{(async()=>{try{const x=await Nc();n(x),(x?.verified||x?.status==="verified"||x?.status==="processing"||x?.status==="pending")&&r("submit")}catch(x){console.error("Failed to load KYC status:",x)}finally{l(!1)}})()},[]),o.useEffect(()=>(ue?we(S==="doc"?"environment":"user"):ke(),()=>ke()),[ue,S]);const q=()=>ct.findIndex(x=>x.id===t),Ne=(q()+1)/ct.length*100,W=()=>{const x={},he=/^[A-Z]{5}[0-9]{4}[A-Z]$/,m=/^[0-9]{12}$/;return he.test(d)||(x.panNumber="Invalid PAN format (e.g., ABCDE1234F)"),m.test(h)||(x.aadhaarNumber="Aadhaar must be 12 digits"),p.trim()||(x.firstName="First name is required"),v.trim()||(x.lastName="Last name is required"),y||(x.dateOfBirth="Date of birth is required"),ye(x),Object.keys(x).length===0},U=()=>{const x={};return b.trim()||(x.street="Street address is required"),re.trim()||(x.city="City is required"),J.trim()||(x.state="State is required"),D.trim()||(x.zipCode="Zip code is required"),ye(x),Object.keys(x).length===0},de=()=>!se||!G||!M?(j("Please upload PAN card and both sides of Aadhaar card"),!1):(j(""),!0),H=()=>$?(j(""),!0):(j("Please capture a selfie with your PAN card"),!1),Se=()=>{if(j(""),ye({}),t==="personal"&&!W()||t==="address"&&!U()||t==="documents"&&!de()||t==="selfie"&&!H())return;const x=q();x<ct.length-1&&r(ct[x+1].id)},N=()=>{const x=q();x>0&&r(ct[x-1].id)},K=async x=>{const he=await z();he&&(x==="pan"?Q(new File([he],"pan-card.png",{type:"image/png"})):x==="aadhaar-front"?Y(new File([he],"aadhaar-front.png",{type:"image/png"})):x==="aadhaar-back"?ge(new File([he],"aadhaar-back.png",{type:"image/png"})):T(he),g(!1),k(null))},ce=async()=>{F(!0),j("");try{const x={panNumber:d,aadhaarNumber:h,firstName:p,lastName:v,dateOfBirth:y,address:{street:b,city:re,state:J,postalCode:D,country:_}},he=$?new File([$],"selfie.png",{type:"image/png"}):null;await jc({documentType:"pan_card",kycData:x,documentFront:se||G,documentBack:M,selfie:he}),r("submit")}catch(x){j(x?.message||"Submission failed. Please try again.")}finally{F(!1)}};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-700 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading verification status..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"text-white p-6 pb-8",style:{background:"#ef5b2a"},children:[e.jsxs("button",{onClick:s,className:"mb-4 text-white/90 hover:text-white flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Gs,{className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Identity Verification"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Secure your account in just a few steps"})]})]}),t!=="welcome"&&t!=="submit"&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{className:"text-blue-100",children:["Step ",q()+1," of ",ct.length]}),e.jsxs("span",{className:"text-blue-100",children:[Math.round(Ne),"% complete"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-white h-full rounded-full transition-all duration-500",style:{width:`${Ne}%`}})})]})]}),e.jsxs("div",{className:"p-4 pb-24 max-w-2xl mx-auto",children:[t==="welcome"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsxs(Le,{className:"p-6 bg-white",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Sr,{className:"w-10 h-10 text-blue-700"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Let's verify your identity"}),e.jsx("p",{className:"text-gray-600",children:"This quick process helps keep your account secure and unlocks all platform features."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-lg",children:[e.jsx(ys,{className:"w-5 h-5 text-blue-700 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Takes 5 minutes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Quick and easy verification process"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 rounded-lg",children:[e.jsx(Gs,{className:"w-5 h-5 text-green-700 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Secure & encrypted"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your data is protected with bank-level security"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-purple-50 rounded-lg",children:[e.jsx(dt,{className:"w-5 h-5 text-purple-700 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Unlock full access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Higher limits, all payment methods, priority support"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-gray-700"}),"What you'll need"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-green-600"}),"PAN Card (Permanent Account Number)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-green-600"}),"Aadhaar Card (both sides)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-green-600"}),"A clear selfie with your PAN card"]})]})]}),e.jsxs(E,{onClick:()=>r("personal"),className:"w-full h-12 bg-blue-700 hover:bg-blue-800 text-white",children:["Get Started",e.jsx(gt,{className:"w-5 h-5 ml-2"})]})]})}),t==="personal"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsxs(Le,{className:"p-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Qt,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter details exactly as they appear on your PAN card"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"panNumber",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["PAN Number",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"panNumber",value:d,onChange:x=>c(x.target.value.toUpperCase()),placeholder:"ABCDE1234F",className:`h-12 ${V.panNumber?"border-red-400":""}`,maxLength:10}),V.panNumber&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"}),V.panNumber]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 5 letters, 4 digits, 1 letter"})]}),e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"aadhaarNumber",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["Aadhaar Number",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"aadhaarNumber",value:h,onChange:x=>u(x.target.value.replace(/\D/g,"")),placeholder:"1234 5678 9012",className:`h-12 ${V.aadhaarNumber?"border-red-400":""}`,maxLength:12}),V.aadhaarNumber&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"}),V.aadhaarNumber]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"12-digit Aadhaar number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"firstName",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["First Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"firstName",value:p,onChange:x=>f(x.target.value),placeholder:"John",className:`h-12 ${V.firstName?"border-red-400":""}`}),V.firstName&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.firstName]})]}),e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"lastName",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["Last Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"lastName",value:v,onChange:x=>w(x.target.value),placeholder:"Doe",className:`h-12 ${V.lastName?"border-red-400":""}`}),V.lastName&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.lastName]})]})]}),e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"dateOfBirth",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["Date of Birth",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"dateOfBirth",type:"date",value:y,onChange:x=>P(x.target.value),className:`h-12 ${V.dateOfBirth?"border-red-400":""}`}),V.dateOfBirth&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.dateOfBirth]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(E,{onClick:N,variant:"outline",className:"flex-1 h-12",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs(E,{onClick:Se,className:"flex-1 h-12 bg-blue-700 hover:bg-blue-800",children:["Continue",e.jsx(gt,{className:"w-5 h-5 ml-2"})]})]})]})}),t==="address"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsxs(Le,{className:"p-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ws,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Address Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your residential address for verification"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"street",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["Street Address",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"street",value:b,onChange:x=>I(x.target.value),placeholder:"123 Main Street, Apartment 4B",className:`h-12 ${V.street?"border-red-400":""}`}),V.street&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.street]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"city",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["City",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"city",value:re,onChange:x=>xe(x.target.value),placeholder:"Mumbai",className:`h-12 ${V.city?"border-red-400":""}`}),V.city&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.city]})]}),e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"state",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["State",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"state",value:J,onChange:x=>ne(x.target.value),placeholder:"Maharashtra",className:`h-12 ${V.state?"border-red-400":""}`}),V.state&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.state]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(je,{htmlFor:"zipCode",className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:["PIN Code",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(fe,{id:"zipCode",value:D,onChange:x=>C(x.target.value.replace(/\D/g,"")),placeholder:"400001",className:`h-12 ${V.zipCode?"border-red-400":""}`,maxLength:6}),V.zipCode&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),V.zipCode]})]}),e.jsxs("div",{children:[e.jsx(je,{htmlFor:"country",className:"text-gray-700 font-medium mb-2",children:"Country"}),e.jsx(fe,{id:"country",value:_,disabled:!0,className:"h-12 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(E,{onClick:N,variant:"outline",className:"flex-1 h-12",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs(E,{onClick:Se,className:"flex-1 h-12 bg-blue-700 hover:bg-blue-800",children:["Continue",e.jsx(gt,{className:"w-5 h-5 ml-2"})]})]})]})}),t==="documents"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsxs(Le,{className:"p-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(et,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Upload Documents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clear photos of your PAN & Aadhaar card"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-blue-700 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Tips for good photos:"}),e.jsxs("ul",{className:"space-y-1 text-blue-800",children:[e.jsx("li",{children:" Place document on a flat, contrasting surface"}),e.jsx("li",{children:" Ensure all text is clearly readable"}),e.jsx("li",{children:" Avoid glare and shadows"}),e.jsx("li",{children:" Capture all four corners of the card"})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(je,{className:"text-gray-700 font-medium mb-3 block flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-gray-600"}),"PAN Card (Front Side) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),se?e.jsxs("div",{className:"relative border-2 border-green-500 rounded-lg overflow-hidden bg-gray-50",children:[e.jsx("img",{src:URL.createObjectURL(se),alt:"PAN Card",className:"w-full"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsxs("button",{onClick:()=>{Q(null),g(!0),k("doc"),te("pan")},className:"bg-blue-600 text-white px-3 py-1.5 rounded-full hover:bg-blue-700 text-sm flex items-center gap-1",children:[e.jsx(qe,{className:"w-4 h-4"}),"Retake"]}),e.jsx("button",{onClick:()=>Q(null),className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),"PAN Card Uploaded"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{g(!0),k("doc"),te("pan")},className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsx(qe,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Take Photo"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Capture PAN card"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x=>Q(x.target.files?.[0]||null),className:"absolute inset-0 opacity-0 cursor-pointer",id:"upload-pan"}),e.jsxs("label",{htmlFor:"upload-pan",className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer flex items-center justify-center gap-3",children:[e.jsx(ds,{className:"w-6 h-6 text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"Upload from Gallery"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG (max 5MB)"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs(je,{className:"text-gray-700 font-medium mb-3 block flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-gray-600"}),"Aadhaar Card (Front Side) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),G?e.jsxs("div",{className:"relative border-2 border-green-500 rounded-lg overflow-hidden bg-gray-50",children:[e.jsx("img",{src:URL.createObjectURL(G),alt:"Aadhaar Front",className:"w-full"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsxs("button",{onClick:()=>{Y(null),g(!0),k("doc"),te("aadhaar-front")},className:"bg-blue-600 text-white px-3 py-1.5 rounded-full hover:bg-blue-700 text-sm flex items-center gap-1",children:[e.jsx(qe,{className:"w-4 h-4"}),"Retake"]}),e.jsx("button",{onClick:()=>Y(null),className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Aadhaar Front Uploaded"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{g(!0),k("doc"),te("aadhaar-front")},className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsx(qe,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Take Photo"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Capture front side with photo"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x=>Y(x.target.files?.[0]||null),className:"absolute inset-0 opacity-0 cursor-pointer",id:"upload-aadhaar-front"}),e.jsxs("label",{htmlFor:"upload-aadhaar-front",className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer flex items-center justify-center gap-3",children:[e.jsx(ds,{className:"w-6 h-6 text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"Upload from Gallery"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG (max 5MB)"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs(je,{className:"text-gray-700 font-medium mb-3 block flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-gray-600"}),"Aadhaar Card (Back Side) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),M?e.jsxs("div",{className:"relative border-2 border-green-500 rounded-lg overflow-hidden bg-gray-50",children:[e.jsx("img",{src:URL.createObjectURL(M),alt:"Aadhaar Back",className:"w-full"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsxs("button",{onClick:()=>{ge(null),g(!0),k("doc"),te("aadhaar-back")},className:"bg-blue-600 text-white px-3 py-1.5 rounded-full hover:bg-blue-700 text-sm flex items-center gap-1",children:[e.jsx(qe,{className:"w-4 h-4"}),"Retake"]}),e.jsx("button",{onClick:()=>ge(null),className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Aadhaar Back Uploaded"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{g(!0),k("doc"),te("aadhaar-back")},className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsx(qe,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Take Photo"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Capture back side with address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x=>ge(x.target.files?.[0]||null),className:"absolute inset-0 opacity-0 cursor-pointer",id:"upload-aadhaar-back"}),e.jsxs("label",{htmlFor:"upload-aadhaar-back",className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer flex items-center justify-center gap-3",children:[e.jsx(ds,{className:"w-6 h-6 text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"Upload from Gallery"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG (max 5MB)"})]})]})]})]})]})]}),Z&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2 mt-6",children:[e.jsx(Re,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-900",children:Z})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(E,{onClick:N,variant:"outline",className:"flex-1 h-12",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs(E,{onClick:Se,className:"flex-1 h-12 bg-blue-700 hover:bg-blue-800",children:["Continue",e.jsx(gt,{className:"w-5 h-5 ml-2"})]})]})]})}),t==="selfie"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsxs(Le,{className:"p-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(qe,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Selfie Verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo holding your PAN card"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-blue-700 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"For a successful selfie:"}),e.jsxs("ul",{className:"space-y-1 text-blue-800",children:[e.jsx("li",{children:" Hold your PAN card next to your face"}),e.jsx("li",{children:" Make sure both your face and card are clearly visible"}),e.jsx("li",{children:" Good lighting, no hats or sunglasses"}),e.jsx("li",{children:" Look directly at the camera"})]})]})]})}),$?e.jsxs("div",{className:"relative border-2 border-green-500 rounded-lg overflow-hidden",children:[e.jsx("img",{src:URL.createObjectURL($),alt:"Selfie",className:"w-full"}),e.jsx("button",{onClick:()=>T(null),className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Captured"]})]}):e.jsxs("button",{onClick:()=>{g(!0),k("selfie")},className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-12 hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsx(qe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg mb-1",children:"Take Selfie with PAN Card"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click to open camera"})]}),Z&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2 mt-4",children:[e.jsx(Re,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-900",children:Z})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(E,{onClick:N,variant:"outline",className:"flex-1 h-12",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs(E,{onClick:Se,className:"flex-1 h-12 bg-blue-700 hover:bg-blue-800",children:["Continue",e.jsx(gt,{className:"w-5 h-5 ml-2"})]})]})]})}),t==="review"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsxs(Le,{className:"p-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(dt,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Review & Submit"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please verify all information is correct"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Re,{className:"w-5 h-5 text-yellow-700 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-900",children:[e.jsx("p",{className:"font-medium",children:"Important:"}),e.jsx("p",{children:"After submission, you cannot edit your information. Please review carefully."})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Qt,{className:"w-5 h-5"}),"Personal Information"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"PAN Number:"}),e.jsx("span",{className:"font-mono text-gray-900",children:d})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Aadhaar Number:"}),e.jsx("span",{className:"font-mono text-gray-900",children:h.replace(/(\d{4})(\d{4})(\d{4})/,"$1 $2 $3")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Full Name:"}),e.jsxs("span",{className:"text-gray-900",children:[p," ",v]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date of Birth:"}),e.jsx("span",{className:"text-gray-900",children:y})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"Address"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-900",children:[e.jsx("p",{children:b}),e.jsxs("p",{children:[re,", ",J," ",D]}),e.jsx("p",{children:_})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5"}),"Uploaded Documents"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[se&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(se),alt:"PAN Card",className:"w-full rounded-lg border"}),e.jsx(Et,{className:"absolute bottom-1 left-1 bg-green-600 text-white text-xs",children:"PAN"})]}),G&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(G),alt:"Aadhaar front",className:"w-full rounded-lg border"}),e.jsx(Et,{className:"absolute bottom-1 left-1 bg-green-600 text-white text-xs",children:"Aadhaar Front"})]}),M&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(M),alt:"Aadhaar back",className:"w-full rounded-lg border"}),e.jsx(Et,{className:"absolute bottom-1 left-1 bg-green-600 text-white text-xs",children:"Aadhaar Back"})]})]})]})]}),Z&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2 mt-4",children:[e.jsx(Re,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-900",children:Z})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(E,{onClick:N,variant:"outline",className:"flex-1 h-12",children:[e.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsx(E,{onClick:ce,disabled:L,className:"flex-1 h-12 bg-green-600 hover:bg-green-700 text-white",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Submit for Verification"]})})]})]})}),t==="submit"&&e.jsx("div",{className:"space-y-4 animate-fade-in",children:e.jsx(Le,{className:"p-8 bg-white text-center",children:a?.verified||a?.status==="verified"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(dt,{className:"w-12 h-12 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Complete!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your identity has been successfully verified."}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-green-900",children:" You now have full access to all platform features"}),e.jsx("p",{className:"text-sm text-green-900",children:" Higher trading and withdrawal limits"}),e.jsx("p",{className:"text-sm text-green-900",children:" All payment methods available"})]}),e.jsx(E,{onClick:s,className:"w-full h-12 bg-blue-700 hover:bg-blue-800",children:"Back to Settings"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ys,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification in Progress"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for submitting your documents. Our team is reviewing your information."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"What happens next?"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsx("span",{children:"Our team will review your documents within 1-3 business days"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsx("span",{children:"You'll receive an email notification once verification is complete"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsx("span",{children:"You can continue using your account with current limits"})]})]})]}),e.jsx(E,{onClick:s,variant:"outline",className:"w-full h-12",children:"Back to Settings"})]})})})]}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:S==="selfie"?"Take Selfie":"Capture Document"}),e.jsx("button",{onClick:()=>{g(!1),k(null)},className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(Ke,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"relative bg-black",children:e.jsx("video",{ref:ve,className:"w-full",muted:!0,playsInline:!0})}),e.jsxs("div",{className:"p-4 flex gap-3",children:[e.jsx(E,{onClick:()=>{g(!1),k(null)},variant:"outline",className:"flex-1",children:"Cancel"}),e.jsxs(E,{onClick:()=>{S==="selfie"?K("selfie"):A&&K(A)},className:"flex-1 bg-blue-700",children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),"Capture"]})]})]})})]})}function Cc({onBack:s}){const[t,r]=o.useState([]),[a,n]=o.useState({}),[i,l]=o.useState(""),[d,c]=o.useState("");o.useEffect(()=>{(async()=>{const u=await ee("/api/v1/payments/methods?includeDetails=true",{method:"GET",headers:be()});r(u.data);try{const p=await ee("/api/v1/payments/crypto-details?asset=USDT&network=TRC20",{method:"GET",headers:be()});l(p.data.address||"")}catch{}})()},[]);const h=()=>{localStorage.setItem("withdraw_bank_info",JSON.stringify(a)),localStorage.setItem("withdraw_usdt_address",i),c("Saved locally for faster withdrawals")};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"Payment Methods"}),e.jsx("button",{onClick:s,className:"text-gray-700 hover:text-gray-900",children:"Back"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-gray-900",children:"Available Methods"}),e.jsx("div",{className:"space-y-2",children:t.map(u=>e.jsxs("div",{className:"border border-gray-200 rounded p-3 text-sm",children:[e.jsx("div",{className:"font-medium",children:u.name}),e.jsx("div",{className:"text-gray-600",children:u.description}),u.bankDetails&&e.jsxs("div",{className:"text-gray-600",children:["Bank: ",u.bankDetails.bankName,"  Account: ",u.bankDetails.accountNumber]}),u.cryptoDetails?.usdt?.trc20Address&&e.jsxs("div",{className:"text-gray-600",children:["USDT TRC20: ",u.cryptoDetails.usdt.trc20Address]})]},u.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-gray-900",children:"Withdraw Preferences"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Bank Name",value:a.bankName||"",onChange:u=>n({...a,bankName:u.target.value})}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Account Number",value:a.accountNumber||"",onChange:u=>n({...a,accountNumber:u.target.value})}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Routing Number",value:a.routingNumber||"",onChange:u=>n({...a,routingNumber:u.target.value})}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"SWIFT Code",value:a.swiftCode||"",onChange:u=>n({...a,swiftCode:u.target.value})}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"Account Holder Name",value:a.accountHolderName||"",onChange:u=>n({...a,accountHolderName:u.target.value})})]}),e.jsx("input",{className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-gray-700 placeholder:text-gray-400",placeholder:"USDT TRC20 Address",value:i,onChange:u=>l(u.target.value)})]}),d&&e.jsx("div",{className:"text-sm text-gray-600",children:d}),e.jsx(E,{onClick:h,className:"bg-blue-700 text-white",children:"Save Preferences"})]})}function Pc({onBack:s,onCreateNew:t}){const[r,a]=o.useState(!0),[n,i]=o.useState(null),[l,d]=o.useState(null),[c,h]=o.useState([]),[u,p]=o.useState(20);o.useEffect(()=>{let v=!0;return(async()=>{try{const{summary:w,accounts:y}=await sl("active");if(!v)return;d(w),h(y)}catch(w){i(w?.message||"Failed to load accounts")}finally{a(!1)}})(),()=>{v=!1}},[]),o.useEffect(()=>{const v=new IntersectionObserver(y=>{for(const P of y)P.isIntersecting&&p(b=>b+20)},{rootMargin:"160px"}),w=document.getElementById("accounts-sentinel");return w&&v.observe(w),()=>v.disconnect()},[c.length]);const f=o.useMemo(()=>{const v=l||{};return{totalAccounts:v.totalAccounts??c.length,totalBalance:v.totalBalance??c.reduce((w,y)=>w+(y.balance||0),0),totalEquity:v.totalEquity??c.reduce((w,y)=>w+(y.equity||0),0),totalMarginUsed:v.totalMarginUsed??c.reduce((w,y)=>w+(y.margin||0),0),netDeposits:v.netDeposits??0}},[l,c]);return e.jsxs("div",{className:"pb-20 md:pb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-blue-900 text-white p-6 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white mb-1",children:"Accounts"}),e.jsx("p",{className:"text-blue-100",children:"Trading management"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:t,className:"px-3 py-2 bg-white text-blue-700 rounded-lg hover:bg-blue-50",children:"Create New Account"})})]}),r&&e.jsx("div",{className:"mt-3 bg-white/10 text-white rounded px-3 py-2 text-sm",children:"Loading"}),n&&e.jsx("div",{className:"mt-3 bg-red-500/20 text-white rounded px-3 py-2 text-sm",role:"alert",children:n})]}),e.jsxs("div",{className:"px-4 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r?Array.from({length:6}).map((v,w)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/5"})]},w)):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg.white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Accounts"}),e.jsx("p",{className:"text-lg text-gray-900",children:f.totalAccounts})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Balance"}),e.jsx("p",{className:"text-lg text-gray-900",children:Pe(f.totalBalance)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Total Equity"}),e.jsx("p",{className:"text-lg text-gray-900",children:Pe(f.totalEquity)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Margin Used"}),e.jsx("p",{className:"text-lg text-gray-900",children:Pe(f.totalMarginUsed)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Net Deposits"}),e.jsx("p",{className:"text-lg text-gray-900",children:Pe(f.netDeposits)})]})]})}),e.jsxs("div",{className:"space-y-2",children:[r?Array.from({length:8}).map((v,w)=>e.jsxs("div",{className:"w-full bg-white rounded-lg p-4 shadow-sm animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/5"})]},w)):c.slice(0,u).map(v=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:v.accountNumber}),e.jsxs("p",{className:"text-xs text-gray-500",children:[v.accountType.toUpperCase(),"  ",v.currency,"  1:",v.leverage]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${v.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:v.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Balance"}),e.jsx("p",{className:"text-gray-900",children:Pe(v.balance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text.gray-500",children:"Equity"}),e.jsx("p",{className:"text-gray-900",children:Pe(v.equity)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Free Margin"}),e.jsx("p",{className:"text-gray-900",children:Pe(v.freeMargin)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Margin Level"}),e.jsxs("p",{className:`${v.marginLevel>100?"text-green-600":"text-red-600"}`,children:[v.marginLevel,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Open Positions"}),e.jsx("p",{className:"text-gray-900",children:v.statistics?.openPositions??0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Pending Orders"}),e.jsx("p",{className:"text-gray-900",children:v.statistics?.pendingOrders??0})]})]})]},v._id)),e.jsx("div",{id:"accounts-sentinel",className:"h-8"})]})]})]})}function Pa({onBack:s,onNext:t,onError:r}){const[a,n]=o.useState("standard"),[i,l]=o.useState("USD"),[d,c]=o.useState(100),[h,u]=o.useState(!1),[p,f]=o.useState(""),v=async()=>{u(!0);try{if(!$e()){f('{"error":{"code":401,"message":"Token required"}}'),r?.("Token required");return}const y=await rl({accountType:a,currency:i,leverage:d});t(y)}catch(w){w?.status===401||w?.data?.error?.code===401?(f('{"error":{"code":401,"message":"Token required"}}'),r?.("Token required")):(f(w?.message||"Account creation failed"),r?.(w?.message||"Account creation failed"))}finally{u(!1)}};return e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsx("h2",{className:"text-gray-900",children:"Create Trading Account"}),e.jsx("p",{className:"text-gray-600",children:"Choose your preferred account type, currency, and leverage."}),p&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:p}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Account Type"}),e.jsxs(St,{value:a,onValueChange:n,children:[e.jsx(Pt,{className:"w-full h-11 bg-white text-gray-900 border border-gray-300 rounded-md px-4",children:e.jsx(Ct,{placeholder:"Select type"})}),e.jsxs(_t,{className:"w-full min-w-full bg-white border border-gray-200 rounded-md shadow-md",style:{minWidth:"100%"},children:[e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"standard",children:"Standard"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"pro",children:"Pro"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"ecn",children:"ECN"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Currency"}),e.jsxs(St,{value:i,onValueChange:l,children:[e.jsx(Pt,{className:"w-full h-11 bg-white text-gray-900 border border-gray-300 rounded-md px-4",children:e.jsx(Ct,{placeholder:"Select currency"})}),e.jsx(_t,{className:"w-full min-w-full bg-white border border-gray-200 rounded-md shadow-md",style:{minWidth:"100%"},children:e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"USD",children:"USD"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-700",children:"Leverage"}),e.jsxs(St,{value:String(d),onValueChange:w=>c(Number(w)),children:[e.jsx(Pt,{className:"w-full h-11 bg-white text-gray-900 border border-gray-300 rounded-md px-4",children:e.jsx(Ct,{placeholder:"Select leverage"})}),e.jsxs(_t,{className:"w-full min-w-full bg-white border border-gray-200 rounded-md shadow-md",style:{minWidth:"100%"},children:[e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"100",children:"1:100"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"200",children:"1:200"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"300",children:"1:300"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"400",children:"1:400"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"500",children:"1:500"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"1000",children:"1:1000"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"1500",children:"1:1500"}),e.jsx(Ie,{className:"relative w-full text-left text-gray-900 py-3 pl-9 pr-8 hover:bg-gray-50",value:"2000",children:"1:2000"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(E,{onClick:s,variant:"outline",className:"text-gray-700 h-11 rounded-md",children:"Back"}),e.jsx(E,{onClick:v,className:"bg-blue-700 text-white h-11 rounded-md",disabled:h,children:h?"Creating...":"Create Account"})]})]})}async function _c(){return(await ee("/api/v1/referrals/stats",{method:"GET",headers:be()})).data}async function Ac(s={}){const t=new URLSearchParams;s.status&&t.set("status",s.status),s.limit&&t.set("limit",String(s.limit));const r=`/api/v1/referrals/history${t.toString()?`?${t.toString()}`:""}`;return(await ee(r,{method:"GET",headers:be()})).data}async function Tc(s){return(await ee("/api/v1/referrals/validate",{method:"POST",headers:be(),body:{referralCode:s}})).data}function Ec({className:s,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:me("w-full caption-bottom text-sm",s),...t})})}function Ic({className:s,...t}){return e.jsx("thead",{"data-slot":"table-header",className:me("[&_tr]:border-b",s),...t})}function Dc({className:s,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:me("[&_tr:last-child]:border-0",s),...t})}function mr({className:s,...t}){return e.jsx("tr",{"data-slot":"table-row",className:me("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function Vt({className:s,...t}){return e.jsx("th",{"data-slot":"table-head",className:me("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function Wt({className:s,...t}){return e.jsx("td",{"data-slot":"table-cell",className:me("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function Lc({onBack:s}){const[t,r]=o.useState(!0),[a,n]=o.useState(null),[i,l]=o.useState([]),[d,c]=o.useState("all"),[h,u]=o.useState(!1),[p,f]=o.useState("");o.useEffect(()=>{v()},[]);const v=async()=>{try{r(!0);const[b,I]=await Promise.all([_c(),Ac({limit:50})]);n(b),l(I.referrals)}catch(b){f(b?.message||"Failed to load referral data")}finally{r(!1)}},w=()=>{a?.referralCode&&(navigator.clipboard.writeText(a.referralCode),u(!0),setTimeout(()=>u(!1),2e3))},y=b=>{const I={pending:{className:"bg-yellow-100 text-yellow-700",label:"Pending"},qualified:{className:"bg-blue-100 text-blue-700",label:"Qualified"},rewarded:{className:"bg-green-100 text-green-700",label:"Rewarded"},rejected:{className:"bg-red-100 text-red-700",label:"Rejected"},expired:{className:"bg-gray-100 text-gray-700",label:"Expired"}},re=I[b]||I.pending;return e.jsx(Et,{className:re.className,children:re.label})},P=d==="all"?i:i.filter(b=>b.status===d);return t?e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Refer & Earn"}),e.jsx("button",{onClick:s,className:"text-gray-700 hover:text-gray-900",children:"Back"})]}),e.jsx("div",{className:"text-gray-600",children:"Loading..."})]}):p?e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Refer & Earn"}),e.jsx("button",{onClick:s,className:"text-gray-700 hover:text-gray-900",children:"Back"})]}),e.jsx("div",{className:"text-red-600",children:p})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-blue-900 p-6 text-white",children:[e.jsx("button",{onClick:s,className:"mb-4 text-white/80 hover:text-white",children:" Back"}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ns,{className:"w-8 h-8"}),e.jsx("h1",{className:"text-2xl font-semibold",children:"Refer & Earn"})]}),e.jsxs("p",{className:"text-white/90",children:["Share your referral code and earn $",a?.settings.rewardAmount||12," for each friend who joins!"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs(Le,{children:[e.jsxs(At,{children:[e.jsx(Tt,{className:"text-lg",children:"Your Referral Code"}),e.jsx(Ca,{children:"Share this code with friends to earn rewards"})]}),e.jsxs(tt,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-50 border-2 border-dashed border-blue-300 rounded-lg p-4 text-center",children:e.jsx("div",{className:"text-3xl font-bold text-blue-700 tracking-wider",children:a?.referralCode||"Loading..."})}),e.jsx(E,{onClick:w,className:"bg-blue-700 hover:bg-blue-800 text-white",size:"lg",children:h?e.jsx(De,{className:"w-5 h-5"}):e.jsx(qn,{className:"w-5 h-5"})})]}),h&&e.jsxs("div",{className:"text-sm text-green-600 text-center flex items-center justify-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Copied to clipboard!"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(Le,{children:e.jsxs(tt,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ks,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Referrals"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?.total||0})]})}),e.jsx(Le,{children:e.jsxs(tt,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Hn,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Earned"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",a?.totalEarnings.toFixed(2)||"0.00"]})]})}),e.jsx(Le,{children:e.jsxs(tt,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(st,{className:"w-4 h-4 text-orange-600"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a?.pending||0})]})})]}),e.jsxs(Le,{children:[e.jsx(At,{children:e.jsxs(Tt,{className:"text-lg flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-blue-600"}),"How It Works"]})}),e.jsx(tt,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Share Your Code"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send your referral code to friends who want to start trading"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"They Sign Up & Deposit"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Your friend registers using your code and deposits $",a?.settings.minDeposit||100,"+"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Get Rewarded"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Earn $",a?.settings.rewardAmount||12," instantly in your wallet once they complete KYC"]})]})]})]})})]}),e.jsxs(Le,{children:[e.jsxs(At,{children:[e.jsx(Tt,{className:"text-lg",children:"Referral History"}),e.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[e.jsxs(E,{variant:d==="all"?"default":"outline",size:"sm",onClick:()=>c("all"),className:d==="all"?"bg-blue-700":"",children:["All (",a?.total||0,")"]}),e.jsxs(E,{variant:d==="rewarded"?"default":"outline",size:"sm",onClick:()=>c("rewarded"),className:d==="rewarded"?"bg-green-600":"",children:["Rewarded (",a?.rewarded||0,")"]}),e.jsxs(E,{variant:d==="pending"?"default":"outline",size:"sm",onClick:()=>c("pending"),className:d==="pending"?"bg-yellow-600":"",children:["Pending (",a?.pending||0,")"]})]})]}),e.jsx(tt,{children:P.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ks,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No referrals yet"}),e.jsx("p",{className:"text-sm",children:"Start sharing your referral code to earn rewards!"})]}):e.jsx("div",{className:"overflow-x-auto -mx-4",children:e.jsxs(Ec,{children:[e.jsx(Ic,{children:e.jsxs(mr,{children:[e.jsx(Vt,{children:"User"}),e.jsx(Vt,{children:"Date"}),e.jsx(Vt,{children:"Status"}),e.jsx(Vt,{className:"text-right",children:"Reward"})]})}),e.jsx(Dc,{children:P.map(b=>e.jsxs(mr,{children:[e.jsx(Wt,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.referredUser.name}),e.jsx("div",{className:"text-xs text-gray-500",children:b.referredUser.email})]})}),e.jsx(Wt,{className:"text-sm text-gray-600",children:new Date(b.createdAt).toLocaleDateString()}),e.jsx(Wt,{children:y(b.status)}),e.jsx(Wt,{className:"text-right",children:e.jsxs("span",{className:`font-semibold ${b.status==="rewarded"?"text-green-600":"text-gray-600"}`,children:["$",b.rewardAmount.toFixed(2)]})})]},b.id))})]})})})]})]})]})}function Rc({onLogout:s}){const[t,r]=o.useState(null),[a,n]=o.useState(!0),[i,l]=o.useState(null),[d,c]=o.useState(null),[h,u]=o.useState(()=>{try{return localStorage.getItem("mfapp.soundEnabled")!=="false"}catch{return!0}});o.useEffect(()=>{let D=!0;return(async()=>{try{const C=await Dt();if(!D)return;r(C);try{const _=localStorage.getItem("mfapp.settingsInitialSection");_&&(c(_),localStorage.removeItem("mfapp.settingsInitialSection"))}catch{}}catch(C){l(C?.message||"Failed to load profile")}finally{n(!1)}})(),()=>{D=!1}},[]),o.useEffect(()=>{const D=()=>{d&&c(null)};return window.addEventListener("mfapp-settings-back",D),()=>window.removeEventListener("mfapp-settings-back",D)},[d]);const p=t?`${t.firstName||""} ${t.lastName||""}`.trim()||t.email:"",f=t?`${t.firstName?.[0]||t.email?.[0]||"U"}${t.lastName?.[0]||""}`.toUpperCase():"U",v=t&&(t.role?.toUpperCase()||t.status?.toUpperCase())||"USER",w=t?.createdAt?new Date(t.createdAt).getFullYear():new Date().getFullYear(),y=t?.kycStatus||"pending",P={text:y.toUpperCase(),color:y==="verified"?"green":"gray"},b=t?.twoFactorEnabled?"2FA Enabled":"2FA Disabled",I=`${t?.currency||"USD"}  ${t?.timezone||"UTC"}  ${t?.language||"en"}`,re=t?.notifications||{},J=`${Object.values(re).filter(Boolean).length} notifications enabled`,ne=[{title:"Account",items:[{icon:Qt,label:"Profile Information",description:p,action:()=>c("profile")},{icon:De,label:"KYC Status",description:y,badge:P,action:()=>c("kyc")}]},{title:"Security",items:[{icon:Ys,label:"Security & Verification",description:b,action:()=>c("security")},{icon:Ys,label:"Change Password",action:()=>c("password")}]},{title:"Trading",items:[{icon:st,label:"Trading Preferences",description:I,action:()=>{}},{icon:st,label:"Accounts",description:"Manage trading accounts",action:()=>c("accounts")},{icon:yr,label:"Notifications",description:J,action:()=>c("notifications")},{icon:st,label:"UI Sounds",description:h?"Enabled":"Disabled",action:()=>{try{const D=!h;localStorage.setItem("mfapp.soundEnabled",D?"true":"false"),u(D)}catch{}}}]},{title:"Payment",items:[{icon:wr,label:"Payment Methods",description:"Manage payment methods",action:()=>c("payments")}]},{title:"Rewards",items:[{icon:ns,label:"Refer & Earn",description:"Invite friends and earn $12",badge:e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"Earn $12"}),action:()=>c("referral")}]},{title:"Support",items:[{icon:et,label:"Documents",description:"View uploaded documents",action:()=>{}},{icon:Mn,label:"Help & Support",description:"FAQs, contact us",action:()=>{}}]}];return e.jsxs("div",{className:"pb-20 md:pb-8",children:[d==="profile"&&e.jsx(yc,{onBack:()=>c(null)}),d==="kyc"&&e.jsx(Sc,{onBack:()=>c(null)}),d==="security"&&e.jsx(vc,{onBack:()=>c(null)}),d==="password"&&e.jsx(wc,{onBack:()=>c(null)}),d==="payments"&&e.jsx(Cc,{onBack:()=>c(null)}),d==="referral"&&e.jsx(Lc,{onBack:()=>c(null)}),d==="accounts"&&e.jsx(Pc,{onBack:()=>c(null),onCreateNew:()=>c("account-setup")}),d==="account-setup"&&e.jsx(Pa,{onBack:()=>c("accounts"),onNext:()=>c("accounts"),onError:D=>l(D)}),d&&e.jsx(e.Fragment,{}),!d&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-blue-900 text-white p-6 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl",children:f}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-white mb-1",children:p}),e.jsx("p",{className:"text-blue-100",children:t?.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-yellow-400 text-yellow-900 text-xs rounded",children:v}),e.jsxs("span",{className:"text-blue-100 text-sm",children:["Member since ",w]})]})]})]}),a&&e.jsx("div",{className:"mt-3 bg-white/10 text-white rounded px-3 py-2 text-sm",children:"Loading profile..."}),i&&e.jsx("div",{className:"mt-3 bg-red-500/20 text-white rounded px-3 py-2 text-sm",children:i})]}),!d&&e.jsxs("div",{className:"px-4 space-y-6",children:[ne.map((D,C)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:D.title}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm divide-y divide-gray-100",children:D.items.map((_,ie)=>{const G=_.icon;return e.jsxs("button",{onClick:_.action,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-50 transition-colors first:rounded-t-lg last:rounded-b-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(G,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-gray-900",children:_.label}),_.description&&e.jsx("p",{className:"text-sm text-gray-500",children:_.description})]}),_.badge&&e.jsx("span",{className:`px-2 py-1 rounded text-xs ${_.badge.color==="green"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:_.badge.text}),e.jsx(In,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]},ie)})})]},C)),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 bg-white border border-red-200 text-red-600 rounded-lg p-4 hover:bg-red-50 transition-colors",children:[e.jsx(ai,{className:"w-5 h-5"}),e.jsx("span",{children:"Sign Out"})]})}),e.jsxs("div",{className:"text-center text-sm text-gray-500 py-4",children:[e.jsxs("p",{children:[ss.name," v1.0.0"]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("a",{href:"#",className:"text-blue-700 hover:text-blue-800",children:"Privacy Policy"}),"  ",e.jsx("a",{href:"#",className:"text-blue-700 hover:text-blue-800",children:"Terms of Service"})]})]})]})]})}function Oc(s,t){switch(t.type){case"add":return[{...t.payload},...s].slice(0,100);case"mark_all_read":return s.map(r=>({...r,read:!0}));case"clear":return[];default:return s}}const _a=o.createContext(null);function Bc({children:s}){const[t,r]=o.useReducer(Oc,[]),a=o.useMemo(()=>({notifications:t,unreadCount:t.filter(n=>!n.read).length,add:n=>r({type:"add",payload:n}),markAllRead:()=>r({type:"mark_all_read"}),clear:()=>r({type:"clear"})}),[t]);return e.jsx(_a.Provider,{value:a,children:s})}function Mc(){const s=o.useContext(_a);if(!s)throw new Error("useNotifications must be used within NotificationsProvider");return s}function pr(s){const t=s?.type==="transaction"?"Transaction Update":s?.type==="order_update"?"Order Update":s?.type==="margin_call"?"Margin Call":s?.type==="stop_out"?"Stop Out":s?.title||"Notification",r=s?.message||s?.data?.message||"Update received";return{id:s?.id||`n_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,title:t,message:r,type:"info",read:!1,createdAt:new Date().toISOString()}}class Ze extends ln.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,r){try{const a=t&&t.stack||r&&r.componentStack||void 0;this.props.onError?this.props.onError({error:t,label:this.props.label,stack:a}):console.error("ErrorBoundary",{label:this.props.label,error:t,stack:a})}catch{}}render(){return this.state.hasError?this.props.fallback||e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-sm w-full bg-white border rounded-xl p-6 text-center",children:[e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please try again or reload the app."}),e.jsx("button",{className:"h-11 px-4 rounded-lg bg-blue-600 text-white",onClick:()=>{this.setState({hasError:!1}),location.reload()},children:"Reload"})]})}):this.props.children}}function $c({onBack:s,onNext:t,onError:r}){const[a,n]=o.useState(""),[i,l]=o.useState(""),[d,c]=o.useState(""),[h,u]=o.useState(""),[p,f]=o.useState(""),[v,w]=o.useState(""),[y,P]=o.useState(!1),[b,I]=o.useState(null),[re,xe]=o.useState(""),[J,ne]=o.useState(""),[D,C]=o.useState(!1),[_,ie]=o.useState(!1),[G,Y]=o.useState(null),[M,ge]=o.useState("");o.useEffect(()=>{if(!v||v.length<6){I(null),xe(""),ne("");return}const Q=setTimeout(async()=>{P(!0);try{const $=await Tc(v.toUpperCase().trim());$.valid&&$.referrer?(I(!0),xe("Valid referral code"),ne(`${$.referrer.firstName} ${$.referrer.lastName}`)):(I(!1),xe($.message||"Invalid referral code"),ne(""))}catch($){I(!1),xe($?.message||"Invalid referral code"),ne("")}finally{P(!1)}},500);return()=>clearTimeout(Q)},[v]);const se=async Q=>{Q.preventDefault(),ie(!0),Y(null),ge("");try{if(!D){r?.("Please accept Terms & Conditions"),Y("Please accept Terms & Conditions"),ie(!1);return}const $=(p||"").replace(/\D/g,""),T={email:a,password:i,firstName:d,lastName:h,phone:$,acceptedTerms:D};v&&v.trim()&&(T.referralCode=v.toUpperCase().trim());const V=await Bo(T);t({id:V.userId||V.user.id,email:V.user.email})}catch($){const T=$?.data?.error?.details||$?.data?.details||$?.error?.details,V=Array.isArray(T)?T.map(ye=>`${ye.field}: ${ye.message}`).join("; "):$?.data?.error?.message||$?.message||"Registration failed";if(Array.isArray(T)){const ye=T.find(Z=>String(Z.field).toLowerCase()==="password"&&Z.message);ye&&ge(ye.message)}Y(V),r?.(V)}finally{ie(!1)}};return e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsx("div",{className:"p-4",children:e.jsx("button",{onClick:s,className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ge,{className:"w-6 h-6 text-gray-700"})})}),e.jsxs("div",{className:"flex-1 px-6 pt-4",children:[G&&e.jsx("div",{className:"mb-3 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm","aria-live":"polite",children:G}),e.jsx("h1",{className:"text-gray-900 mb-2",children:"Create your account"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start trading in minutes"}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(fe,{placeholder:"First name",value:d,onChange:Q=>c(Q.target.value),className:"h-12 rounded-lg",required:!0}),e.jsx(fe,{placeholder:"Last name",value:h,onChange:Q=>u(Q.target.value),className:"h-12 rounded-lg",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(jr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(fe,{type:"email",placeholder:"Email",value:a,onChange:Q=>n(Q.target.value),className:"pl-10 h-12 rounded-lg",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(fe,{type:"tel",placeholder:"Phone",value:p,onChange:Q=>f(Q.target.value.replace(/[^0-9+]/g,"")),className:"pl-10 h-12 rounded-lg","aria-label":"Phone number"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(fe,{type:"password",placeholder:"Password",value:i,onChange:Q=>l(Q.target.value),className:`pl-10 h-12 rounded-lg ${M?"border-red-400":""}`,required:!0,"aria-invalid":!!M,"aria-describedby":M?"password-error":void 0}),M&&e.jsx("div",{id:"password-error",className:"mt-1 text-xs text-red-600",children:M})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(fe,{placeholder:"Referral Code (Optional)",value:v,onChange:Q=>w(Q.target.value.toUpperCase()),className:`pl-10 h-12 rounded-lg ${b===!1?"border-red-400":b===!0?"border-green-500":""}`,maxLength:12}),y&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"})}),!y&&b===!0&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(De,{className:"w-5 h-5 text-green-600"})}),!y&&b===!1&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Ke,{className:"w-5 h-5 text-red-600"})})]}),J&&e.jsxs("div",{className:"mt-1 text-xs text-green-600 flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),"Referred by: ",J]}),re&&!J&&e.jsx("div",{className:`mt-1 text-xs ${b?"text-green-600":"text-red-600"}`,children:re})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jr,{id:"terms",checked:D,onCheckedChange:Q=>C(!!Q)}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700",children:["I accept the ",e.jsx("a",{className:"text-blue-700",children:"Terms & Conditions"})]})]}),e.jsx(E,{type:"submit",className:"w-full h-12 bg-blue-700 hover:bg-blue-800 text-white rounded-lg",disabled:_,children:_?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Sign Up"})]})]})]})}var zc=Object.defineProperty,Uc=Object.defineProperties,Fc=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,Aa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,fr=(s,t,r)=>t in s?zc(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,qc=(s,t)=>{for(var r in t||(t={}))Aa.call(t,r)&&fr(s,r,t[r]);if(rs)for(var r of rs(t))Ta.call(t,r)&&fr(s,r,t[r]);return s},Vc=(s,t)=>Uc(s,Fc(t)),Wc=(s,t)=>{var r={};for(var a in s)Aa.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&rs)for(var a of rs(s))t.indexOf(a)<0&&Ta.call(s,a)&&(r[a]=s[a]);return r};function Hc(s){let t=setTimeout(s,0),r=setTimeout(s,10),a=setTimeout(s,50);return[t,r,a]}function Gc(s){let t=o.useRef();return o.useEffect(()=>{t.current=s}),t.current}var Yc=18,Ea=40,Kc=`${Ea}px`,Jc=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Xc({containerRef:s,inputRef:t,pushPasswordManagerStrategy:r,isFocused:a}){let[n,i]=o.useState(!1),[l,d]=o.useState(!1),[c,h]=o.useState(!1),u=o.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&n&&l,[n,l,r]),p=o.useCallback(()=>{let f=s.current,v=t.current;if(!f||!v||c||r==="none")return;let w=f,y=w.getBoundingClientRect().left+w.offsetWidth,P=w.getBoundingClientRect().top+w.offsetHeight/2,b=y-Yc,I=P;document.querySelectorAll(Jc).length===0&&document.elementFromPoint(b,I)===f||(i(!0),h(!0))},[s,t,c,r]);return o.useEffect(()=>{let f=s.current;if(!f||r==="none")return;function v(){let y=window.innerWidth-f.getBoundingClientRect().right;d(y>=Ea)}v();let w=setInterval(v,1e3);return()=>{clearInterval(w)}},[s,r]),o.useEffect(()=>{let f=a||document.activeElement===t.current;if(r==="none"||!f)return;let v=setTimeout(p,0),w=setTimeout(p,2e3),y=setTimeout(p,5e3),P=setTimeout(()=>{h(!0)},6e3);return()=>{clearTimeout(v),clearTimeout(w),clearTimeout(y),clearTimeout(P)}},[t,a,r,p]),{hasPWMBadge:n,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:Kc}}var Ia=o.createContext({}),Da=o.forwardRef((s,t)=>{var r=s,{value:a,onChange:n,maxLength:i,textAlign:l="left",pattern:d,placeholder:c,inputMode:h="numeric",onComplete:u,pushPasswordManagerStrategy:p="increase-width",pasteTransformer:f,containerClassName:v,noScriptCSSFallback:w=Qc,render:y,children:P}=r,b=Wc(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),I,re,xe,J,ne;let[D,C]=o.useState(typeof b.defaultValue=="string"?b.defaultValue:""),_=a??D,ie=Gc(_),G=o.useCallback(z=>{n?.(z),C(z)},[n]),Y=o.useMemo(()=>d?typeof d=="string"?new RegExp(d):d:null,[d]),M=o.useRef(null),ge=o.useRef(null),se=o.useRef({value:_,onChange:G,isIOS:typeof window<"u"&&((re=(I=window?.CSS)==null?void 0:I.supports)==null?void 0:re.call(I,"-webkit-touch-callout","none"))}),Q=o.useRef({prev:[(xe=M.current)==null?void 0:xe.selectionStart,(J=M.current)==null?void 0:J.selectionEnd,(ne=M.current)==null?void 0:ne.selectionDirection]});o.useImperativeHandle(t,()=>M.current,[]),o.useEffect(()=>{let z=M.current,q=ge.current;if(!z||!q)return;se.current.value!==z.value&&se.current.onChange(z.value),Q.current.prev=[z.selectionStart,z.selectionEnd,z.selectionDirection];function Ne(){if(document.activeElement!==z){j(null),F(null);return}let de=z.selectionStart,H=z.selectionEnd,Se=z.selectionDirection,N=z.maxLength,K=z.value,ce=Q.current.prev,x=-1,he=-1,m;if(K.length!==0&&de!==null&&H!==null){let Lt=de===H,Rt=de===K.length&&K.length<N;if(Lt&&!Rt){let Fe=de;if(Fe===0)x=0,he=1,m="forward";else if(Fe===N)x=Fe-1,he=Fe,m="backward";else if(N>1&&K.length>1){let Xe=0;if(ce[0]!==null&&ce[1]!==null){m=Fe<ce[1]?"backward":"forward";let ze=ce[0]===ce[1]&&ce[0]<N;m==="backward"&&!ze&&(Xe=-1)}x=Xe+Fe,he=Xe+Fe+1}}x!==-1&&he!==-1&&x!==he&&M.current.setSelectionRange(x,he,m)}let ae=x!==-1?x:de,Ee=he!==-1?he:H,nt=m??Se;j(ae),F(Ee),Q.current.prev=[ae,Ee,nt]}if(document.addEventListener("selectionchange",Ne,{capture:!0}),Ne(),document.activeElement===z&&ye(!0),!document.getElementById("input-otp-style")){let de=document.createElement("style");if(de.id="input-otp-style",document.head.appendChild(de),de.sheet){let H="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";jt(de.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),jt(de.sheet,`[data-input-otp]:autofill { ${H} }`),jt(de.sheet,`[data-input-otp]:-webkit-autofill { ${H} }`),jt(de.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),jt(de.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let W=()=>{q&&q.style.setProperty("--root-height",`${z.clientHeight}px`)};W();let U=new ResizeObserver(W);return U.observe(z),()=>{document.removeEventListener("selectionchange",Ne,{capture:!0}),U.disconnect()}},[]);let[$,T]=o.useState(!1),[V,ye]=o.useState(!1),[Z,j]=o.useState(null),[L,F]=o.useState(null);o.useEffect(()=>{Hc(()=>{var z,q,Ne,W;(z=M.current)==null||z.dispatchEvent(new Event("input"));let U=(q=M.current)==null?void 0:q.selectionStart,de=(Ne=M.current)==null?void 0:Ne.selectionEnd,H=(W=M.current)==null?void 0:W.selectionDirection;U!==null&&de!==null&&(j(U),F(de),Q.current.prev=[U,de,H])})},[_,V]),o.useEffect(()=>{ie!==void 0&&_!==ie&&ie.length<i&&_.length===i&&u?.(_)},[i,u,ie,_]);let ue=Xc({containerRef:ge,inputRef:M,pushPasswordManagerStrategy:p,isFocused:V}),g=o.useCallback(z=>{let q=z.currentTarget.value.slice(0,i);if(q.length>0&&Y&&!Y.test(q)){z.preventDefault();return}typeof ie=="string"&&q.length<ie.length&&document.dispatchEvent(new Event("selectionchange")),G(q)},[i,G,ie,Y]),S=o.useCallback(()=>{var z;if(M.current){let q=Math.min(M.current.value.length,i-1),Ne=M.current.value.length;(z=M.current)==null||z.setSelectionRange(q,Ne),j(q),F(Ne)}ye(!0)},[i]),k=o.useCallback(z=>{var q,Ne;let W=M.current;if(!f&&(!se.current.isIOS||!z.clipboardData||!W))return;let U=z.clipboardData.getData("text/plain"),de=f?f(U):U;z.preventDefault();let H=(q=M.current)==null?void 0:q.selectionStart,Se=(Ne=M.current)==null?void 0:Ne.selectionEnd,N=(H!==Se?_.slice(0,H)+de+_.slice(Se):_.slice(0,H)+de+_.slice(H)).slice(0,i);if(N.length>0&&Y&&!Y.test(N))return;W.value=N,G(N);let K=Math.min(N.length,i-1),ce=N.length;W.setSelectionRange(K,ce),j(K),F(ce)},[i,G,Y,_]),A=o.useMemo(()=>({position:"relative",cursor:b.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[b.disabled]),te=o.useMemo(()=>({position:"absolute",inset:0,width:ue.willPushPWMBadge?`calc(100% + ${ue.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:ue.willPushPWMBadge?`inset(0 ${ue.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:l,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[ue.PWM_BADGE_SPACE_WIDTH,ue.willPushPWMBadge,l]),ve=o.useMemo(()=>o.createElement("input",Vc(qc({autoComplete:b.autoComplete||"one-time-code"},b),{"data-input-otp":!0,"data-input-otp-placeholder-shown":_.length===0||void 0,"data-input-otp-mss":Z,"data-input-otp-mse":L,inputMode:h,pattern:Y?.source,"aria-placeholder":c,style:te,maxLength:i,value:_,ref:M,onPaste:z=>{var q;k(z),(q=b.onPaste)==null||q.call(b,z)},onChange:g,onMouseOver:z=>{var q;T(!0),(q=b.onMouseOver)==null||q.call(b,z)},onMouseLeave:z=>{var q;T(!1),(q=b.onMouseLeave)==null||q.call(b,z)},onFocus:z=>{var q;S(),(q=b.onFocus)==null||q.call(b,z)},onBlur:z=>{var q;ye(!1),(q=b.onBlur)==null||q.call(b,z)}})),[g,S,k,h,te,i,L,Z,b,Y?.source,_]),we=o.useMemo(()=>({slots:Array.from({length:i}).map((z,q)=>{var Ne;let W=V&&Z!==null&&L!==null&&(Z===L&&q===Z||q>=Z&&q<L),U=_[q]!==void 0?_[q]:null,de=_[0]!==void 0?null:(Ne=c?.[q])!=null?Ne:null;return{char:U,placeholderChar:de,isActive:W,hasFakeCaret:W&&U===null}}),isFocused:V,isHovering:!b.disabled&&$}),[V,$,i,L,Z,b.disabled,_]),ke=o.useMemo(()=>y?y(we):o.createElement(Ia.Provider,{value:we},P),[P,we,y]);return o.createElement(o.Fragment,null,w!==null&&o.createElement("noscript",null,o.createElement("style",null,w)),o.createElement("div",{ref:ge,"data-input-otp-container":!0,style:A,className:v},ke,o.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ve)))});Da.displayName="Input";function jt(s,t){try{s.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var Qc=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;function Zc({className:s,containerClassName:t,...r}){return e.jsx(Da,{"data-slot":"input-otp",containerClassName:me("flex items-center gap-2 has-disabled:opacity-50",t),className:me("disabled:cursor-not-allowed",s),...r})}function ed({className:s,...t}){return e.jsx("div",{"data-slot":"input-otp-group",className:me("flex items-center gap-1",s),...t})}function Ht({index:s,className:t,...r}){const a=o.useContext(Ia),{char:n,hasFakeCaret:i,isActive:l}=a?.slots[s]??{};return e.jsxs("div",{"data-slot":"input-otp-slot","data-active":l,className:me("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",t),...r,children:[n,i&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function td({userId:s,email:t,onVerified:r,onError:a}){const[n,i]=o.useState(""),[l,d]=o.useState(!1),[c,h]=o.useState(30),[u,p]=o.useState("");o.useEffect(()=>{const w=setInterval(()=>h(y=>Math.max(0,y-1)),1e3);return()=>clearInterval(w)},[]);const f=async()=>{if(n.length===4){d(!0);try{const w=await Mo({userId:s,code:n});os({tokens:w.tokens,sessionId:w.sessionId},!0),r()}catch(w){const y=w?.error?.message||w?.data?.message||w?.message||"Invalid or expired code";p(y),a?.(y)}finally{d(!1)}}},v=async()=>{if(!(c>0)){h(30);try{await $o({userId:s})}catch(w){const y=w?.error?.message||w?.data?.message||w?.message||"Failed to resend code";p(y),a?.(y)}}};return e.jsxs("div",{className:"min-h-screen bg-white p-6 text-gray-900",children:[e.jsx("h2",{className:"text-gray-900",children:"Verify your email"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Enter the 4-digit code sent to ",t||"your email"]}),e.jsxs("div",{"aria-label":"Verification code","aria-invalid":!!u,"aria-describedby":u?"otp-error":void 0,children:[e.jsx(Zc,{maxLength:4,value:n,onChange:i,children:e.jsxs(ed,{className:"gap-3",children:[e.jsx(Ht,{index:0,className:"h-12 w-12 bg-white text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Ht,{index:1,className:"h-12 w-12 bg-white text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Ht,{index:2,className:"h-12 w-12 bg-white text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Ht,{index:3,className:"h-12 w-12 bg-white text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),u&&e.jsx("div",{id:"otp-error",className:"mt-2 text-sm text-red-600",children:u})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx(E,{onClick:f,disabled:l||n.length!==4,className:"bg-blue-700 text-white h-11 rounded-lg",children:"Verify"}),e.jsx(E,{onClick:v,variant:"outline",disabled:c>0,className:"h-11 rounded-lg text-gray-900",children:c>0?`Resend in ${c}s`:"Resend code"})]})]})}function sd({onDeposit:s,onSkip:t,onCancel:r,onError:a}){const[n,i]=o.useState("signup"),[l,d]=o.useState(""),[c,h]=o.useState("");return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur border-b",children:e.jsxs("div",{className:"px-6 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:n==="signup"?"text-blue-700 font-semibold":"text-gray-600",children:"Registration"}),e.jsx("span",{className:"text-gray-300",children:""}),e.jsx("span",{className:n!=="signup"?"text-blue-700 font-semibold":"text-gray-600",children:"Account"})]}),e.jsx("div",{className:"mt-2 h-1 w-full bg-gray-100 rounded",children:e.jsx("div",{className:"h-1 rounded bg-gradient-to-r from-blue-600 to-blue-800 transition-all",style:{width:n==="signup"?"50%":"100%"}})})]})}),n==="signup"&&e.jsx($c,{onBack:r,onNext:u=>{d(u?.id||""),h(u?.email||""),i("otp")},onError:a}),n==="otp"&&e.jsx(td,{userId:l,email:c,onVerified:()=>i("account"),onError:a}),n==="account"&&e.jsx(Pa,{onBack:()=>i("signup"),onNext:()=>i("created"),onError:a}),n==="created"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-gray-900",children:"Configuration"}),e.jsx("p",{className:"text-gray-700",children:"Your trading account is created  you can trade and deposit now."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"w-full bg-blue-700 text-white rounded-lg h-12",children:"Deposit now"}),e.jsx("button",{onClick:t,className:"w-full bg-gray-100 text-gray-700 rounded-lg h-12",children:"Skip for now"})]})]})]})}function rd(){const[s,t]=o.useState("welcome"),[r,a]=o.useState(null),[n,i]=o.useState(!1),[l,d]=o.useState(!0),[c,h]=o.useState(null),[u,p]=o.useState(null),[f,v]=o.useState({show:!1,message:"",type:"info"}),[w,y]=o.useState(typeof navigator<"u"?navigator.onLine:!0),P="mfapp.currentScreen",b="mfapp.selectedPair",{add:I,notifications:re,markAllRead:xe,clear:J}=Mc(),[ne,D]=o.useState(!1),C=typeof window<"u"?window.mfappRefreshTimerRef||{id:null}:{id:null};typeof window<"u"&&(window.mfappRefreshTimerRef=C);const _=()=>{C.id&&(window.clearTimeout(C.id),C.id=null)},ie=()=>{_();const j=Eo();let F=j?Math.max(2e3,j-Date.now()-6e4):55*6e4;C.id=window.setTimeout(async()=>{const ue=$e(),g=Xr(),S=Qr()||"";if(!ue||!g){ie();return}try{const k=await ra({accessToken:ue,refreshToken:g}),A=window.localStorage.getItem("fx.accessToken"),te=!!A&&A===ue;os({tokens:{accessToken:k.accessToken,refreshToken:k.refreshToken,expiresIn:k.expiresIn},sessionId:S},te),ie()}catch(k){k?.status===401?(Gt(),i(!1),h(null),t("welcome"),G("Session expired. Please sign in again.","info")):(G("Network issue during token refresh. Will retry.","info"),C.id=window.setTimeout(ie,3e4))}},F)};o.useEffect(()=>{if(!ne)return;const j=document.body.style.overflow;document.body.style.overflow="hidden";const L=F=>{F.key==="Escape"&&D(!1)};return window.addEventListener("keydown",L),()=>{document.body.style.overflow=j,window.removeEventListener("keydown",L)}},[ne]);const G=(j,L="info")=>{v({show:!0,message:j,type:L})},Y=j=>{h(j),i(!0),le.connect(),t("dashboard");const L=j.firstName||j.email||"Trader";G(`Welcome back, ${L}!`,"success"),ie()},M=()=>{le.disconnect(),Gt(),_(),h(null),i(!1),t("welcome"),G("Successfully signed out.","info")},ge=j=>{if(a(s),j==="trading"&&!u)try{const L=localStorage.getItem(b),F=L?JSON.parse(L):lt&&lt[0]?lt[0]:null;F?p(F):j="markets"}catch{const L=lt&&lt[0]?lt[0]:null;L?p(L):j="markets"}t(j)},se=j=>{a(s),t(j)},Q=j=>{p(j),t("trading");try{localStorage.setItem(b,JSON.stringify(j))}catch{}},$=j=>{G(`${j.direction.toUpperCase()} order for ${j.lotSize} lots of ${j.pair} placed successfully!`,"success"),t("portfolio")},T=j=>{console.log("Closing position:",j),G("Position closed successfully!","success")},V=j=>{console.log("Cancelling order:",j),G("Order cancelled successfully!","info")};if(o.useEffect(()=>{(async()=>{if(!$e()){d(!1);return}try{const F=await Dt();h(F),i(!0),le.connect(),ie();try{const g=localStorage.getItem(P),k=g&&["dashboard","markets","trading","portfolio","wallet","transactions","settings"].includes(g)?g:"dashboard";t(k);const A=localStorage.getItem(b);if(A){const te=JSON.parse(A);p(te)}k==="trading"&&!A&&t("markets")}catch{t("dashboard")}const ue=F.firstName||F.email||"Trader";G(`Welcome back, ${ue}!`,"success");try{(await tl({unreadOnly:!1,limit:20})).forEach(S=>{const k={id:S.id,type:S.type,title:S.title,message:S.message,data:S.data,createdAt:S.createdAt||S.timestamp,read:!!S.read};I(pr(k))})}catch{}}catch(F){if(F?.status===401)Gt();else{i(!0),le.connect(),ie();try{const ue=localStorage.getItem(P),S=ue&&["dashboard","markets","trading","portfolio","wallet","transactions","settings"].includes(ue)?ue:"dashboard";t(S);const k=localStorage.getItem(b);if(k){const A=JSON.parse(k);p(A)}S==="trading"&&!k&&t("markets")}catch{t("dashboard")}G(F?.message||"Network issue. You are still signed in.","info")}}finally{d(!1)}})()},[]),o.useEffect(()=>{if(n)try{localStorage.setItem(P,s)}catch{}},[s,n]),o.useEffect(()=>{if(n){le.subscribe({channels:["notifications"]});const j=L=>{I(pr(L))};return le.on("notification",j),()=>le.off("notification",j)}},[n]),!n)return l?null:e.jsx("div",{className:"min-h-screen bg-gray-100 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-md bg-white md:shadow-2xl relative",children:[s==="welcome"&&e.jsx(Co,{onSignIn:()=>t("login"),onSignUp:()=>t("signup")}),s==="login"&&e.jsx(qo,{onBack:()=>t("welcome"),onLogin:Y,onSignUp:()=>t("signup"),onForgotPassword:()=>G("Password reset link sent to your email","info"),onError:j=>G(j,"error")}),s==="signup"&&e.jsx(sd,{onDeposit:()=>{i(!0),t("wallet-deposit"),G("Account created. Deposit to start trading.","success")},onSkip:()=>{i(!0),t("dashboard"),G("Account created. You can deposit anytime.","success")},onCancel:()=>{t("login")},onError:j=>G(j,"error")}),f.show&&e.jsx(It,{message:f.message,type:f.type,onClose:()=>v({...f,show:!1})})]})});const ye=["dashboard","markets","portfolio","wallet","transactions","settings"].some(j=>s.startsWith(j)),Z=["dashboard","markets","portfolio","wallet","settings"].includes(s);return e.jsx("div",{className:"min-h-screen bg-gray-100 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-md bg-gray-50 md:shadow-2xl relative",children:[ye&&e.jsx(Xo,{title:s==="markets"?"Markets":s==="trading"?void 0:s==="portfolio"?"Portfolio":s==="wallet"||s.startsWith("wallet-")?"Wallet":s==="transactions"?"Transactions":s==="settings"?"Settings":void 0,titleIcon:s==="markets"?e.jsx(_n,{className:"w-5 h-5 text-white"}):s==="wallet"||s.startsWith("wallet-")?e.jsx(Zt,{className:"w-5 h-5 text-white"}):s==="settings"?e.jsx(kr,{className:"w-5 h-5 text-white"}):void 0,showNotifications:s==="dashboard",onNotificationClick:()=>D(!0),unreadCount:re.filter(j=>!j.read).length,showBack:s==="wallet",onBackClick:()=>{t(r&&r!=="wallet"?r:"dashboard")}}),e.jsxs("main",{className:"",style:{paddingTop:ye?"calc(var(--safe-top) + 56px)":void 0,paddingBottom:Z?"calc(var(--safe-bottom) + 64px)":void 0},children:[s==="dashboard"&&e.jsx(Ze,{label:"Dashboard",onError:({error:j,label:L,stack:F})=>console.error("AppError",{label:L,error:j,stack:F,screen:s}),children:e.jsx(cc,{userName:c?.firstName||c?.email||Zo.firstName,onNavigate:ge})}),s==="markets"&&e.jsx(Ze,{label:"Markets",onError:({error:j,label:L,stack:F})=>console.error("AppError",{label:L,error:j,stack:F,screen:s}),children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"p-6 flex justify-center",children:e.jsx(Be,{})}),children:e.jsx(nd,{onSelectPair:Q})})}),s==="trading"&&u&&e.jsx(Ze,{label:"Trading",onError:({error:j,label:L,stack:F})=>console.error("AppError",{label:L,error:j,stack:F,screen:s}),children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"p-6 flex justify-center",children:e.jsx(Be,{})}),children:e.jsx(id,{pair:u,onBack:()=>t("markets"),onPlaceOrder:$})})}),s==="trading"&&!u&&e.jsx("div",{className:"px-4 py-8",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Select a market to start trading"}),e.jsx(E,{onClick:()=>t("markets"),className:"bg-blue-700 hover:bg-blue-800 text-white rounded-lg",children:"Go to Markets"})]})}),s==="portfolio"&&e.jsx(Ze,{label:"Portfolio",onError:({error:j,label:L,stack:F})=>console.error("AppError",{label:L,error:j,stack:F,screen:s}),children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"p-6 flex justify-center",children:e.jsx(Be,{})}),children:e.jsx(od,{onClosePosition:T,onCancelOrder:V})})}),(s==="wallet"||s.startsWith("wallet-"))&&e.jsx(Ze,{children:e.jsx(gc,{onNavigate:ge})}),s==="transactions"&&e.jsx(Ze,{label:"Transactions",onError:({error:j,label:L,stack:F})=>console.error("AppError",{label:L,error:j,stack:F,screen:s}),children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"p-6 flex justify-center",children:e.jsx(Be,{})}),children:e.jsx(ld,{onBack:()=>t("wallet")})})}),s==="settings"&&e.jsx(Ze,{label:"Settings",onError:({error:j,label:L,stack:F})=>console.error("AppError",{label:L,error:j,stack:F,screen:s}),children:e.jsx(Rc,{onLogout:M})})]}),Z&&e.jsx(Qo,{activeTab:s,onTabChange:se}),f.show&&e.jsx(It,{message:f.message,type:f.type,onClose:()=>v({...f,show:!1})}),e.jsx("div",{"aria-live":"polite",role:"status",className:"sr-only",children:f.show?f.message:""}),ne&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onClick:()=>D(!1),children:e.jsxs("div",{className:"fixed inset-0 bg-white flex flex-col",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-gray-900 font-semibold text-lg",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-sm text-gray-700",onClick:xe,children:"Mark all read"}),e.jsx("button",{className:"text-sm text-gray-600",onClick:J,children:"Clear"}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100","aria-label":"Close",onClick:()=>D(!1),children:e.jsx(Ke,{className:"w-5 h-5 text-gray-700"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-scroll px-6 py-4 pb-24",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},role:"region","aria-label":"Notifications list",tabIndex:0,children:re.length===0?e.jsx("div",{className:"p-6 text-gray-500",children:"No notifications yet"}):e.jsx("div",{className:"space-y-3",children:re.map(j=>e.jsxs("div",{className:"p-4 rounded-lg border bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-gray-900",children:j.title}),e.jsx("div",{className:`text-xs ${j.read?"text-gray-400":"text-red-600"}`,children:j.read?"Read":"New"})]}),e.jsx("div",{className:"text-sm text-gray-700 mt-1",children:j.message}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:new Date(j.createdAt).toLocaleString()})]},j.id))})})]})})]})})}function ad(){return e.jsx(Bc,{children:e.jsx(Do,{children:e.jsx(rd,{})})})}const nd=o.lazy(()=>as(()=>import("./Markets-CpU70Kqp.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>({default:s.Markets}))),id=o.lazy(()=>as(()=>import("./Trading-C0Z69Zz5.js"),__vite__mapDeps([5,1,2,3])).then(s=>({default:s.Trading}))),od=o.lazy(()=>as(()=>import("./Portfolio-C7MIwYXV.js"),__vite__mapDeps([6,1,2,3])).then(s=>({default:s.Portfolio}))),ld=o.lazy(()=>as(()=>import("./Transactions-DT7xHTW7.js"),__vite__mapDeps([7,1,2,3,4])).then(s=>({default:s.Transactions})));dn.createRoot(document.getElementById("root")).render(e.jsx(Ze,{children:e.jsx(ad,{})}));export{Ge as A,E as B,Be as C,aa as D,Nt as E,gd as F,Os as G,wd as H,fe as I,gs as J,bs as K,je as L,ns as M,di as N,Bt as O,lc as P,Te as S,st as T,Ke as X,be as a,B as b,X as c,Ni as d,bd as e,Ye as f,cl as g,la as h,Pe as i,sa as j,Ys as k,hd as l,lt as m,Rs as n,Ze as o,wt as p,Ko as q,yd as r,xd as s,pd as t,ea as u,fd as v,le as w,md as x,ca as y,el as z};
